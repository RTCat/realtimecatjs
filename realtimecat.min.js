/*!
 * RealTimeCat JavaScript SDK v0.5.0-alpha
 * https://shishimao.com
 * Copyright 2015-2017 北京乐塔克科技有限公司
 * Date: 2017-05-24T02:18:56.181Z
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RTCat=t():e.RTCat=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),n(299),e.exports=n(309)},function(e,t,n){(function(e){"use strict";function t(e,t,n){e[t]||Object[r](e,t,{writable:!0,configurable:!0,value:n})}if(n(2),n(293),n(296),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var r="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,n){"use strict";n(3),n(52),n(53),n(54),n(55),n(57),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(70),n(72),n(74),n(76),n(79),n(80),n(81),n(85),n(87),n(89),n(92),n(93),n(94),n(95),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(105),n(106),n(107),n(109),n(110),n(111),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(131),n(132),n(136),n(137),n(138),n(139),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(159),n(160),n(166),n(167),n(169),n(170),n(171),n(175),n(176),n(177),n(178),n(179),n(181),n(182),n(183),n(184),n(187),n(189),n(190),n(191),n(193),n(195),n(197),n(198),n(199),n(201),n(202),n(203),n(204),n(211),n(214),n(215),n(217),n(218),n(221),n(222),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(244),n(245),n(246),n(247),n(248),n(249),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(260),n(261),n(263),n(264),n(265),n(266),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(291),n(292),e.exports=n(9)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(4),o=n(5),a=n(6),s=n(8),c=n(18),u=n(22).KEY,f=n(7),l=n(23),d=n(24),p=n(19),h=n(25),v=n(26),y=n(27),g=n(29),m=n(42),b=n(45),w=n(12),S=n(32),_=n(16),E=n(17),k=n(46),C=n(49),T=n(51),x=n(11),O=n(30),R=T.f,P=x.f,L=C.f,I=i.Symbol,M=i.JSON,A=M&&M.stringify,j="prototype",N=h("_hidden"),D=h("toPrimitive"),F={}.propertyIsEnumerable,B=l("symbol-registry"),V=l("symbols"),U=l("op-symbols"),G=Object[j],W="function"==typeof I,H=i.QObject,z=!H||!H[j]||!H[j].findChild,J=a&&f(function(){return 7!=k(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=R(G,t);r&&delete G[t],P(e,t,n),r&&e!==G&&P(G,t,r)}:P,q=function(e){var t=V[e]=k(I[j]);return t._k=e,t},Y=W&&"symbol"==r(I.iterator)?function(e){return"symbol"==("undefined"==typeof e?"undefined":r(e))}:function(e){return e instanceof I},Q=function(e,t,n){return e===G&&Q(U,t,n),w(e),t=_(t,!0),w(n),o(V,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=k(n,{enumerable:E(0,!1)})):(o(e,N)||P(e,N,E(1,{})),e[N][t]=!0),J(e,t,n)):P(e,t,n)},K=function(e,t){w(e);for(var n,r=m(t=S(t)),i=0,o=r.length;o>i;)Q(e,n=r[i++],t[n]);return e},X=function(e,t){return void 0===t?k(e):K(k(e),t)},$=function(e){var t=F.call(this,e=_(e,!0));return!(this===G&&o(V,e)&&!o(U,e))&&(!(t||!o(this,e)||!o(V,e)||o(this,N)&&this[N][e])||t)},Z=function(e,t){if(e=S(e),t=_(t,!0),e!==G||!o(V,t)||o(U,t)){var n=R(e,t);return!n||!o(V,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=L(S(e)),r=[],i=0;n.length>i;)o(V,t=n[i++])||t==N||t==u||r.push(t);return r},te=function(e){for(var t,n=e===G,r=L(n?U:S(e)),i=[],a=0;r.length>a;)!o(V,t=r[a++])||n&&!o(G,t)||i.push(V[t]);return i};W||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function t(n){this===G&&t.call(U,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),J(this,e,E(1,n))};return a&&z&&J(G,e,{configurable:!0,set:t}),q(e)},c(I[j],"toString",function(){return this._k}),T.f=Z,x.f=Q,n(50).f=C.f=ee,n(44).f=$,n(43).f=te,a&&!n(28)&&c(G,"propertyIsEnumerable",$,!0),v.f=function(e){return q(h(e))}),s(s.G+s.W+s.F*!W,{Symbol:I});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)h(ne[re++]);for(var ne=O(h.store),re=0;ne.length>re;)y(ne[re++]);s(s.S+s.F*!W,"Symbol",{for:function(e){return o(B,e+="")?B[e]:B[e]=I(e)},keyFor:function(e){if(Y(e))return g(B,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!W,"Object",{create:X,defineProperty:Q,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),M&&s(s.S+s.F*(!W||f(function(){var e=I();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Y(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&b(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,A.apply(M,r)}}}),I[j][D]||n(10)(I[j],D,I[j].valueOf),d(I,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t){"use strict";var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){"use strict";var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";e.exports=!n(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(4),i=n(9),o=n(10),a=n(18),s=n(20),c="prototype",u=function e(t,n,u){var f,l,d,p,h=t&e.F,v=t&e.G,y=t&e.S,g=t&e.P,m=t&e.B,b=v?r:y?r[n]||(r[n]={}):(r[n]||{})[c],w=v?i:i[n]||(i[n]={}),S=w[c]||(w[c]={});v&&(u=n);for(f in u)l=!h&&b&&void 0!==b[f],d=(l?b:u)[f],p=m&&l?s(d,r):g&&"function"==typeof d?s(Function.call,d):d,b&&a(b,f,d,t&e.U),w[f]!=d&&o(w,f,p),g&&S[f]!=d&&(S[f]=d)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){"use strict";var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";var r=n(11),i=n(17);e.exports=n(6)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var r=n(12),i=n(14),o=n(16),a=Object.defineProperty;t.f=n(6)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===("undefined"==typeof e?"undefined":n(e))?null!==e:"function"==typeof e}},function(e,t,n){"use strict";e.exports=!n(6)&&!n(7)(function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";var r=n(13),i=n(4).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(4),i=n(10),o=n(5),a=n(19)("src"),s="toString",c=Function[s],u=(""+c).split(s);n(9).inspectSource=function(e){return c.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||c.call(this)})},function(e,t){"use strict";var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";var r=n(21);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(19)("meta"),o=n(13),a=n(5),s=n(11).f,c=0,u=Object.isExtensible||function(){return!0},f=!n(7)(function(){return u(Object.preventExtensions({}))}),l=function(e){s(e,i,{value:{i:"O"+ ++c,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==("undefined"==typeof e?"undefined":r(e))?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[i].i},p=function(e,t){if(!a(e,i)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[i].w},h=function(e){return f&&v.NEED&&u(e)&&!a(e,i)&&l(e),e},v=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:p,onFreeze:h}},function(e,t,n){"use strict";var r=n(4),i="__core-js_shared__",o=r[i]||(r[i]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){"use strict";var r=n(11).f,i=n(5),o=n(25)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(23)("wks"),i=n(19),o=n(4).Symbol,a="function"==typeof o,s=e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=r},function(e,t,n){"use strict";t.f=n(25)},function(e,t,n){"use strict";var r=n(4),i=n(9),o=n(28),a=n(26),s=n(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){"use strict";e.exports=!1},function(e,t,n){"use strict";var r=n(30),i=n(32);e.exports=function(e,t){for(var n,o=i(e),a=r(o),s=a.length,c=0;s>c;)if(o[n=a[c++]]===t)return n}},function(e,t,n){"use strict";var r=n(31),i=n(41);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(5),i=n(32),o=n(36)(!1),a=n(40)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){"use strict";var r=n(33),i=n(35);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";var r=n(34);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){"use strict";var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){"use strict";e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(32),i=n(37),o=n(39);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),f=o(a,u);if(e&&n!=n){for(;u>f;)if(s=c[f++],s!=s)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){"use strict";var r=n(38),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){"use strict";var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(38),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(23)("keys"),i=n(19);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){"use strict";e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){"use strict";var r=n(30),i=n(43),o=n(44);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),c=o.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},function(e,t){"use strict";t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(34);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(12),i=n(47),o=n(41),a=n(40)("IE_PROTO"),s=function(){},c="prototype",u=function(){var e,t=n(15)("iframe"),r=o.length,i="<",a=">";for(t.style.display="none",n(48).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),u=e.F;r--;)delete u[c][o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=r(e),n=new s,s[c]=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){"use strict";var r=n(11),i=n(12),o=n(30);e.exports=n(6)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){"use strict";e.exports=n(4).document&&document.documentElement},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(32),o=n(50).f,a={}.toString,s="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return o(e)}catch(e){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?c(e):o(i(e))}},function(e,t,n){"use strict";var r=n(31),i=n(41).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(44),i=n(17),o=n(32),a=n(16),s=n(5),c=n(14),u=Object.getOwnPropertyDescriptor;t.f=n(6)?u:function(e,t){if(e=o(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r=n(8);r(r.S,"Object",{create:n(46)})},function(e,t,n){"use strict";var r=n(8);r(r.S+r.F*!n(6),"Object",{defineProperty:n(11).f})},function(e,t,n){"use strict";var r=n(8);r(r.S+r.F*!n(6),"Object",{defineProperties:n(47)})},function(e,t,n){"use strict";var r=n(32),i=n(51).f;n(56)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){"use strict";var r=n(8),i=n(9),o=n(7);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){"use strict";var r=n(58),i=n(59);n(56)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){"use strict";var r=n(35);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r=n(5),i=n(58),o=n(40)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";var r=n(58),i=n(30);n(56)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){"use strict";n(56)("getOwnPropertyNames",function(){return n(49).f})},function(e,t,n){"use strict";var r=n(13),i=n(22).onFreeze;n(56)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){"use strict";var r=n(13),i=n(22).onFreeze;n(56)("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){"use strict";var r=n(13),i=n(22).onFreeze;n(56)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){"use strict";var r=n(13);n(56)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){"use strict";var r=n(13);n(56)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){"use strict";var r=n(13);n(56)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){"use strict";var r=n(8);r(r.S+r.F,"Object",{assign:n(69)})},function(e,t,n){"use strict";var r=n(30),i=n(43),o=n(44),a=n(58),s=n(33),c=Object.assign;e.exports=!c||n(7)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=a(e),c=arguments.length,u=1,f=i.f,l=o.f;c>u;)for(var d,p=s(arguments[u++]),h=f?r(p).concat(f(p)):r(p),v=h.length,y=0;v>y;)l.call(p,d=h[y++])&&(n[d]=p[d]);return n}:c},function(e,t,n){"use strict";var r=n(8);r(r.S,"Object",{is:n(71)})},function(e,t){"use strict";e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(8);r(r.S,"Object",{setPrototypeOf:n(73).set})},function(e,t,n){"use strict";var r=n(13),i=n(12),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(20)(Function.call,n(51).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){"use strict";var r=n(75),i={};i[n(25)("toStringTag")]="z",i+""!="[object z]"&&n(18)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){"use strict";var r=n(34),i=n(25)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var r=n(8);r(r.P,"Function",{bind:n(77)})},function(e,t,n){"use strict";var r=n(21),i=n(13),o=n(78),a=[].slice,s={},c=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function r(){var i=n.concat(a.call(arguments));return this instanceof r?c(t,i.length,i):o(t,i,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){"use strict";e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){"use strict";var r=n(11).f,i=n(17),o=n(5),a=Function.prototype,s=/^\s*function ([^ (]*)/,c="name",u=Object.isExtensible||function(){return!0};c in a||n(6)&&r(a,c,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(s)[1];return o(e,c)||!u(e)||r(e,c,i(5,t)),t}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(13),i=n(59),o=n(25)("hasInstance"),a=Function.prototype;o in a||n(11).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){"use strict";var r=n(8),i=n(82);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){"use strict";var r=n(4).parseInt,i=n(83).trim,o=n(84),a=/^[\-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){"use strict";var r=n(8),i=n(35),o=n(7),a=n(84),s="["+a+"]",c="​",u=RegExp("^"+s+s+"*"),f=RegExp(s+s+"*$"),l=function(e,t,n){var i={},s=o(function(){return!!a[e]()||c[e]()!=c}),u=i[e]=s?t(d):a[e];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},d=l.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(f,"")),e};e.exports=l},function(e,t){"use strict";e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){"use strict";var r=n(8),i=n(86);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(4).parseFloat,i=n(83).trim;e.exports=1/r(n(84)+"-0")!==-(1/0)?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(34),a=n(88),s=n(16),c=n(7),u=n(50).f,f=n(51).f,l=n(11).f,d=n(83).trim,p="Number",h=r[p],v=h,y=h.prototype,g=o(n(46)(y))==p,m="trim"in String.prototype,b=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=m?t.trim():d(t,3);var n,r,i,o=t.charCodeAt(0);if(43===o||45===o){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,c=t.slice(2),u=0,f=c.length;u<f;u++)if(a=c.charCodeAt(u),a<48||a>i)return NaN;return parseInt(c,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(g?c(function(){y.valueOf.call(n)}):o(n)!=p)?a(new v(b(t)),n,h):b(t)};for(var w,S=n(6)?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;S.length>_;_++)i(v,w=S[_])&&!i(h,w)&&l(h,w,f(v,w));h.prototype=y,y.constructor=h,n(18)(r,p,h)}},function(e,t,n){"use strict";var r=n(13),i=n(73).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(8),i=n(38),o=n(90),a=n(91),s=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",l="0",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*u[n],u[n]=r%1e7,r=c(r/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=c(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+a.call(l,7-n.length)+n}return t},v=function e(t,n,r){return 0===n?r:n%2===1?e(t,n-1,r*t):e(t*t,n/2,r)},y=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(7)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,r,s,c=o(this,f),u=i(e),g="",m=l;if(u<0||u>20)throw RangeError(f);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(g="-",c=-c),c>1e-21)if(t=y(c*v(2,69,1))-69,n=t<0?c*v(2,-t,1):c/v(2,t,1),n*=4503599627370496,t=52-t,t>0){for(d(0,n),r=u;r>=7;)d(1e7,0),r-=7;for(d(v(10,r,1),0),r=t-1;r>=23;)p(1<<23),r-=23;p(1<<r),d(1,1),p(2),m=h()}else d(0,n),d(1<<-t,0),m=h()+a.call(l,u);return u>0?(s=m.length,m=g+(s<=u?"0."+a.call(l,u-s)+m:m.slice(0,s-u)+"."+m.slice(s-u))):m=g+m,m}})},function(e,t,n){"use strict";var r=n(34);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){"use strict";var r=n(38),i=n(35);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){"use strict";var r=n(8),i=n(7),o=n(90),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){"use strict";var r=n(8),i=n(4).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Number",{isInteger:n(96)})},function(e,t,n){"use strict";var r=n(13),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t,n){"use strict";var r=n(8);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){"use strict";var r=n(8),i=n(96),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){"use strict";var r=n(8),i=n(86);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){"use strict";var r=n(8),i=n(82);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){"use strict";var r=n(8),i=n(104),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t){"use strict";e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=n(8),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(e,t,n){"use strict";var r=n(8),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){"use strict";var r=n(8),i=n(108);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){"use strict";e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){"use strict";var r=n(8),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){"use strict";var r=n(8),i=n(112);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t){"use strict";var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){"use strict";var r=n(8),i=n(108),o=Math.pow,a=o(2,-52),s=o(2,-23),c=o(2,127)*(2-s),u=o(2,-126),f=function(e){return e+1/a-1/a};r(r.S,"Math",{fround:function(e){var t,n,r=Math.abs(e),o=i(e);return r<u?o*f(r/u/s)*u*s:(t=(1+s/a)*r,n=t-(t-r),n>c||n!=n?o*(1/0):o*n)}})},function(e,t,n){"use strict";var r=n(8),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,c=0;a<s;)n=i(arguments[a++]),c<n?(r=c/n,o=o*r*r+1,c=n):n>0?(r=n/c,o+=r*r):o+=n;return c===1/0?1/0:c*Math.sqrt(o)}})},function(e,t,n){"use strict";var r=n(8),i=Math.imul;r(r.S+r.F*n(7)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(e,t){var n=65535,r=+e,i=+t,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{log1p:n(104)})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{sign:n(108)})},function(e,t,n){"use strict";var r=n(8),i=n(112),o=Math.exp;r(r.S+r.F*n(7)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){"use strict";var r=n(8),i=n(112),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){"use strict";var r=n(8),i=n(39),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var r=n(8),i=n(32),o=n(37);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(83)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(127)(!0);n(128)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(38),i=n(35);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):(o-55296<<10)+(a-56320)+65536)}}},function(e,t,n){"use strict";var r=n(28),i=n(8),o=n(18),a=n(10),s=n(5),c=n(129),u=n(130),f=n(24),l=n(59),d=n(25)("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",v="keys",y="values",g=function(){return this};e.exports=function(e,t,n,m,b,w,S){u(n,t,m);var _,E,k,C=function(e){if(!p&&e in R)return R[e];switch(e){case v:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",x=b==y,O=!1,R=e.prototype,P=R[d]||R[h]||b&&R[b],L=P||C(b),I=b?x?C("entries"):L:void 0,M="Array"==t?R.entries||P:P;if(M&&(k=l(M.call(new e)),k!==Object.prototype&&(f(k,T,!0),r||s(k,d)||a(k,d,g))),x&&P&&P.name!==y&&(O=!0,L=function(){return P.call(this)}),r&&!S||!p&&!O&&R[d]||a(R,d,L),c[t]=L,c[T]=g,b)if(_={values:x?L:C(y),keys:w?L:C(v),entries:I},S)for(E in _)E in R||o(R,E,_[E]);else i(i.P+i.F*(p||O),t,_);return _}},function(e,t){"use strict";e.exports={}},function(e,t,n){"use strict";var r=n(46),i=n(17),o=n(24),a={};n(10)(a,n(25)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(8),i=n(127)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(8),i=n(37),o=n(133),a="endsWith",s=""[a];r(r.P+r.F*n(135)(a),"String",{endsWith:function(e){var t=o(this,e,a),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),c=void 0===n?r:Math.min(i(n),r),u=String(e);return s?s.call(t,u,c):t.slice(c-u.length,c)===u}})},function(e,t,n){"use strict";var r=n(134),i=n(35);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){"use strict";var r=n(13),i=n(34),o=n(25)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){"use strict";var r=n(25)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){"use strict";var r=n(8),i=n(133),o="includes";r(r.P+r.F*n(135)(o),"String",{includes:function(e){return!!~i(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(8);r(r.P,"String",{repeat:n(91)})},function(e,t,n){"use strict";var r=n(8),i=n(37),o=n(133),a="startsWith",s=""[a];r(r.P+r.F*n(135)(a),"String",{
startsWith:function(e){var t=o(this,e,a),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return s?s.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(140)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";var r=n(8),i=n(7),o=n(35),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){"use strict";n(140)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(140)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(140)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(140)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(140)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(140)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(140)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(140)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(140)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(140)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(140)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(140)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(8),i=n(58),o=n(16);r(r.P+r.F*n(7)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){"use strict";var r=n(8),i=n(7),o=Date.prototype.getTime,a=function(e){return e>9?e:"0"+e};r(r.P+r.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}})},function(e,t,n){"use strict";var r=Date.prototype,i="Invalid Date",o="toString",a=r[o],s=r.getTime;new Date(NaN)+""!=i&&n(18)(r,o,function(){var e=s.call(this);return e===e?a.call(this):i})},function(e,t,n){"use strict";var r=n(25)("toPrimitive"),i=Date.prototype;r in i||n(10)(i,r,n(158))},function(e,t,n){"use strict";var r=n(12),i=n(16),o="number";e.exports=function(e){if("string"!==e&&e!==o&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),e!=o)}},function(e,t,n){"use strict";var r=n(8);r(r.S,"Array",{isArray:n(45)})},function(e,t,n){"use strict";var r=n(20),i=n(8),o=n(58),a=n(161),s=n(162),c=n(37),u=n(163),f=n(164);i(i.S+i.F*!n(165)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,l,d=o(e),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,y=void 0!==v,g=0,m=f(d);if(y&&(v=r(v,h>2?arguments[2]:void 0,2)),void 0==m||p==Array&&s(m))for(t=c(d.length),n=new p(t);t>g;g++)u(n,g,y?v(d[g],g):d[g]);else for(l=m.call(d),n=new p;!(i=l.next()).done;g++)u(n,g,y?a(l,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(12);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){"use strict";var r=n(129),i=n(25)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(11),i=n(17);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){"use strict";var r=n(75),i=n(25)("iterator"),o=n(129);e.exports=n(9).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(25)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(8),i=n(163);r(r.S+r.F*n(7)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(8),i=n(32),o=[].join;r(r.P+r.F*(n(33)!=Object||!n(168)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";var r=n(8),i=n(48),o=n(34),a=n(39),s=n(37),c=[].slice;r(r.P+r.F*n(7)(function(){i&&c.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return c.call(this,e,t);for(var i=a(e,n),u=a(t,n),f=s(u-i),l=Array(f),d=0;d<f;d++)l[d]="String"==r?this.charAt(i+d):this[i+d];return l}})},function(e,t,n){"use strict";var r=n(8),i=n(21),o=n(58),a=n(7),s=[].sort,c=[1,2,3];r(r.P+r.F*(a(function(){c.sort(void 0)})||!a(function(){c.sort(null)})||!n(168)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(8),i=n(172)(0),o=n(168)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(20),i=n(33),o=n(58),a=n(37),s=n(173);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,f=4==e,l=6==e,d=5==e||l,p=t||s;return function(t,s,h){for(var v,y,g=o(t),m=i(g),b=r(s,h,3),w=a(m.length),S=0,_=n?p(t,w):c?p(t,0):void 0;w>S;S++)if((d||S in m)&&(v=m[S],y=b(v,S,g),e))if(n)_[S]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:_.push(v)}else if(f)return!1;return l?-1:u||f?f:_}}},function(e,t,n){"use strict";var r=n(174);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(13),i=n(45),o=n(25)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(8),i=n(172)(1);r(r.P+r.F*!n(168)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(172)(2);r(r.P+r.F*!n(168)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(172)(3);r(r.P+r.F*!n(168)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(172)(4);r(r.P+r.F*!n(168)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(180);r(r.P+r.F*!n(168)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(21),i=n(58),o=n(33),a=n(37);e.exports=function(e,t,n,s,c){r(t);var u=i(e),f=o(u),l=a(u.length),d=c?l-1:0,p=c?-1:1;if(n<2)for(;;){if(d in f){s=f[d],d+=p;break}if(d+=p,c?d<0:l<=d)throw TypeError("Reduce of empty array with no initial value")}for(;c?d>=0:l>d;d+=p)d in f&&(s=t(s,f[d],d,u));return s}},function(e,t,n){"use strict";var r=n(8),i=n(180);r(r.P+r.F*!n(168)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(8),i=n(36)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(168)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(32),o=n(38),a=n(37),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(168)(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){"use strict";var r=n(8);r(r.P,"Array",{copyWithin:n(185)}),n(186)("copyWithin")},function(e,t,n){"use strict";var r=n(58),i=n(39),o=n(37);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),c=i(t,a),u=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===u?a:i(u,a))-c,a-s),l=1;for(c<s&&s<c+f&&(l=-1,c+=f-1,s+=f-1);f-- >0;)c in n?n[s]=n[c]:delete n[s],s+=l,c+=l;return n}},function(e,t,n){"use strict";var r=n(25)("unscopables"),i=Array.prototype;void 0==i[r]&&n(10)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){"use strict";var r=n(8);r(r.P,"Array",{fill:n(188)}),n(186)("fill")},function(e,t,n){"use strict";var r=n(58),i=n(39),o=n(37);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(8),i=n(172)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(186)(o)},function(e,t,n){"use strict";var r=n(8),i=n(172)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(186)(o)},function(e,t,n){"use strict";n(192)("Array")},function(e,t,n){"use strict";var r=n(4),i=n(11),o=n(6),a=n(25)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(186),i=n(194),o=n(129),a=n(32);e.exports=n(128)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){"use strict";e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(4),i=n(88),o=n(11).f,a=n(50).f,s=n(134),c=n(196),u=r.RegExp,f=u,l=u.prototype,d=/a/g,p=/a/g,h=new u(d)!==d;if(n(6)&&(!h||n(7)(function(){return p[n(25)("match")]=!1,u(d)!=d||u(p)==p||"/a/i"!=u(d,"i")}))){u=function(e,t){var n=this instanceof u,r=s(e),o=void 0===t;return!n&&r&&e.constructor===u&&o?e:i(h?new f(r&&!o?e.source:e,t):f((r=e instanceof u)?e.source:e,r&&o?c.call(e):t),n?this:l,u)};for(var v=(function(e){e in u||o(u,e,{configurable:!0,get:function(){return f[e]},set:function(t){f[e]=t}})}),y=a(f),g=0;y.length>g;)v(y[g++]);l.constructor=u,u.prototype=l,n(18)(r,"RegExp",u)}n(192)("RegExp")},function(e,t,n){"use strict";var r=n(12);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";n(198);var r=n(12),i=n(196),o=n(6),a="toString",s=/./[a],c=function(e){n(18)(RegExp.prototype,a,e,!0)};n(7)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?c(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):s.name!=a&&c(function(){return s.call(this)})},function(e,t,n){"use strict";n(6)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(196)})},function(e,t,n){"use strict";n(200)("match",1,function(e,t,n){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){"use strict";var r=n(10),i=n(18),o=n(7),a=n(35),s=n(25);e.exports=function(e,t,n){var c=s(e),u=n(a,c,""[e]),f=u[0],l=u[1];o(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,f),r(RegExp.prototype,c,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)}))}},function(e,t,n){"use strict";n(200)("replace",2,function(e,t,n){return[function(r,i){var o=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]})},function(e,t,n){"use strict";n(200)("search",1,function(e,t,n){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){"use strict";n(200)("split",2,function(e,t,r){var i=n(134),o=r,a=[].push,s="split",c="length",u="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[c]||2!="ab"[s](/(?:ab)*/)[c]||4!="."[s](/(.?)(.?)/)[c]||"."[s](/()()/)[c]>1||""[s](/.?/)[c]){var f=void 0===/()??/.exec("")[1];r=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!i(e))return o.call(n,e,t);var r,s,l,d,p,h=[],v=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),y=0,g=void 0===t?4294967295:t>>>0,m=new RegExp(e.source,v+"g");for(f||(r=new RegExp("^"+m.source+"$(?!\\s)",v));(s=m.exec(n))&&(l=s.index+s[0][c],!(l>y&&(h.push(n.slice(y,s.index)),!f&&s[c]>1&&s[0].replace(r,function(){for(p=1;p<arguments[c]-2;p++)void 0===arguments[p]&&(s[p]=void 0)}),s[c]>1&&s.index<n[c]&&a.apply(h,s.slice(1)),d=s[0][c],y=l,h[c]>=g)));)m[u]===s.index&&m[u]++;return y===n[c]?!d&&m.test("")||h.push(""):h.push(n.slice(y)),h[c]>g?h.slice(0,g):h}}else"0"[s](void 0,0)[c]&&(r=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(n,i){var o=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]})},function(e,t,n){"use strict";var r,i,o,a=n(28),s=n(4),c=n(20),u=n(75),f=n(8),l=n(13),d=n(21),p=n(205),h=n(206),v=n(207),y=n(208).set,g=n(209)(),m="Promise",b=s.TypeError,w=s.process,S=s[m],w=s.process,_="process"==u(w),E=function(){},k=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[n(25)("species")]=function(e){e(E,E)};return(_||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(e){}}(),C=function(e,t){return e===t||e===S&&t===o},T=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},x=function(e){return C(S,e)?new O(e):new i(e)},O=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},R=function(e){try{e()}catch(e){return{error:e}}},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,c=t.reject,u=t.domain;try{a?(i||(2==e._h&&M(e),e._h=1),a===!0?n=r:(u&&u.enter(),n=a(r),u&&u.exit()),n===t.promise?c(b("Promise-chain cycle")):(o=T(n))?o.call(n,s,c):s(n)):c(r)}catch(e){c(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&L(e)})}},L=function(e){y.call(s,function(){var t,n,r,i=e._v;if(I(e)&&(t=R(function(){_?w.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=_||I(e)?2:1),e._a=void 0,t)throw t.error})},I=function e(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,i=0;r.length>i;)if(n=r[i++],n.fail||!e(n.promise))return!1;return!0},M=function(e){y.call(s,function(){var t;_?w.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},A=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},j=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw b("Promise can't be resolved itself");(n=T(t))?g(function(){var i={_w:r,_d:!1};try{n.call(t,c(e,i,1),c(A,i,1))}catch(e){A.call(i,e)}}):(r._v=t,r._s=1,P(r,!1))}catch(e){A.call({_w:r,_d:!1},e)}}};k||(S=function(e){p(this,S,m,"_h"),d(e),r.call(this);try{e(c(j,this,1),c(A,this,1))}catch(e){A.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(210)(S.prototype,{then:function(e,t){var n=x(v(this,S));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=_?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),O=function(){var e=new r;this.promise=e,this.resolve=c(j,e,1),this.reject=c(A,e,1)}),f(f.G+f.W+f.F*!k,{Promise:S}),n(24)(S,m),n(192)(m),o=n(9)[m],f(f.S+f.F*!k,m,{reject:function(e){var t=x(this),n=t.reject;return n(e),t.promise}}),f(f.S+f.F*(a||!k),m,{resolve:function(e){if(e instanceof S&&C(e.constructor,this))return e;var t=x(this),n=t.resolve;return n(e),t.promise}}),f(f.S+f.F*!(k&&n(165)(function(e){S.all(e).catch(E)})),m,{all:function(e){var t=this,n=x(t),r=n.resolve,i=n.reject,o=R(function(){var n=[],o=0,a=1;h(e,!1,function(e){var s=o++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=x(t),r=n.reject,i=R(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t){"use strict";e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";var r=n(20),i=n(161),o=n(162),a=n(12),s=n(37),c=n(164),u={},f={},l=e.exports=function(e,t,n,l,d){var p,h,v,y,g=d?function(){return e}:c(e),m=r(n,l,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>b;b++)if(y=t?m(a(h=e[b])[0],h[1]):m(e[b]),y===u||y===f)return y}else for(v=g.call(e);!(h=v.next()).done;)if(y=i(v,m,h.value,t),y===u||y===f)return y};l.BREAK=u,l.RETURN=f},function(e,t,n){"use strict";var r=n(12),i=n(21),o=n(25)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){"use strict";var r,i,o,a=n(20),s=n(78),c=n(48),u=n(15),f=n(4),l=f.process,d=f.setImmediate,p=f.clearImmediate,h=f.MessageChannel,v=0,y={},g="onreadystatechange",m=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){m.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete y[e]},"process"==n(34)(l)?r=function(e){l.nextTick(a(m,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(e){f.postMessage(e+"","*")},f.addEventListener("message",b,!1)):r=g in u("script")?function(e){c.appendChild(u("script"))[g]=function(){c.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,n){"use strict";var r=n(4),i=n(208).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(34)(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(o){var f=!0,l=document.createTextNode("");new o(u).observe(l,{characterData:!0}),n=function(){l.data=f=!f}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(u)}}else n=function(){i.call(r,u)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";var r=n(212);e.exports=n(213)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(11).f,i=n(46),o=n(210),a=n(20),s=n(205),c=n(35),u=n(206),f=n(128),l=n(194),d=n(192),p=n(6),h=n(22).fastKey,v=p?"_s":"size",y=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,f){var l=e(function(e,r){s(e,l,t,"_i"),e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[f],e)});return o(l.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var t=this,n=y(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[v]--}return!!n},forEach:function(e){s(this,l,"forEach");for(var t,n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!y(this,e)}}),p&&r(l.prototype,"size",{get:function(){return c(this[v])}}),l},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){f(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(4),i=n(8),o=n(18),a=n(210),s=n(22),c=n(206),u=n(205),f=n(13),l=n(7),d=n(165),p=n(24),h=n(88);e.exports=function(e,t,n,v,y,g){var m=r[e],b=m,w=y?"set":"add",S=b&&b.prototype,_={},E=function(e){var t=S[e];o(S,e,"delete"==e?function(e){return!(g&&!f(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!f(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!f(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(g||S.forEach&&!l(function(){(new b).entries().next()}))){var k=new b,C=k[w](g?{}:-0,1)!=k,T=l(function(){k.has(1)}),x=d(function(e){new b(e)}),O=!g&&l(function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)});x||(b=t(function(t,n){u(t,b,e);var r=h(new m,t,b);return void 0!=n&&c(n,y,r[w],r),r}),b.prototype=S,S.constructor=b),(T||O)&&(E("delete"),E("has"),y&&E("get")),(O||C)&&E(w),g&&S.clear&&delete S.clear}else b=v.getConstructor(t,e,y,w),a(b.prototype,n),s.NEED=!0;return p(b,e),_[e]=b,i(i.G+i.W+i.F*(b!=m),_),g||v.setStrong(b,e,y),b}},function(e,t,n){"use strict";var r=n(212);e.exports=n(213)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(172)(0),o=n(18),a=n(22),s=n(69),c=n(216),u=n(13),f=a.getWeak,l=Object.isExtensible,d=c.ufstore,p={},h=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(u(e)){var t=f(e);return t===!0?d(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(this,e,t)}},y=e.exports=n(213)("WeakMap",h,v,c,!0,!0);7!=(new y).set((Object.freeze||Object)(p),7).get(p)&&(r=c.getConstructor(h),s(r.prototype,v),a.NEED=!0,i(["delete","has","get","set"],function(e){var t=y.prototype,n=t[e];o(t,e,function(t,i){if(u(t)&&!l(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)})}))},function(e,t,n){"use strict";var r=n(210),i=n(22).getWeak,o=n(12),a=n(13),s=n(205),c=n(206),u=n(172),f=n(5),l=u(5),d=u(6),p=0,h=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},y=function(e,t){return l(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e(function(e,r){s(e,u,t,"_i"),e._i=p++,e._l=void 0,void 0!=r&&c(r,n,e[o],e)});return r(u.prototype,{delete:function(e){if(!a(e))return!1;var t=i(e);return t===!0?h(this).delete(e):t&&f(t,this._i)&&delete t[this._i]},has:function(e){if(!a(e))return!1;var t=i(e);return t===!0?h(this).has(e):t&&f(t,this._i)}}),u},def:function(e,t,n){var r=i(o(t),!0);return r===!0?h(e).set(t,n):r[e._i]=n,e},ufstore:h}},function(e,t,n){"use strict";var r=n(216);n(213)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(8),i=n(219),o=n(220),a=n(12),s=n(39),c=n(37),u=n(13),f=n(4).ArrayBuffer,l=n(207),d=o.ArrayBuffer,p=o.DataView,h=i.ABV&&f.isView,v=d.prototype.slice,y=i.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(f!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,g,{isView:function(e){return h&&h(e)||u(e)&&y in e}}),r(r.P+r.U+r.F*n(7)(function(){return!new d(2).slice(1,void 0).byteLength}),g,{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(l(this,d))(c(i-r)),u=new p(this),f=new p(o),h=0;r<i;)f.setUint8(h++,u.getUint8(r++));return o}}),n(192)(g)},function(e,t,n){"use strict";for(var r,i=n(4),o=n(10),a=n(19),s=a("typed_array"),c=a("view"),u=!(!i.ArrayBuffer||!i.DataView),f=u,l=0,d=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<d;)(r=i[p[l++]])?(o(r.prototype,s,!0),o(r.prototype,c,!0)):f=!1;e.exports={ABV:u,CONSTR:f,TYPED:s,VIEW:c}},function(e,t,n){"use strict";var r=n(4),i=n(6),o=n(28),a=n(219),s=n(10),c=n(210),u=n(7),f=n(205),l=n(38),d=n(37),p=n(50).f,h=n(11).f,v=n(188),y=n(24),g="ArrayBuffer",m="DataView",b="prototype",w="Wrong length!",S="Wrong index!",_=r[g],E=r[m],k=r.Math,C=r.RangeError,T=r.Infinity,x=_,O=k.abs,R=k.pow,P=k.floor,L=k.log,I=k.LN2,M="buffer",A="byteLength",j="byteOffset",N=i?"_b":M,D=i?"_l":A,F=i?"_o":j,B=function(e,t,n){var r,i,o,a=Array(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,f=23===t?R(2,-24)-R(2,-77):0,l=0,d=e<0||0===e&&1/e<0?1:0;for(e=O(e),e!=e||e===T?(i=e!=e?1:0,r=c):(r=P(L(e)/I),e*(o=R(2,-r))<1&&(r--,o*=2),e+=r+u>=1?f/o:f*R(2,1-u),e*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*R(2,t),r+=u):(i=e*R(2,u-1)*R(2,t),r=0));t>=8;a[l++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[l++]=255&r,r/=256,s-=8);return a[--l]|=128*d,a},V=function(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=n-1,u=e[c--],f=127&u;for(u>>=7;s>0;f=256*f+e[c],c--,s-=8);for(r=f&(1<<-s)-1,f>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===f)f=1-a;else{if(f===o)return r?NaN:u?-T:T;r+=R(2,t),f-=a}return(u?-1:1)*r*R(2,f-t)},U=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},G=function(e){return[255&e]},W=function(e){return[255&e,e>>8&255]},H=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},z=function(e){return B(e,52,8)},J=function(e){return B(e,23,4)},q=function(e,t,n){h(e[b],t,{get:function(){return this[n]}})},Y=function(e,t,n,r){var i=+n,o=l(i);if(i!=o||o<0||o+t>e[D])throw C(S);var a=e[N]._b,s=o+e[F],c=a.slice(s,s+t);return r?c:c.reverse()},Q=function(e,t,n,r,i,o){var a=+n,s=l(a);if(a!=s||s<0||s+t>e[D])throw C(S);for(var c=e[N]._b,u=s+e[F],f=r(+i),d=0;d<t;d++)c[u+d]=f[o?d:t-d-1]},K=function(e,t){f(e,_,g);var n=+t,r=d(n);if(n!=r)throw C(w);return r};if(a.ABV){if(!u(function(){new _})||!u(function(){new _(.5)})){_=function(e){return new x(K(this,e))};for(var X,$=_[b]=x[b],Z=p(x),ee=0;Z.length>ee;)(X=Z[ee++])in _||s(_,X,x[X]);o||($.constructor=_)}var te=new E(new _(2)),ne=E[b].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||c(E[b],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else _=function(e){var t=K(this,e);this._b=v.call(Array(t),0),this[D]=t},E=function(e,t,n){f(this,E,m),f(e,_,m);var r=e[D],i=l(t);if(i<0||i>r)throw C("Wrong offset!");if(n=void 0===n?r-i:d(n),i+n>r)throw C(w);this[N]=e,this[F]=i,this[D]=n},i&&(q(_,A,"_l"),q(E,M,"_b"),q(E,A,"_l"),q(E,j,"_o")),c(E[b],{getInt8:function(e){return Y(this,1,e)[0]<<24>>24},getUint8:function(e){return Y(this,1,e)[0]},getInt16:function(e){var t=Y(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Y(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return U(Y(this,4,e,arguments[1]))},getUint32:function(e){return U(Y(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return V(Y(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return V(Y(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){Q(this,1,e,G,t)},setUint8:function(e,t){Q(this,1,e,G,t)},setInt16:function(e,t){Q(this,2,e,W,t,arguments[2])},setUint16:function(e,t){Q(this,2,e,W,t,arguments[2])},setInt32:function(e,t){Q(this,4,e,H,t,arguments[2])},setUint32:function(e,t){Q(this,4,e,H,t,arguments[2])},setFloat32:function(e,t){Q(this,4,e,J,t,arguments[2])},setFloat64:function(e,t){Q(this,8,e,z,t,arguments[2])}});y(_,g),y(E,m),s(E[b],a.VIEW,!0),t[g]=_,t[m]=E},function(e,t,n){"use strict";var r=n(8);r(r.G+r.W+r.F*!n(219).ABV,{DataView:n(220).DataView})},function(e,t,n){"use strict";n(223)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(n(6)){var i=n(28),o=n(4),a=n(7),s=n(8),c=n(219),u=n(220),f=n(20),l=n(205),d=n(17),p=n(10),h=n(210),v=n(38),y=n(37),g=n(39),m=n(16),b=n(5),w=n(71),S=n(75),_=n(13),E=n(58),k=n(162),C=n(46),T=n(59),x=n(50).f,O=n(164),R=n(19),P=n(25),L=n(172),I=n(36),M=n(207),A=n(193),j=n(129),N=n(165),D=n(192),F=n(188),B=n(185),V=n(11),U=n(51),G=V.f,W=U.f,H=o.RangeError,z=o.TypeError,J=o.Uint8Array,q="ArrayBuffer",Y="Shared"+q,Q="BYTES_PER_ELEMENT",K="prototype",X=Array[K],$=u.ArrayBuffer,Z=u.DataView,ee=L(0),te=L(2),ne=L(3),re=L(4),ie=L(5),oe=L(6),ae=I(!0),se=I(!1),ce=A.values,ue=A.keys,fe=A.entries,le=X.lastIndexOf,de=X.reduce,pe=X.reduceRight,he=X.join,ve=X.sort,ye=X.slice,ge=X.toString,me=X.toLocaleString,be=P("iterator"),we=P("toStringTag"),Se=R("typed_constructor"),_e=R("def_constructor"),Ee=c.CONSTR,ke=c.TYPED,Ce=c.VIEW,Te="Wrong length!",xe=L(1,function(e,t){return Me(M(e,e[_e]),t)}),Oe=a(function(){return 1===new J(new Uint16Array([1]).buffer)[0]}),Re=!!J&&!!J[K].set&&a(function(){new J(1).set({})}),Pe=function(e,t){if(void 0===e)throw z(Te);var n=+e,r=y(e);if(t&&!w(n,r))throw H(Te);return r},Le=function(e,t){var n=v(e);if(n<0||n%t)throw H("Wrong offset!");return n},Ie=function(e){if(_(e)&&ke in e)return e;throw z(e+" is not a typed array!")},Me=function(e,t){if(!(_(e)&&Se in e))throw z("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return je(M(e,e[_e]),t)},je=function(e,t){for(var n=0,r=t.length,i=Me(e,r);r>n;)i[n]=t[n++];return i},Ne=function(e,t,n){G(e,t,{get:function(){return this._d[n]}})},De=function(e){var t,n,r,i,o,a,s=E(e),c=arguments.length,u=c>1?arguments[1]:void 0,l=void 0!==u,d=O(s);if(void 0!=d&&!k(d)){for(a=d.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(l&&c>2&&(u=f(u,arguments[2],2)),t=0,n=y(s.length),i=Me(this,n);n>t;t++)i[t]=l?u(s[t],t):s[t];return i},Fe=function(){for(var e=0,t=arguments.length,n=Me(this,t);t>e;)n[e]=arguments[e++];return n},Be=!!J&&a(function(){me.call(new J(1))}),Ve=function(){return me.apply(Be?ye.call(Ie(this)):Ie(this),arguments)},Ue={copyWithin:function(e,t){return B.call(Ie(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return re(Ie(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){
return F.apply(Ie(this),arguments)},filter:function(e){return Ae(this,te(Ie(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ie(Ie(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return oe(Ie(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){ee(Ie(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return se(Ie(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ae(Ie(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return he.apply(Ie(this),arguments)},lastIndexOf:function(e){return le.apply(Ie(this),arguments)},map:function(e){return xe(Ie(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return de.apply(Ie(this),arguments)},reduceRight:function(e){return pe.apply(Ie(this),arguments)},reverse:function(){for(var e,t=this,n=Ie(t).length,r=Math.floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t},some:function(e){return ne(Ie(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ve.call(Ie(this),e)},subarray:function(e,t){var n=Ie(this),r=n.length,i=g(e,r);return new(M(n,n[_e]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,y((void 0===t?r:g(t,r))-i))}},Ge=function(e,t){return Ae(this,ye.call(Ie(this),e,t))},We=function(e){Ie(this);var t=Le(arguments[1],1),n=this.length,r=E(e),i=y(r.length),o=0;if(i+t>n)throw H(Te);for(;o<i;)this[t+o]=r[o++]},He={entries:function(){return fe.call(Ie(this))},keys:function(){return ue.call(Ie(this))},values:function(){return ce.call(Ie(this))}},ze=function(e,t){return _(e)&&e[ke]&&"symbol"!=("undefined"==typeof t?"undefined":r(t))&&t in e&&String(+t)==String(t)},Je=function(e,t){return ze(e,t=m(t,!0))?d(2,e[t]):W(e,t)},qe=function(e,t,n){return!(ze(e,t=m(t,!0))&&_(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?G(e,t,n):(e[t]=n.value,e)};Ee||(U.f=Je,V.f=qe),s(s.S+s.F*!Ee,"Object",{getOwnPropertyDescriptor:Je,defineProperty:qe}),a(function(){ge.call({})})&&(ge=me=function(){return he.call(this)});var Ye=h({},Ue);h(Ye,He),p(Ye,be,He.values),h(Ye,{slice:Ge,set:We,constructor:function(){},toString:ge,toLocaleString:Ve}),Ne(Ye,"buffer","b"),Ne(Ye,"byteOffset","o"),Ne(Ye,"byteLength","l"),Ne(Ye,"length","e"),G(Ye,we,{get:function(){return this[ke]}}),e.exports=function(e,t,n,r){r=!!r;var u=e+(r?"Clamped":"")+"Array",f="Uint8Array"!=u,d="get"+e,h="set"+e,v=o[u],g=v||{},m=v&&T(v),b=!v||!c.ABV,w={},E=v&&v[K],k=function(e,n){var r=e._d;return r.v[d](n*t+r.o,Oe)},O=function(e,n,i){var o=e._d;r&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[h](n*t+o.o,i,Oe)},R=function(e,t){G(e,t,{get:function(){return k(this,t)},set:function(e){return O(this,t,e)},enumerable:!0})};b?(v=n(function(e,n,r,i){l(e,v,u,"_d");var o,a,s,c,f=0,d=0;if(_(n)){if(!(n instanceof $||(c=S(n))==q||c==Y))return ke in n?je(v,n):De.call(v,n);o=n,d=Le(r,t);var h=n.byteLength;if(void 0===i){if(h%t)throw H(Te);if(a=h-d,a<0)throw H(Te)}else if(a=y(i)*t,a+d>h)throw H(Te);s=a/t}else s=Pe(n,!0),a=s*t,o=new $(a);for(p(e,"_d",{b:o,o:d,l:a,e:s,v:new Z(o)});f<s;)R(e,f++)}),E=v[K]=C(Ye),p(E,"constructor",v)):N(function(e){new v(null),new v(e)},!0)||(v=n(function(e,n,r,i){l(e,v,u);var o;return _(n)?n instanceof $||(o=S(n))==q||o==Y?void 0!==i?new g(n,Le(r,t),i):void 0!==r?new g(n,Le(r,t)):new g(n):ke in n?je(v,n):De.call(v,n):new g(Pe(n,f))}),ee(m!==Function.prototype?x(g).concat(x(m)):x(g),function(e){e in v||p(v,e,g[e])}),v[K]=E,i||(E.constructor=v));var P=E[be],L=!!P&&("values"==P.name||void 0==P.name),I=He.values;p(v,Se,!0),p(E,ke,u),p(E,Ce,!0),p(E,_e,v),(r?new v(1)[we]==u:we in E)||G(E,we,{get:function(){return u}}),w[u]=v,s(s.G+s.W+s.F*(v!=g),w),s(s.S,u,{BYTES_PER_ELEMENT:t,from:De,of:Fe}),Q in E||p(E,Q,t),s(s.P,u,Ue),D(u),s(s.P+s.F*Re,u,{set:We}),s(s.P+s.F*!L,u,He),s(s.P+s.F*(E.toString!=ge),u,{toString:ge}),s(s.P+s.F*a(function(){new v(1).slice()}),u,{slice:Ge}),s(s.P+s.F*(a(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!a(function(){E.toLocaleString.call([1,2])})),u,{toLocaleString:Ve}),j[u]=L?P:I,i||L||p(E,be,I)}}else e.exports=function(){}},function(e,t,n){"use strict";n(223)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){"use strict";n(223)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";var r=n(8),i=n(21),o=n(12),a=(n(4).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(7)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=i(e),c=o(n);return a?a(r,t,c):s.call(r,t,c)}})},function(e,t,n){"use strict";var r=n(8),i=n(46),o=n(21),a=n(12),s=n(13),c=n(7),u=n(77),f=(n(4).Reflect||{}).construct,l=c(function(){function e(){}return!(f(function(){},[],e)instanceof e)}),d=!c(function(){f(function(){})});r(r.S+r.F*(l||d),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!l)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var c=n.prototype,p=i(s(c)?c:Object.prototype),h=Function.apply.call(e,p,t);return s(h)?h:p}})},function(e,t,n){"use strict";var r=n(11),i=n(8),o=n(12),a=n(16);i(i.S+i.F*n(7)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(8),i=n(51).f,o=n(12);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(8),i=n(12),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(130)(o,"Object",function(){var e,t=this,n=t._k;do if(t._i>=n.length)return{value:void 0,done:!0};while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){"use strict";function r(e,t){var n,s,f=arguments.length<3?e:arguments[2];return u(e)===f?e[t]:(n=i.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(f):void 0:c(s=o(e))?r(s,t,f):void 0}var i=n(51),o=n(59),a=n(5),s=n(8),c=n(13),u=n(12);s(s.S,"Reflect",{get:r})},function(e,t,n){"use strict";var r=n(51),i=n(8),o=n(12);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){"use strict";var r=n(8),i=n(59),o=n(12);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){"use strict";var r=n(8),i=n(12),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Reflect",{ownKeys:n(243)})},function(e,t,n){"use strict";var r=n(50),i=n(43),o=n(12),a=n(4).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var r=n(8),i=n(12),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){"use strict";function r(e,t,n){var c,d,p=arguments.length<4?e:arguments[3],h=o.f(f(e),t);if(!h){if(l(d=a(e)))return r(d,t,n,p);h=u(0)}return s(h,"value")?!(h.writable===!1||!l(p))&&(c=o.f(p,t)||u(0),c.value=n,i.f(p,t,c),!0):void 0!==h.set&&(h.set.call(p,n),!0)}var i=n(11),o=n(51),a=n(59),s=n(5),c=n(8),u=n(17),f=n(12),l=n(13);c(c.S,"Reflect",{set:r})},function(e,t,n){"use strict";var r=n(8),i=n(73);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(8),i=n(36)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(186)("includes")},function(e,t,n){"use strict";var r=n(8),i=n(127)(!0);r(r.P,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(8),i=n(250);r(r.P,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(37),i=n(91),o=n(35);e.exports=function(e,t,n,a){var s=String(o(e)),c=s.length,u=void 0===n?" ":String(n),f=r(t);if(f<=c||""==u)return s;var l=f-c,d=i.call(u,Math.ceil(l/u.length));return d.length>l&&(d=d.slice(0,l)),a?d+s:s+d}},function(e,t,n){"use strict";var r=n(8),i=n(250);r(r.P,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(83)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(83)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var r=n(8),i=n(35),o=n(37),a=n(134),s=n(196),c=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(130)(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in c?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new u(r,t)}})},function(e,t,n){"use strict";n(27)("asyncIterator")},function(e,t,n){"use strict";n(27)("observable")},function(e,t,n){"use strict";var r=n(8),i=n(243),o=n(32),a=n(51),s=n(163);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=o(e),r=a.f,c=i(n),u={},f=0;c.length>f;)s(u,t=c[f++],r(n,t));return u}})},function(e,t,n){"use strict";var r=n(8),i=n(259)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(30),i=n(32),o=n(44).f;e.exports=function(e){return function(t){for(var n,a=i(t),s=r(a),c=s.length,u=0,f=[];c>u;)o.call(a,n=s[u++])&&f.push(e?[n,a[n]]:a[n]);return f}}},function(e,t,n){"use strict";var r=n(8),i=n(259)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(8),i=n(58),o=n(21),a=n(11);n(6)&&r(r.P+n(262),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";e.exports=n(28)||!n(7)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(4)[e]})},function(e,t,n){"use strict";var r=n(8),i=n(58),o=n(21),a=n(11);n(6)&&r(r.P+n(262),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(8),i=n(58),o=n(16),a=n(59),s=n(51).f;n(6)&&r(r.P+n(262),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do if(t=s(n,r))return t.get;while(n=a(n))}})},function(e,t,n){"use strict";var r=n(8),i=n(58),o=n(16),a=n(59),s=n(51).f;n(6)&&r(r.P+n(262),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do if(t=s(n,r))return t.set;while(n=a(n))}})},function(e,t,n){"use strict";var r=n(8);r(r.P+r.R,"Map",{toJSON:n(267)("Map")})},function(e,t,n){"use strict";var r=n(75),i=n(268);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){"use strict";var r=n(206);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){"use strict";var r=n(8);r(r.P+r.R,"Set",{toJSON:n(267)("Set")})},function(e,t,n){"use strict";var r=n(8);r(r.S,"System",{global:n(4)})},function(e,t,n){"use strict";var r=n(8),i=n(34);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{imulh:function(e,t){var n=65535,r=+e,i=+t,o=r&n,a=i&n,s=r>>16,c=i>>16,u=(s*a>>>0)+(o*a>>>16);return s*c+(u>>16)+((o*c>>>0)+(u&n)>>16)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{umulh:function(e,t){var n=65535,r=+e,i=+t,o=r&n,a=i&n,s=r>>>16,c=i>>>16,u=(s*a>>>0)+(o*a>>>16);return s*c+(u>>>16)+((o*c>>>0)+(u&n)>>>16)}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(211),o=n(8),a=n(23)("metadata"),s=a.store||(a.store=new(n(215))),c=function(e,t,n){var r=s.get(e);if(!r){if(!n)return;s.set(e,r=new i)}var o=r.get(t);if(!o){if(!n)return;r.set(t,o=new i)}return o},u=function(e,t,n){var r=c(t,n,!1);return void 0!==r&&r.has(e)},f=function(e,t,n){var r=c(t,n,!1);return void 0===r?void 0:r.get(e)},l=function(e,t,n,r){c(n,r,!0).set(e,t)},d=function(e,t){var n=c(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},p=function(e){return void 0===e||"symbol"==("undefined"==typeof e?"undefined":r(e))?e:String(e)},h=function(e){o(o.S,"Reflect",e)};e.exports={store:s,map:c,has:u,get:f,set:l,keys:d,key:p,exp:h}},function(e,t,n){"use strict";var r=n(277),i=n(12),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var c=s.get(t);return c.delete(n),!!c.size||s.delete(t)}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=n(59),a=r.has,s=r.get,c=r.key,u=function e(t,n,r){var i=a(t,n,r);if(i)return s(t,n,r);var c=o(n);return null!==c?e(t,c,r):void 0};r.exp({getMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:c(arguments[2]))}})},function(e,t,n){"use strict";var r=n(214),i=n(268),o=n(277),a=n(12),s=n(59),c=o.keys,u=o.key,f=function e(t,n){var o=c(t,n),a=s(t);if(null===a)return o;var u=e(a,n);return u.length?o.length?i(new r(o.concat(u))):u:o};o.exp({getMetadataKeys:function(e){return f(a(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=n(59),a=r.has,s=r.key,c=function e(t,n,r){var i=a(t,n,r);if(i)return!0;var s=o(n);return null!==s&&e(t,s,r)};r.exp({hasMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=n(21),a=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?i:o)(n),a(r))}}})},function(e,t,n){"use strict";var r=n(8),i=n(209)(),o=n(4).process,a="process"==n(34)(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";var r=n(8),i=n(4),o=n(9),a=n(209)(),s=n(25)("observable"),c=n(21),u=n(12),f=n(205),l=n(210),d=n(10),p=n(206),h=p.RETURN,v=function(e){return null==e?void 0:c(e)},y=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},m=function(e){g(e)||(e._o=void 0,y(e))},b=function(e,t){u(e),this._c=void 0,this._o=e,e=new w(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:c(n),this._c=n)}catch(t){return void e.error(t)}g(this)&&y(this)};b.prototype=l({},{unsubscribe:function(){m(this)}});var w=function(e){this._s=e};w.prototype=l({},{next:function(e){var t=this._s;if(!g(t)){var n=t._o;try{var r=v(n.next);if(r)return r.call(n,e)}catch(e){try{m(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var n=t._o;t._o=void 0;try{var r=v(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{y(t)}finally{throw e}}return y(t),e},complete:function(e){var t=this._s;if(!g(t)){var n=t._o;t._o=void 0;try{var r=v(n.complete);e=r?r.call(n,e):void 0}catch(e){try{y(t)}finally{throw e}}return y(t),e}}});var S=function(e){f(this,S,"Observable","_f")._f=c(e)};l(S.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)(function(n,r){c(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n})})}}),l(S,{from:function(e){var t="function"==typeof this?this:S,n=v(u(e)[s]);if(n){var r=u(n.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var n=!1;return a(function(){if(!n){try{if(p(e,!1,function(e){if(t.next(e),n)return h})===h)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:S)(function(e){var t=!1;return a(function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}}),function(){t=!0}})}}),d(S.prototype,s,function(){return this}),r(r.G,{Observable:S}),n(192)("Observable")},function(e,t,n){"use strict";var r=n(4),i=n(8),o=n(78),a=n(289),s=r.navigator,c=!!s&&/MSIE .\./.test(s.userAgent),u=function(e){return c?function(t,n){return e(o(a,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};i(i.G+i.B+i.F*c,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){"use strict";var r=n(290),i=n(78),o=n(21);e.exports=function(){for(var e=o(this),t=arguments.length,n=Array(t),a=0,s=r._,c=!1;t>a;)(n[a]=arguments[a++])===s&&(c=!0);return function(){var r,o=this,a=arguments.length,u=0,f=0;if(!c&&!a)return i(e,n,o);if(r=n.slice(),c)for(;t>u;u++)r[u]===s&&(r[u]=arguments[f++]);for(;a>f;)r.push(arguments[f++]);return i(e,r,o)}}},function(e,t,n){"use strict";e.exports=n(4)},function(e,t,n){"use strict";var r=n(8),i=n(208);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){"use strict";for(var r=n(193),i=n(18),o=n(4),a=n(10),s=n(129),c=n(25),u=c("iterator"),f=c("toStringTag"),l=s.Array,d=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],p=0;p<5;p++){var h,v=d[p],y=o[v],g=y&&y.prototype;if(g){g[u]||a(g,u,l),g[f]||a(g,f,v),s[v]=l;for(h in r)g[h]||i(g,h,r[h],!0)}}},function(e,t,n){(function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function i(e,t,n,r){var i=t&&t.prototype instanceof a?t:a,o=Object.create(i.prototype),s=new h(r||[]);return o._invoke=l(e,n,s),o}function o(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function a(){}function s(){}function c(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function f(e){function t(n,i,a,s){var c=o(e[n],e,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"===("undefined"==typeof f?"undefined":r(f))&&b.call(f,"__await")?Promise.resolve(f.__await).then(function(e){t("next",e,a,s)},function(e){t("throw",e,a,s)}):Promise.resolve(f).then(function(e){u.value=e,a(u)},s)}s(c.arg)}function i(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return a=a?a.then(r,r):r()}"object"===("undefined"==typeof n?"undefined":r(n))&&n.domain&&(t=n.domain.bind(t));var a;this._invoke=i}function l(e,t,n){var r=C;return function(i,a){if(r===x)throw new Error("Generator is already running");if(r===O){if("throw"===i)throw a;return y()}for(;;){var s=n.delegate;if(s){if("return"===i||"throw"===i&&s.iterator[i]===g){n.delegate=null;var c=s.iterator.return;if(c){var u=o(c,s.iterator,a);if("throw"===u.type){i="throw",a=u.arg;continue}}if("return"===i)continue}var u=o(s.iterator[i],s.iterator,a);if("throw"===u.type){n.delegate=null,i="throw",a=u.arg;continue}i="next",a=g;var f=u.arg;if(!f.done)return r=T,f;n[s.resultName]=f.value,n.next=s.nextLoc,n.delegate=null}if("next"===i)n.sent=n._sent=a;else if("throw"===i){if(r===C)throw r=O,a;n.dispatchException(a)&&(i="next",a=g)}else"return"===i&&n.abrupt("return",a);r=x;var u=o(e,t,n);if("normal"===u.type){r=n.done?O:T;var f={value:u.arg,done:n.done};if(u.arg!==R)return f;n.delegate&&"next"===i&&(a=g)}else"throw"===u.type&&(r=O,i="throw",a=u.arg)}}}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function v(e){if(e){var t=e[S];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(b.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return r.next=r}}return{next:y}}function y(){return{value:g,done:!0}}var g,m=Object.prototype,b=m.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},S=w.iterator||"@@iterator",_=w.toStringTag||"@@toStringTag",E="object"===r(t),k=e.regeneratorRuntime;if(k)return void(E&&(t.exports=k));k=e.regeneratorRuntime=E?t.exports:{},k.wrap=i;var C="suspendedStart",T="suspendedYield",x="executing",O="completed",R={},P={};P[S]=function(){return this};var L=Object.getPrototypeOf,I=L&&L(L(v([])));I&&I!==m&&b.call(I,S)&&(P=I);var M=c.prototype=a.prototype=Object.create(P);s.prototype=M.constructor=c,c.constructor=s,c[_]=s.displayName="GeneratorFunction",k.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},k.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,_ in e||(e[_]="GeneratorFunction")),e.prototype=Object.create(M),e},k.awrap=function(e){return{__await:e}},u(f.prototype),k.AsyncIterator=f,k.async=function(e,t,n,r){var o=new f(i(e,t,n,r));return k.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},u(M),M[_]="Generator",M.toString=function(){return"[object Generator]"},k.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},k.values=v,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),s=b.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),R},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),R}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},R}}}("object"===("undefined"==typeof e?"undefined":r(e))?e:"object"===("undefined"==typeof window?"undefined":r(window))?window:"object"===("undefined"==typeof self?"undefined":r(self))?self:void 0)}).call(t,function(){return this}(),n(294)(e),n(295))},function(e,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){v&&p&&(v=!1,p.length?h=p.concat(h):y=-1,h.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=h.length;t;){for(p=h,h=[];++y<t;)p&&p[y].run();y=-1,t=h.length}p=null,v=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var f,l,d=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var p,h=[],v=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new c(e,t)),1!==h.length||v||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";n(297),e.exports=n(9).RegExp.escape},function(e,t,n){"use strict";var r=n(8),i=n(298)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){"use strict";e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){"use strict";!function(){var t=n(300).log,r=n(300).browserDetails;e.exports.browserDetails=r,e.exports.extractVersion=n(300).extractVersion,e.exports.disableLog=n(300).disableLog;var i=n(301)||null,o=n(303)||null,a=n(306)||null,s=n(308)||null;switch(r.browser){case"opera":case"chrome":if(!i||!i.shimPeerConnection)return void t("Chrome shim is not included in this adapter release.");t("adapter.js shimming chrome."),e.exports.browserShim=i,i.shimGetUserMedia(),i.shimMediaStream(),i.shimSourceObject(),i.shimPeerConnection(),i.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void t("Firefox shim is not included in this adapter release.");t("adapter.js shimming firefox."),e.exports.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void t("MS edge shim is not included in this adapter release.");t("adapter.js shimming edge."),e.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!s)return void t("Safari shim is not included in this adapter release.");t("adapter.js shimming safari."),e.exports.browserShim=s,s.shimGetUserMedia();break;default:t("Unsupported browser!")}}()},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=!0,i={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+("undefined"==typeof e?"undefined":n(e))+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"===("undefined"==typeof window?"undefined":n(window))){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return e}};e.exports={log:i.log,disableLog:i.disableLog,browserDetails:i.detectBrowser(),extractVersion:i.extractVersion}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(300).log,o=n(300).browserDetails,a={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!==("undefined"==typeof window?"undefined":r(window))||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===("undefined"==typeof window?"undefined":r(window))&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{
get:function(){return this._srcObject},set:function(e){var t=this;return this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),void e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):void(this.src="")}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){i("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),o=n.getStats.bind(n);return n.getStats=function(e,t,n){var i=this,a=arguments;if(arguments.length>0&&"function"==typeof e)return o(e,t);var s=function(e){var t={},n=e.result();return n.forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},c=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};if(arguments.length>=2){var u=function(e){a[1](c(s(e)))};return o.apply(this,[u,arguments[0]])}return new Promise(function(t,n){1===a.length&&"object"===("undefined"==typeof e?"undefined":r(e))?o.apply(i,[function(e){t(c(s(e)))},n]):o.apply(i,[function(e){t(c(s(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===r(arguments[0])){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),o.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,r=new Promise(function(r,i){t.apply(n,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};e.exports={shimMediaStream:a.shimMediaStream,shimOnTrack:a.shimOnTrack,shimSourceObject:a.shimSourceObject,shimPeerConnection:a.shimPeerConnection,shimGetUserMedia:n(302)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(300).log;e.exports=function(){var e=function(e){if("object"!==("undefined"==typeof e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var a={};"number"==typeof i.ideal?(a[o("min",n)]=i.ideal,t.optional.push(a),a={},a[o("max",n)]=i.ideal,t.optional.push(a)):(a[o("",n)]=i.ideal,t.optional.push(a))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if(t=JSON.parse(JSON.stringify(t)),t&&t.audio&&(t.audio=e(t.audio)),t&&"object"===r(t.video)){var o=t.video.facingMode;if(o=o&&("object"===("undefined"==typeof o?"undefined":r(o))?o:{ideal:o}),o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===o.exact||"environment"===o.ideal))return navigator.mediaDevices.enumerateDevices().then(function(r){r=r.filter(function(e){return"videoinput"===e.kind});var a=r.find(function(e){return e.label.toLowerCase().indexOf("back")!==-1})||r.length&&r[r.length-1];return a&&(t.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),t.video=e(t.video),i("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return i("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},o=function(e,r,i){t(e,function(e){navigator.webkitGetUserMedia(e,r,function(e){i(n(e))})})};navigator.getUserMedia=o;var a=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:a,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var s=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return s(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return a(e)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){i("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){i("Dummy mediaDevices.removeEventListener called.")})}},function(e,t,n){"use strict";var r=n(304),i=n(300).browserDetails,o={shimPeerConnection:function(){if(window.RTCIceGatherer){window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e});var e=Object.getOwnPropertyDescriptor(MediaStreamTrack.prototype,"enabled");Object.defineProperty(MediaStreamTrack.prototype,"enabled",{set:function(t){e.set.call(this,t);var n=new Event("enabled");n.enabled=t,this.dispatchEvent(n)}})}window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var r=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=r.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),t=t.filter(function(e){return 0===e.indexOf("turn:")&&e.indexOf("transport=udp")!==-1&&e.indexOf("turn:[")===-1||0===e.indexOf("stun:")&&i.version>=14393})[0],!!t}return!1})}this._config=e,this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){var r=!n.candidate||0===Object.keys(n.candidate).length;if(r)for(var i=1;i<t.length;i++)t[i].indexOf("\r\na=end-of-candidates\r\n")===-1&&(t[i]+="a=end-of-candidates\r\n");else n.candidate.candidate.indexOf("typ endOfCandidates")===-1&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){var o=e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});o&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.getConfiguration=function(){return this._config},window.RTCPeerConnection.prototype.addStream=function(e){var t=e.clone();e.getTracks().forEach(function(e,n){var r=t.getTracks()[n];e.addEventListener("enabled",function(e){r.enabled=e.enabled})}),this.localStreams.push(t),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate){i.numChannels=Math.min(e.numChannels,i.numChannels),n.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter(function(t){for(var n=0;n<e.rtcpFeedback.length;n++)if(e.rtcpFeedback[n].type===t.type&&e.rtcpFeedback[n].parameter===t.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,i=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(a){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:t};var c=a.candidate,u=!c||0===Object.keys(c).length;u?(void 0===i.state&&(i.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,s.candidate.candidate=r.writeCandidate(c));var f=r.splitSections(n.localDescription.sdp);s.candidate.candidate.indexOf("typ endOfCandidates")===-1?f[s.candidate.sdpMLineIndex+1]+="a="+s.candidate.candidate+"\r\n":f[s.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=f.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(s),u&&l&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(s),null!==n.onicecandidate&&n.onicecandidate(s),l&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete");break;case"complete":}},o.onicestatechange=function(){n._updateConnectionState()};var a=new RTCDtlsTransport(o);return a.ondtlsstatechange=function(){n._updateConnectionState()},a.onerror=function(){a.state="failed",n._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var i=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&("video"===e.kind&&e.recvEncodingParameters&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,i=this;if("offer"===e.type)this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=r.splitSections(i.remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],s=a.iceGatherer,c=a.iceTransport,u=a.dtlsTransport,f=a.localCapabilities,l=a.remoteCapabilities,d="0"===e.split("\n",1)[0].split(" ",2)[1];if(!d&&!a.isDatachannel){var p=r.getIceParameters(e,n);if(o){var h=r.matchPrefix(e,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});h.length&&c.setRemoteCandidates(h)}var v=r.getDtlsParameters(e,n);o&&(v.role="server"),i.usingBundle&&0!==t||(c.start(s,p,o?"controlling":"controlled"),u.start(v));var y=i._getCommonCapabilities(f,l);i._transceive(a,y.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var a=arguments.length>1&&"function"==typeof arguments[1];if(a){var s=arguments[1];window.setTimeout(function(){s(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){a||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,i=[],o=r.splitSections(e.sdp),a=o.shift(),s=r.matchPrefix(a,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(a,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var u=r.splitLines(o),f=u[0].substr(2).split(" "),l=f[0],d="0"===f[1],p=r.getDirection(o,a),h=r.matchPrefix(o,"a=mid:");if(h=h.length?h[0].substr(6):r.generateIdentifier(),"application"===l&&"DTLS/SCTP"===f[2])return void(t.transceivers[c]={mid:h,isDatachannel:!0});var v,y,g,m,b,w,S,_,E,k,C,T,x=r.parseRtpParameters(o);d||(C=r.getIceParameters(o,a),T=r.getDtlsParameters(o,a),T.role="client"),_=r.parseRtpEncodingParameters(o);var O,R=r.matchPrefix(o,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];R&&(O=R.value);var P=r.matchPrefix(o,"a=end-of-candidates",a).length>0,L=r.matchPrefix(o,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||d)"answer"!==e.type||d||(v=t.transceivers[c],y=v.iceGatherer,g=v.iceTransport,m=v.dtlsTransport,b=v.rtpSender,w=v.rtpReceiver,S=v.sendEncodingParameters,E=v.localCapabilities,t.transceivers[c].recvEncodingParameters=_,t.transceivers[c].remoteCapabilities=x,t.transceivers[c].cname=O,(s||P)&&L.length&&g.setRemoteCandidates(L),t.usingBundle&&0!==c||(g.start(y,C,"controlling"),m.start(T)),t._transceive(v,"sendrecv"===p||"recvonly"===p,"sendrecv"===p||"sendonly"===p),!w||"sendrecv"!==p&&"sendonly"!==p?delete v.rtpReceiver:(k=w.track,i.push([k,w]),n.addTrack(k)));else{var I=t.usingBundle&&c>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(h,c);if(P&&I.iceTransport.setRemoteCandidates(L),E=RTCRtpReceiver.getCapabilities(l),E.codecs=E.codecs.filter(function(e){return"rtx"!==e.name}),S=[{ssrc:1001*(2*c+2)}],w=new RTCRtpReceiver(I.dtlsTransport,l),k=w.track,i.push([k,w]),n.addTrack(k),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=c){var M;"audio"===l?M=t.localStreams[0].getAudioTracks()[0]:"video"===l&&(M=t.localStreams[0].getVideoTracks()[0]),M&&(b=new RTCRtpSender(M,I.dtlsTransport))}t.transceivers[c]={iceGatherer:I.iceGatherer,iceTransport:I.iceTransport,dtlsTransport:I.dtlsTransport,localCapabilities:E,remoteCapabilities:x,rtpSender:b,rtpReceiver:w,kind:l,mid:h,cname:O,sendEncodingParameters:S,recvEncodingParameters:_},t._transceive(t.transceivers[c],!1,"sendrecv"===p||"sendonly"===p)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(r){var i=r[0],o=r[1],a=new Event("track");a.track=i,a.receiver=o,a.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n.new>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(i=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(o=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?i>0:o>0}),"audio"===e.kind?i--:"video"===e.kind&&o--});i>0||o>0;)i>0&&(n.push({kind:"audio",wantReceive:!0}),i--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var a=r.writeSessionBoilerplate(),s=[];n.forEach(function(t,n){var i=t.track,o=t.kind,a=r.generateIdentifier(),c=e.usingBundle&&n>0?{iceGatherer:s[0].iceGatherer,iceTransport:s[0].iceTransport,dtlsTransport:s[0].dtlsTransport}:e._createIceAndDtlsTransports(a,n),u=RTCRtpSender.getCapabilities(o);u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name}),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1")});var f,l,d=[{ssrc:1001*(2*n+1)}];i&&(f=new RTCRtpSender(i,c.dtlsTransport)),t.wantReceive&&(l=new RTCRtpReceiver(c.dtlsTransport,o)),s[n]={iceGatherer:c.iceGatherer,iceTransport:c.iceTransport,dtlsTransport:c.dtlsTransport,localCapabilities:u,remoteCapabilities:null,rtpSender:f,rtpReceiver:l,kind:o,mid:a,sendEncodingParameters:d,recvEncodingParameters:null}}),this.usingBundle&&(a+="a=group:BUNDLE "+s.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(t,n){var i=s[n];a+=r.writeMediaSection(i,i.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=s;var c=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){if(n.isDatachannel)return void(t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+n.mid+"\r\n");var i=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,i,"answer",e.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(e){var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var i=this.transceivers[t];if(i){var o=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var a=r.splitSections(this.remoteDescription.sdp);a[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}else this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r.set(t,e[t]),r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}}};e.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:n(305)}},function(e,t){"use strict";var n={};n.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},n.splitSections=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},n.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},n.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},n.getDtlsParameters=function(e,t){var r=n.splitLines(e);r=r.concat(n.splitLines(t));var i=r.filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14),o={role:"auto",fingerprints:[{algorithm:i.split(" ")[0],value:i.split(" ")[1]}]};return o},n.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},n.getIceParameters=function(e,t){var r=n.splitLines(e);r=r.concat(n.splitLines(t));var i={usernameFragment:r.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return i},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e),i=r[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=n.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=n.parseRtpMap(s),u=n.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=u.length?n.parseFmtp(u[0]):{},c.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(n.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){r+=n.writeExtmap(e)}),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};r.push(n),o&&(n=JSON.parse(JSON.stringify(n)),n.fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},r.push(n))}}),0===r.length&&c&&r.push({ssrc:c});var f=n.matchPrefix(e,"b=");return f.length&&(0===f[0].indexOf("b=TIAS:")?f=parseInt(f[0].substr(7),10):0===f[0].indexOf("b=AS:")&&(f=parseInt(f[0].substr(5),10)),r.forEach(function(e){e.maxBitrate=f})),r},n.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,i){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return t?n.getDirection(t):"sendrecv"},e.exports=n},function(e,t){"use strict";e.exports=function(){var e=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(n){return t(n).catch(function(t){return Promise.reject(e(t))})}}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(300).browserDetails,o={shimOnTrack:function(){"object"!==("undefined"==typeof window?"undefined":r(window))||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){
this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===("undefined"==typeof window?"undefined":r(window))&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"===("undefined"==typeof window?"undefined":r(window))&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(i.version<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var o=e.iceServers[r];if(o.hasOwnProperty("urls"))for(var a=0;a<o.urls.length;a++){var s={url:o.urls[a]};0===o.urls[a].indexOf("turn")&&(s.username=o.username,s.credential=o.credential),n.push(s)}else n.push(e.iceServers[r])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;if(RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())},i.version<48){var t=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,r,i){return n.apply(this,[e||null]).then(function(e){return t(e)}).then(r,i)}}}}};e.exports={shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:n(307)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(300).log,o=n(300).browserDetails;e.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,a){var s=function(e){if("object"!==("undefined"==typeof e?"undefined":r(e))||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=e[n]="object"===r(e[n])?e[n]:{ideal:e[n]};if(void 0===i.min&&void 0===i.max&&void 0===i.exact||t.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:e[n]=i.exact,delete i.exact),void 0!==i.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof i.ideal?o[n]={min:i.ideal,max:i.ideal}:o[n]=i.ideal,e.advanced.push(o),delete i.ideal,Object.keys(i).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),o.version<38&&(i("spec: "+JSON.stringify(t)),t.audio&&(t.audio=s(t.audio)),t.video&&(t.video=s(t.video)),i("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){a(e(t))})},n=function(e){return new Promise(function(n,r){t(e,n,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:n,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){var t=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];e(t)})},o.version<41){var a=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return a().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(o.version<49){var s=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return s(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return e},function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,r){return o.version<44?t(e,n,r):(console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),void navigator.mediaDevices.getUserMedia(e).then(n,r))}}},function(e,t){"use strict";var n={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};e.exports={shimGetUserMedia:n.shimGetUserMedia}},function(e,t,n){"use strict";var r=n(310),i=Object.assign({},r);i.setLogLevel(i.LogLevels.INFO);var o=n(311).Devices,a=n(323),s=n(324),c=n(336),u=n(334),f=n(355);i.getCameraDevices=o.getCameras,i.getAudioInputDevices=o.getMics,i.getAudioOutputDevices=o.getSpeakers,i.detect=a.all,i.createStream=function(e){return new Promise(function(t,n){var r=new s(e);r.on("accepted",function(){t(r)}).on("error",function(e){n(e)}).init()})},i.createSession=function(e,t){return new Promise(function(n,r){var i=void 0;i=t?new c(e,t):new c(e),i.on("connected",function(){n(i)}).on("error",function(e){r(e)}),i.connect()})},i.setRelay=function(e,t){u.sender.enableIceFilter=e,u.receiver.enableIceFilter=t},i.getCurrentConfig=function(){return JSON.parse(JSON.stringify(u))},i.setPlayer=function(e){u.player=e},i.setVideoCodec=function(e){u.codec.video=e},i.setAudioCodec=function(e){u.codec.audio=e},i.STREAM_TYPE=s.TYPE,i.getVersion=function(){return"0.5.2"},i.STRATEGY=f,i.SESSION_STATE={DISCONNECTED:0,CONNECTING:1,CONNECTED:2},e.exports=i},function(e,t){"use strict";var n=!!navigator.mozGetUserMedia,r={2:"%c [ VERBOSE ] ",3:"%c [ DEBUG ] ",4:"%c [ INFO ] ",5:"%c [ WARN ] ",6:"%c [ ERROR ] ",7:"%c [ ASSERT ] "},i={2:"color: #9abff9",3:"color: #5c95f2",4:"color: #1a66e0;font-weight:bold;",5:"color: #aaaf0c;font-weight:bold;",6:"color: #ff4314;font-weight:bold;",7:"color: #a52b2b;font-weight:bold;"},o={log:function(e,t){if(e>=o.logLevel){var a=r[e]+t.join(" ");2==e?console.log(a,i[e]):3==e||4==e?n?console.error(a,i[e]):console.trace(a,i[e]):console.error(a,i[e])}},V:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.VERBOSE,t)},D:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.DEBUG,t)},I:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.INFO,t)},W:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.WARN,t)},E:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.ERROR,t)},A:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.ASSERT,t)},setLogLevel:function(e){return o.logLevel=e},LogLevels:{VERBOSE:2,DEBUG:3,INFO:4,WARN:5,ERROR:6,ASSERT:7}};o.logLevel=o.LogLevels.VERBOSE,e.exports=o},function(e,t,n){"use strict";e.exports={LocalStreamWrapper:n(312),RemoteStreamWrapper:n(316),Connector:n(317),Devices:n(318),Player:n(319),Peer:n(321),Utils:n(320)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c={_initAudioConstraint:function(e,t){t?s.get(e)._audioConstraints={deviceId:{exact:t}}:s.get(e)._audioConstraints=!0},_initVideoConstraint:function(e,t,n,r){s.get(e)._videoConstraints={width:{ideal:t.width},height:{ideal:t.height},frameRate:{ideal:n}},r&&(s.get(e)._videoConstraints.deviceId={exact:r})}},u=n(313),f=n(314),l=n(315),d=!!navigator.mozGetUserMedia,p=!!navigator.webkitGetUserMedia,h=function(e){function t(e){var n=e.type,o=e.fps,a=e.size,u=e.videoSource,f=e.audioSource,l=e.extensionId,d=e.htmlElement;r(this,t);var p=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));switch(s.set(p,{}),s.get(p)._type=null,s.get(p)._audioConstraints=null,s.get(p)._videoConstraints=null,s.get(p)._extensionId=null,s.get(p)._htmlElement=null,n){case t.Type.AUDIO:c._initAudioConstraint(p,f);break;case t.Type.VIDEO:c._initVideoConstraint(p,a,o,u);break;case t.Type.AV:c._initAudioConstraint(p,f),c._initVideoConstraint(p,a,o,u);break;case t.Type.SCREEN:s.get(p)._extensionId=l;break;case t.Type.HTML_ELEMENT:s.get(p)._htmlElement=d;break;case t.Type.FILE:RTCat.W("the file type is not supported in this version");break;default:n=t.Type.AV,c._initAudioConstraint(p,f),c._initVideoConstraint(p,a,o,u)}return s.get(p)._type=n,p}return o(t,e),a(t,[{key:"init",value:function(){var e=s.get(this)._type,n=s.get(this)._audioConstraints,r=s.get(this)._videoConstraints,i=s.get(this)._htmlElement,o=s.get(this)._extensionId,a=this,c=function(e,t){return{audio:!1,video:{mandatory:{chromeMediaSource:e,chromeMediaSourceId:t,maxWidth:window.screen.width,maxHeight:window.screen.height}}}},f=function(e){return new Promise(function(t){navigator.mediaDevices.getUserMedia(e).then(function(e){a.setter(e),t()}).catch(a.onerror)})},h=function(){return new Promise(function(e){/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(location.hostname)?a.onerror(l.localstreamwrapper_screensharing_host_invaild):chrome.runtime.sendMessage(o,{isInstalled:!0},function(t){if(t)if(d){var n={video:{mozMediaSource:"screen",mediaSource:"screen"}};f(n).then(function(){return e()})}else chrome.runtime.sendMessage(o,{getStream:!0},function(t){if(t){var n=c("desktop",t.streamId);f(n).then(function(){return e()})}});else a.onerror(l.localstreamwrapper_screensharing_extension_not_install)})})};return u(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:o.t0=e,o.next=o.t0===t.Type.AUDIO?3:o.t0===t.Type.VIDEO?6:o.t0===t.Type.AV?9:o.t0===t.Type.SCREEN?12:o.t0===t.Type.HTML_ELEMENT?15:o.t0===t.Type.FILE?17:18;break;case 3:return o.next=5,f({audio:n});case 5:return o.abrupt("break",19);case 6:return o.next=8,f({video:r});case 8:return o.abrupt("break",19);case 9:return o.next=11,f({audio:n,video:r});case 11:return o.abrupt("break",19);case 12:return o.next=14,h();case 14:return o.abrupt("break",19);case 15:return i.captureStream?a.setter(i.captureStream(15)):i.mozCaptureStream?a.setter(i.mozCaptureStream(15)):p?a.onerror(l.localstreamwrapper_capturestream_should_enable_flag):a.onerror(l.localstreamwrapper_capturestream_not_supported_yet),o.abrupt("break",19);case 17:return o.abrupt("break",19);case 18:return o.abrupt("break",19);case 19:return o.abrupt("return",a);case 20:case"end":return o.stop()}},o,this)}))}}]),t}(f);h.Type={AUDIO:1,VIDEO:2,AV:3,SCREEN:4,HTML_ELEMENT:5,FILE:6},e.exports=h},function(e,t){"use strict";function n(e){var t=this,n=l.call(arguments,1);return new Promise(function(i,o){function a(t){var n;try{n=e.next(t)}catch(e){return o(e)}u(n)}function c(t){var n;try{n=e.throw(t)}catch(e){return o(e)}u(n)}function u(e){if(e.done)return i(e.value);var n=r.call(t,e.value);return n&&s(n)?n.then(a,c):c(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(e.value)+'"'))}return"function"==typeof e&&(e=e.apply(t,n)),e&&"function"==typeof e.next?void a():i(e)})}function r(e){return e?s(e)?e:u(e)||c(e)?n.call(this,e):"function"==typeof e?i.call(this,e):Array.isArray(e)?o.call(this,e):f(e)?a.call(this,e):e:e}function i(e){var t=this;return new Promise(function(n,r){e.call(t,function(e,t){return e?r(e):(arguments.length>2&&(t=l.call(arguments,1)),void n(t))})})}function o(e){return Promise.all(e.map(r,this))}function a(e){function t(e,t){n[t]=void 0,o.push(e.then(function(e){n[t]=e}))}for(var n=new e.constructor,i=Object.keys(e),o=[],a=0;a<i.length;a++){var c=i[a],u=r.call(this,e[c]);u&&s(u)?t(u,c):n[c]=e[c]}return Promise.all(o).then(function(){return n})}function s(e){return"function"==typeof e.then}function c(e){return"function"==typeof e.next&&"function"==typeof e.throw}function u(e){var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||c(t.prototype))}function f(e){return Object==e.constructor}var l=Array.prototype.slice;e.exports=n.default=n.co=n,n.wrap=function(e){function t(){return n.call(this,e.apply(this,arguments))}return t.__generatorFunction__=e,t}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(n(313),function(){function e(t){r(this,e),this.videoTrack=null,this.audioTrack=null,this.mediaStream=null,t&&this.setter(t),this.onaudioend=function(){RTCat.D("stream audio over")},this.onvideoend=function(){RTCat.D("stream video over")},this.onerror=function(e){RTCat.E(e)}}return i(e,[{key:"setter",value:function(e){var t=this;this.mediaStream=e,this.videoTrack=e.getVideoTracks()&&e.getVideoTracks()[0],this.audioTrack=e.getAudioTracks()&&e.getAudioTracks()[0],this.videoTrack&&(this.videoTrack.onended=function(){t.onvideoend()}),this.audioTrack&&(this.audioTrack.onended=function(){t.onaudioend()})}},{key:"stop",value:function(){this.mediaStream.stop?this.mediaStream.stop():(this.stopVideo(),this.stopAudio())}},{key:"stopVideo",value:function(){this.videoTrack&&(this.videoTrack.stop(),this.mediaStream.removeTrack(this.videoTrack))}},{key:"stopAudio",value:function(){this.audioTrack&&(this.audioTrack.stop(),this.mediaStream.removeTrack(this.audioTrack))}},{key:"clone",value:function(){var t=new MediaStream;return this.videoTrack&&t.addTrack(this.videoTrack.clone()),this.audioTrack&&t.addTrack(this.audioTrack.clone()),new e(t)}},{key:"setVideoEnabled",value:function(e){this.videoTrack&&(this.videoTrack.enabled=e)}},{key:"setAudioEnabled",value:function(e){this.audioTrack&&(this.audioTrack.enabled=e)}},{key:"isVideoEnabled",value:function(){return this.videoTrack&&this.videoTrack.enabled}},{key:"isAudioEnabled",value:function(){return this.audioTrack&&this.audioTrack.enabled}}]),e}());e.exports=o},function(e,t){"use strict";var n={localstreamwrapper_screensharing_host_invaild:new Error("use domain for screensharing , not ip address."),localstreamwrapper_screensharing_extension_not_install:new Error("the screensharing extension is not installed or enabled."),localstreamwrapper_capturestream_not_supported_yet:new Error("the browser not support this feature now"),localstreamwrapper_capturestream_should_enable_flag:new Error("chrome should enable this flag(chrome://flags/#enable-experimental-web-platform-features) for this feature")};e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(314),s=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),t}(a);e.exports=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rtcat-protocol";n(this,e),this.url=t,this.tag="Connector : "+this.url,this.protocol=i,this.socket=null,this.state=e.CLOSED,this.onmessage=function(e){return RTCat.D(r.tag,"<onmessage>",e)},this.onclose=function(e){return RTCat.I(r.tag,"<onclose>")},this.onopen=function(e){return RTCat.I(r.tag,"<onopen>")},this.onerror=function(e){return RTCat.E(r.tag,"<onerror>",e)}}return i(e,[{key:"connect",value:function(){var t=this;this.socket=new WebSocket(this.url,this.protocol),this.state=e.CONNECTING,this.socket.onopen=function(){t.state=e.OPEN,t.onopen()},this.socket.onmessage=function(e){var n=void 0;try{n=JSON.parse(e.data)}catch(e){RTCat.W(t.tag,"<socket-onmessage>","json parse error",e)}n&&t.onmessage(n)},this.socket.onclose=function(){t.close(),t.onclose(),t.state=e.CLOSED},this.socket.onerror=function(e){t.onerror(e)}}},{key:"sendJSONWithHandler",value:function(e,t){if("object"==("undefined"==typeof e?"undefined":r(e))){var n=JSON.stringify(e);t&&"function"==typeof t&&(n=t(n)),this.sendStr(n)}else RTCat.W(this.tag,"<sendJSONWithHandler>",("undefined"==typeof e?"undefined":r(e))+" is not supported by the function")}},{key:"sendStr",value:function(e){this.socket&&1==this.socket.readyState?(RTCat.D(this.tag,"<sendStr>",e),this.socket.send(e)):RTCat.W(this.tag,"<sendStr>","pls use connector when it is open")}},{key:"close",value:function(){this.state=e.CLOSING,this.socket&&(1==this.socket.readyState&&this.socket.close(),this.socket=null)}}]),e}();o.CONNECTING=0,o.OPEN=1,o.CLOSING=2,o.CLOSED=3,e.exports=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=[],r=0,i=!0,o=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if(u.kind==e||"all"==e){var f={};""===u.label?(r++,"videoinput"==u.kind?f.label="Camera-"+r:"audioinput"==u.kind?f.label="Mic-"+r:"audiooutput"==u.kind?f.label="Speaker-"+r:(r--,f.label="unknown device")):f.label=u.label,f.groupId=u.groupId,f.deviceId=u.deviceId,f.kind=u.kind,n.push(f)}}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return n}function i(e,t){return t?void navigator.mediaDevices.enumerateDevices().then(function(n){t(null,r(e,n))}).catch(function(e){t(e,null)}):new Promise(function(t,n){navigator.mediaDevices.enumerateDevices().then(function(n){t(r(e,n))}).catch(function(e){n(e)})})}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"getCameras",value:function(e){return i("videoinput",e)}},{key:"getMics",value:function(e){return i("audioinput",e)}},{key:"getSpeakers",value:function(e){return i("audiooutput",e)}},{key:"getDevices",value:function(e){return i("all",e)}},{key:"scanCamera",value:function(){var e=[[3840,2160],[1920,1080],[1600,1200],[1280,720],[800,600],[640,480],[640,360],[352,288],[320,240],[176,144],[160,120]],t=0,n=[],r=function r(i){var o=e[t++],a=void 0;setTimeout(function(){e[t]?navigator.mediaDevices.getUserMedia({video:{width:{exact:o[0]},height:{exact:o[1]}}}).then(function(e){n.push(o);e.getVideoTracks()[0].stop(),r(i)}).catch(function(e){RTCat.I("resolution "+o[0]+"x"+o[1]+" is not supported "),r(i)}):i(n)},a?200:0)};return new Promise(function(e){r(e)})}}]),e}();e.exports=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(320),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments[2];r(this,e),this.id=o.uuid(),this.tag="Player : "+this.id,this.element=document.createElement("video"),this.element.muted=n&&(this.element.volume=0),i&&this.setSize(i);var a=void 0;(a=document.querySelector(t))||(a=document.body,RTCat.W(this.tag,"constructor","unknown parent element,use body")),a.appendChild(this.element)}return i(e,[{key:"play",value:function(e){this.element&&e&&(this.element.setAttribute("autoplay","autoplay"),this.element.pause(),this.element.src=URL.createObjectURL(e),this.element.play())}},{key:"stop",value:function(){this.element&&(this.element.remove(),delete this.element)}},{key:"poster",value:function(e){this.element&&this.element.setAttribute("poster",e)}},{key:"setSize",value:function(e){var t=e.width,n=e.height;this.element&&(this.element.setAttribute("width",t),this.element.setAttribute("height",n))}},{key:"audioOutput",value:function(e){this.element.setSinkId(e)}},{key:"mute",value:function(e){this.element.muted=!!e}},{key:"load",value:function(e){e.source=this.element}}]),e}();e.exports=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"uuid",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}}]),e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(320),a=n(322),s=n(316),c=function(){function e(t){var n=this,i=t.peerConfig,a=void 0===i?{}:i,c=t.id,u=void 0===c?o.uuid():c,f=t.offerConstraint,l=void 0===f?{offerToReceiveAudio:1,offerToReceiveVideo:1}:f,d=t.isNegoIce,p=void 0!==d&&d;r(this,e),this.setId(u),this.isNegoIce=p,this.negoIce=!1,this.sIceQueue=[],this.rIceQueue=[],this.onerror=function(e){RTCat.E(n.tag,"<onerror>")},this.onstream=function(e){RTCat.I(n.tag,"<onstream>")},this.onice=function(e){RTCat.W(n.tag,"<onice>","drop candidate : "+e)},this.onclose=function(e){RTCat.I(n.tag,"<onclose>")},this.onconnected=function(e){RTCat.I(n.tag,"<onconnected>")},this.onicestate=function(e){RTCat.D(n.tag,"<onicestate>",e)},this.onicecomplete=function(e){RTCat.D(n.tag,"<onicecomplete>")},this.offerStream=null,this.remoteStream=null,this.peerConfig=a,this.offerConstraint=l,this.pc=new RTCPeerConnection(a),this.pc.onicecandidate=function(e){null==e.candidate||e.candidate.candidate.indexOf("endOfCandidates")>0?n.onicecomplete():n.onice&&(n.isNegoIce&&!n.negoIce?n.sIceQueue.push(e.candidate):n.onice(e.candidate))},this.pc.onaddstream=function(e){e.stream&&n.onstream&&(n.remoteStream=new s(e.stream),n.onstream(n.remoteStream))},this.pc.oniceconnectionstatechange=function(e){switch(RTCat.D(n.tag,"oniceconnectionstatechange",n.pc.iceConnectionState),n.onicestate(n.pc.iceConnectionState),n.pc.iceConnectionState){case"closed":n.offerStream&&n.offerStream.stop(),n.onclose();break;case"connected":n.onconnected()}},this.pc.onnegotiationneeded=function(e){RTCat.D(n.tag,"onnegotiationneeded")},this.pc.onsignalingstatechange=function(e){RTCat.D(n.tag,"onsignalingstatechange",n.pc.signalingState)},this.sChannel={},this.rChannel={}}return i(e,[{key:"setId",value:function(e){this.id&&RTCat.I(this.tag,"<setId>","change id : "+this.id+" -> "+e),this.id=e,this.tag="Peer : "+this.id}},{key:"addCandidate",value:function(e){this.isNegoIce&&!this.negoIce?this.rIceQueue.push(e):this.pc.addIceCandidate(e)}},{key:"offer",value:function(e,t,n){var r=this;if(e&&(this.offerStream=e,this.pc.addStream(this.offerStream.mediaStream)),t)for(var i in t){var o=t[i],s=this.pc.createDataChannel(i);this.sChannel[i]=new a(s,this.id);for(var c in o)this.sChannel[i][c]=o[c]}return new Promise(function(e){r.pc.createOffer(r.offerConstraint).then(function(t){var i=t;"function"==typeof n&&(i=n(t)),r.pc.setLocalDescription(i).then(function(t){e(i)}).catch(r.onerror)}).catch(r.onerror)})}},{key:"updateOffer",value:function(e,t){return e&&(this.pc.removeStream(this.offerStream.mediaStream),this.offerStream.stop()),this.offer(e,null,t)}},{key:"updateSdp",value:function(e,t){var n=this,r=this.pc,i=r.localDescription;"function"==typeof e&&(i.sdp=e(i.sdp)),r.setLocalDescription(i).then(function(e){var n=r.remoteDescription;return"function"==typeof t&&(n.sdp=t(n.sdp)),r.setRemoteDescription(n)}).then(function(e){RTCat.D(n.tag,"updateSdp","success")}).catch(this.onerror)}},{key:"answer",value:function(e,t,n,r){var i=this;return n&&(this.pc.ondatachannel=function(e){if(e.channel){var t=e.channel.label;if(i.rChannel[t]=new a(e.channel,i.id),n[t])for(var r in n[t])i.rChannel[t][r]=n[t][r]}}),new Promise(function(t){i.pc.setRemoteDescription(e).then(function(e){i.pc.createAnswer().then(function(e){var n=e;"function"==typeof r&&(n=r(n)),i.pc.setLocalDescription(n).then(function(e){t(n)}).catch(i.onerror)}).catch(i.onerror)}).catch(i.onerror)})}},{key:"foffer",value:function(e,t){var n=this;return new Promise(function(r){var i=e;"function"==typeof t&&(i=t(i)),n.pc.setRemoteDescription(i).then(function(e){if(n.isNegoIce){n.negoIce=!0;var t=!0,i=!1,o=void 0;try{for(var a,s=n.sIceQueue[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var c=a.value;n.onice(c)}}catch(e){i=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw o}}n.sIceQueue=[];var u=!0,f=!1,l=void 0;try{for(var d,p=n.rIceQueue[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var h=d.value;n.addCandidate(h)}}catch(e){f=!0,l=e}finally{try{!u&&p.return&&p.return()}finally{if(f)throw l}}n.rIceQueue=[]}r(e)}).catch(n.onerror)})}},{key:"getStats",value:function(){var e=this;return new Promise(function(t){e.pc&&e.pc.getStats(null).then(function(e){return t(e)}).catch(e.onerror)})}},{key:"close",value:function(){null!=this.pc&&"closed"!=this.pc.iceConnectionState&&this.pc.close()}}]),e}();c.NEW=1,c.CHECKING=2,c.CONNECTED=3,c.COMPLETED=4,c.FAILED=5,c.DISCONNECTED=6,c.CLOSED=7,e.exports=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Type.Binary;n(this,e),this.pid=r,this.tag="channel : label -> "+t.label+" , pid -> "+this.pid,this.dc=t,this.dc.binaryType=o,this.onopen=function(e){return RTCat.I(i.tag,"<onopen>")},this.onmessage=function(e){return RTCat.D(i.tag,"<onmessage>",e)},this.onerror=function(e){return RTCat.E(i.tag,"<onerror>",e)},this.onclose=function(e){return RTCat.I(i.tag,"<onclose>")},this.dc.onopen=function(e){return i.onopen()},this.dc.onclose=function(e){return i.onclose()},this.dc.onerror=function(e){return i.onerror(e)},this.dc.onmessage=function(e){return i.onmessage(e.data)}}return r(e,[{key:"sendJSON",value:function(e){var t=JSON.stringify(e);this.send(t)}},{key:"send",value:function(e){this.dc&&"open"==this.dc.readyState?(RTCat.D(this.tag,"<send>",e),this.dc.send(e)):RTCat.W(this.tag,"<send>","can not send message when channel is not open.")}}]),e}();i.Type={Binary:"arraybuffer",Blob:"blob"},e.exports=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={uploadAddr:"https://api.realtimecat.com:443/dashboard/user/logout",uploadSize:10485760,downloadAddr:"https://cdn.realtimecat.com/realtimecat/random-file-100MB",detectTime:1e4},a=function(){function e(){n(this,e)}return i(e,null,[{key:"browser",value:function(){function e(){var e=new RegExp("QQBrowser/([0-9.]+)","g"),n=new RegExp("BIDUBrowser/([0-9.]+)","g"),r=new RegExp("Maxthon/([0-9.]+)","g"),i=new RegExp("LBBROWSER","g"),o=new RegExp("Chrome/([0-9]+).+SE.+MetaSr"),a=new RegExp("Chrome/([0-9.]+)"),s=void 0,c=void 0,u=void 0;return(s=e.exec(t))?(c="QQ",u=s[1]):(s=n.exec(t))?(c="Baidu",u=s[1]):(s=r.exec(t))?(c="Maxthon",u=s[1]):(s=i.exec(t))?(c="LB",u="***"):(s=o.exec(t))?(c="Sougo",u=Number(s[1])>=49?"6.3+":"6.3-"):(s=a.exec(t))&&(c="Chrome",u=s[1]),{name:c,version:u}}var t=navigator.userAgent,n=new RegExp("Edge/([0-9.]+)","g"),r=new RegExp("Firefox/([0-9.]+)","g"),i=new RegExp("Chrome/([0-9.]+)","g"),o=new RegExp(".NET.+rv:([0-9.]+)","g"),a=new RegExp("Version/([0-9.]+).+Safari","g"),s=void 0,c=void 0,u=void 0;if(s=n.exec(t))c="Edge",u=s[1];else if(s=r.exec(t))c="Firefox",u=s[1];else if(i.test(t)){var f=e();c=f.name,u=f.version}else(s=o.exec(t))?(c="IE",u=s[1]):(s=a.exec(t))&&(c="Safari",u=s[1]);return{name:c,version:u}}},{key:"compatibility",value:function(e){var t=void 0;switch(e.name){case"Chrome":t={media:!0,data:!0,screen:!0};break;case"QQ":t={media:!0,data:!0,screen:!0};break;case"Baidu":t={media:!0,data:!0,screen:!1};break;case"Sougou":t={media:!0,data:!0,screen:!1};break;case"LB":t={media:!1,data:!1,screen:!1};break;case"Firefox":t={media:!0,data:!0,screen:!0};break;
default:t={media:!1,data:!1,screen:!1}}return t}},{key:"net",value:function(e,t){function n(e){return function(t,n){var o=void 0,u=new XMLHttpRequest;if(u.onreadystatechange=function(){},"down"===e)u.addEventListener("progress",function(e){o=e.loaded}),u.open("GET",i,!0),u.send();else if("up"==e){u.upload.addEventListener("progress",function(e){o=e.loaded});var f=r(s);u.open("POST",a,!0),u.send(f)}setTimeout(function(){var e=void 0;e=o/1024/(c/1e3),u.abort(),t(e)},c)}}function r(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(33+93*Math.random());return t}var i=o.downloadAddr+"?"+(new Date).getTime(),a=o.uploadAddr+"?"+(new Date).getTime(),s=o.uploadSize,c=o.detectTime,u=new Promise(n("down")),f=new Promise(n("up"));Promise.all([u,f]).then(function(t){e(t)})}},{key:"all",value:function(t,n){var i=void 0,o=void 0,a=!0,s=!0,c=!0;null==t&&null==n?(a=!0,s=!0,c=!0,n=function(){}):null!=t&&null!=n?(a=t.browser,s=t.compatibility,c=t.network):"object"===("undefined"==typeof t?"undefined":r(t))?(a=t.browser,s=t.compatibility,c=t.network,n=function(){}):"function"==typeof t&&(a=!0,s=!0,c=!0,n=t);var u={};return new Promise(function(t,r){if(i=e.browser(),s&&(o=e.compatibility(i),0==o.media)){var f="This Browser is not supported by shishimao";n(f,null),r(f)}a&&(u.browser=i),s&&(u.compatibility=o),c?new Promise(e.net).then(function(e){u.network={download:e[0],upload:e[1]},n(null,u),t(u)}):t(u)})}},{key:"isMoz",value:function(){return!!navigator.mozGetUserMedia}},{key:"getClientType",value:function(){return this.isMoz()?"Firefox":"Chrome"}},{key:"getPlatform",value:function(){var e=this.browser();return e.name+" "+e.version}},{key:"getDevice",value:function(){function e(e,t){var n=0,r=0,i=void 0,o=void 0,a=void 0,s=void 0,c=void 0;for(n=0;n<t.length;n+=1)if(i=new RegExp(t[n].value,"i"),a=i.test(e)){if(o=new RegExp(t[n].version+"[- /:;]([\\d._]+)","i"),s=e.match(o),c="",s&&s[1]&&(s=s[1]),s)for(s=s.split(/[._]+/),r=0;r<s.length;r+=1)c+=0===r?s[r]+".":s[r];else c="0";return{name:t[n].name,version:parseFloat(c)}}return{name:"unknown",version:0}}var t=[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],n=[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],r=n.join(" "),i=e(r,t);return i.name+" "+i.version}},{key:"getDomain",value:function(){return window.location.hostname}}]),e}();e.exports=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c=n(325),u=n(311).LocalStreamWrapper,f=n(335),l=n(327),d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{}));s.set(n,{}),n.ad_plugin=f(),n.ad_plugin.data.onvolume=function(e){n.emit("volume",e)};var o=e||{type:l.streamType,fps:l.fps,size:l.streamVideoSize,videoSource:null,audioSource:null,extensionId:l.screenExtensionId,canvas:null},a=o.type,c=void 0===a?l.streamType:a,d=o.fps,p=void 0===d?l.fps:d,h=o.size,v=void 0===h?l.streamVideoSize:h,y=o.videoSource,g=void 0===y?null:y,m=o.audioSource,b=void 0===m?null:m,w=o.extensionId,S=void 0===w?l.screenExtensionId:w,_=o.canvas,E=void 0===_?null:_;return s.get(n)._type=c,n.streamWrapper=new u({type:c,fps:p,size:v,videoSource:g,audioSource:b,extensionId:S,htmlElement:E}),n.setStreamListener(),n.streamWrapper.onerror=function(e){n.emit("error",e)},n}return o(t,e),a(t,[{key:"init",value:function(){var e=this;this.streamWrapper.init().then(function(t){e.load(e.ad_plugin),e.emit("accepted")})}},{key:"detectVolume",value:function(e){this.ad_plugin.do(e)}},{key:"release",value:function(){this.stop(),this.streamWrapper&&this.streamWrapper.stop()}},{key:"getVideoType",value:function(){switch(s.get(this)._type){case t.TYPE.AV:return"video";case t.TYPE.VIDEO:return"video";case t.TYPE.HTML_ELEMENT:return"canvas";case t.TYPE.SCREEN:return"screen";default:return null}}}]),t}(c);d.TYPE=u.Type,e.exports=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.width,n=e.height,r=void 0,i="1";return t/n>2&&(i="2"),t<128?r=l.poster["sm"+i]:t>=128&&t<256?r=l.poster["md"+i]:t>=256&&t<512?r=l.poster["lg"+i]:t>=512&&(r=l.poster["xl"+i]),r}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=new WeakMap,u=n(326).EventEmitter,f=n(311).Player,l=n(327),d=n(328),p=n(329),h=n(330),v=n(332),y=n(333),g=n(334),m=function(e){function t(e){var n=e.stream,o=void 0===n?null:n,a=e.local,s=void 0===a||a;r(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return c.set(u,{}),u.streamWrapper=o,c.get(u)._id=p.generateUUID(),c.get(u)._local=s,c.get(u)._played=!1,c.get(u)._player=null,c.get(u)._selector=null,c.get(u)._state=null,c.get(u)._stateText=null,c.get(u)._streamCopys=[],c.get(u)._isOtherSidesAudioEnabled=!0,c.get(u)._isOtherSidesVideoEnabled=!0,u.streamWrapper&&u.setStreamListener(),u}return o(t,e),s(t,[{key:"play",value:function(e,t){if(c.get(this)._played)this.emit("error",new d(10003,(new Error).stack));else{c.get(this)._played=!0;var n=t||{size:{width:l.playerVideoSize.width,height:l.playerVideoSize.height}},r=n.size,i=n.poster,o=void 0;e=e||"local",o=e.indexOf("data-")==-1&&e.indexOf("#")==-1&&e.indexOf(".")==-1?"#"+e:e,c.get(this)._selector=o,c.get(this)._player=new f(o,c.get(this)._local,r),c.get(this)._local||this.setPlayerListener(),c.get(this)._player.load(h),c.get(this)._player.load(v),c.get(this)._player.load(y),i||(i=a(r)),c.get(this)._player.poster(i),c.get(this)._player.play(this.streamWrapper.mediaStream)}}},{key:"setStreamListener",value:function(){var e=this;this.streamWrapper.onvideoend=function(t){e.emit("video_end")},this.streamWrapper.onaudioend=function(t){e.emit("audio_end")}}},{key:"setPlayerListener",value:function(){function e(){if(g.player.enableBeepOnConnected){var e=p.getAudioContext(),t=e.createOscillator();t.type="sine",t.connect(e.destination),t.start(),t.stop(e.currentTime+.04)}}var t=this;c.get(this)._player.element.addEventListener("canplay",function(e){}),c.get(this)._player.element.addEventListener("playing",function(n){t.emit("state_change","playing"),t.setPlayerText("connected"),e()}),c.get(this)._player.element.addEventListener("waiting",function(e){t.emit("state_change","waiting"),t.setPlayerText("connecting")})}},{key:"setPlayerText",value:function(e){if(g.player.enableDisplayConnectState){null!=c.get(this)._stateText&&(c.get(this)._stateText.remove(),delete c.get(this)._stateText);var t=c.get(this)._player.element.offsetTop,n=c.get(this)._player.element.offsetLeft+c.get(this)._player.element.offsetWidth,r=c.get(this)._player.element.offsetWidth/20,i=r/10,o=i,a=document.createElement("h6"),s=document.querySelector(c.get(this)._selector)||document.body;a.style.position="absolute",a.textContent=e,a.style.margin=0,a.style.fontSize=r+"px",s.appendChild(a),a.style.top=t+i+"px",a.style.left=n-i-a.offsetWidth-2*o+"px",a.style.backgroundColor="white",a.style.padding=o+"px",c.get(this)._stateText=a}}},{key:"stop",value:function(){c.get(this)._played&&(c.get(this)._played=!1,c.get(this)._player.stop()),c.get(this)._stateText&&(c.get(this)._stateText.remove(),delete c.get(this)._stateText)}},{key:"resize",value:function(e){c.get(this)._player.setSize(e)}},{key:"hasAudio",value:function(){return!!this.streamWrapper.audioTrack}},{key:"hasVideo",value:function(){return!!this.streamWrapper.videoTrack}},{key:"filter",value:function(){h.do("start")}},{key:"removeFilter",value:function(){h.do("stop")}},{key:"capture",value:function(e){return v.data.options=e,v.do()}},{key:"mirror",value:function(){y.do()}},{key:"getPlayer",value:function(){return c.get(this)._player}},{key:"getStream",value:function(){return this.streamWrapper.mediaStream}},{key:"getStreamWrapper",value:function(){return this.streamWrapper}},{key:"disableVideo",value:function(e){this.changeMedia("video",!1,e)}},{key:"disableAudio",value:function(e){this.changeMedia("audio",!1,e)}},{key:"enableVideo",value:function(e){this.changeMedia("video",!0,e)}},{key:"enableAudio",value:function(e){this.changeMedia("audio",!0,e)}},{key:"getStreamCloneWrapper",value:function(){var e=this.streamWrapper.clone();return e.setVideoEnabled(c.get(this)._isOtherSidesVideoEnabled),e.setAudioEnabled(c.get(this)._isOtherSidesAudioEnabled),c.get(this)._streamCopys.push(e),e}},{key:"changeMedia",value:function(e,t,n){var r=!0,i=!0;n?(n.self===!1&&(r=!1),n.others===!1&&(i=!1)):(r=!0,i=!0),r&&("audio"==e?this.streamWrapper.setAudioEnabled(t):"video"==e&&this.streamWrapper.setVideoEnabled(t)),i&&this.changeOtherSidesMedia(e,t)}},{key:"changeOtherSidesMedia",value:function(e,t){"audio"==e?c.get(this)._isOtherSidesAudioEnabled=t:"video"==e&&(c.get(this)._isOtherSidesVideoEnabled=t);for(var n in c.get(this)._streamCopys)c.get(this)._streamCopys[n]&&("audio"==e?c.get(this)._streamCopys[n].setAudioEnabled(t):"video"==e&&c.get(this)._streamCopys[n].setVideoEnabled(t))}},{key:"getId",value:function(){return c.get(this)._id}},{key:"load",value:function(e){return e.source=this.streamWrapper,this}}]),t}(u);e.exports=m},function(e,t){"use strict";function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"===("undefined"==typeof e?"undefined":s(e))&&null!==e}function a(e){return void 0===e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,c=0;c<i;c++)u[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";e.exports={fps:10,streamType:3,streamVideoSize:{width:120,height:90},playerVideoSize:{width:300,height:300},screenExtensionId:"kopddpjmdlllnpkpcphndjiaohbakkjb",publicServer:"wss://signal.realtimecat.com:3000/",poster:{sm1:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-128x128.png",lg2:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-512x1024.png",md1:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-256x256.png",md2:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-256x512.png",xl1:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-1024x1024.png",lg1:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-512x512.png",xl2:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-1024x2048.png",sm2:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-128x256.png"}}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="Sorry, contact with RTCat for more information",i={10001:{error:"LOCAL_STREAM_NOT_INIT",message:"please call init() before do any operation!"},10002:{error:"REMOTE_STREAM_NOT_RECEIVED",message:"remote stream is empty,please try late."},10003:{error:"STREAM_ALREADY_PLAYED",message:"stream already played."},10004:{error:"STREAM_ALREADY_STOPPED",message:"stream already stopped."},10005:{error:"LOCAL_STREAM_ACCEPTED_DENIES",message:"stream accepted denies."},10006:{error:"EXTENSION_NOT_EXISTED",message:"the extension is not existed."},10007:{error:"BROWSER_NOT_SUPPORTED",message:"this browser is not supported by shishimao."},20001:{error:"TOKEN_IS_NULL",message:"can not construct a session without tokens."},20002:{error:"SESSION_CONNECT_ERROR",message:"connect server failed , and check your network."},20003:{error:"PROTOCOL_ERROR",message:"protocol error"},20004:{error:"MESSAGE_TYPE_NOT_SUPPORTED",message:"only support string , array and object message."},20005:{error:"MESSAGE_LENGTH_OUT_LIMIT",message:"the message is out of the limit length ( 1024 * 256 )."},20006:{error:"LINK_WITHOUT_STREAM_ERROR",message:"need a steam to link the server."},30001:{error:"INTERNAL_ERROR",message:"something wrong with your network , please try late."},30002:{error:"CHANNEL_ERROR",message:"data channel error"},40001:{error:"INTERNAL_ERROR",message:"something wrong with your network , please try late."},40002:{error:"CHANNEL_ERROR",message:"data channel error"},40003:{error:"SEND_FILE_PARALLEL_ERROR",message:"can not send file parallel."},40004:{error:"CHANNEL_NOT_OPEN",message:"can not send message before channel is open."},40005:{error:"SENDER_NOT_CONNECTED",message:"can not send message before sender is connected."}},o=function e(t,o,a){n(this,e),this.no=t,this.name=i[t].error||110,this.message=i[t].message||r,this.detail=a,this.stack=o};e.exports=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"generateUUID",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}},{key:"toDecimal",value:function(e){var t=parseFloat(e);return isNaN(t)?e:parseFloat(t.toFixed(2))}},{key:"getAudioContext",value:function(){if(e.audioContext)return e.audioContext;var t=window.AudioContext||window.webkitAudioContext;return e.audioContext=new t,e.audioContext}}]),e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){var n=void 0;switch(e){case"start":n=this.data.filter;break;case"stop":n="none";break;default:n="none"}t.style.webkitFilter=n,t.style.mozFilter=n,t.style.filter=n}function i(){}var o=n(331),a={filter:"blur(10px)"};e.exports=new o("filter","0.0.1",o.Type.PLAYER,r,i,a)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=new WeakMap,o=function(){function e(t,r,o,a,s,c){return n(this,e),i.set(this,{}),t&&r&&o&&a&&s?(i.get(this)._available=!0,this.name=t,this.version=r,this.type=o,this.handle=a,this.release=s,this.data=c,void(this.state=null)):void(i.get(this)._available=!1)}return r(e,[{key:"isAvailable",value:function(){return i.get(this)._available}},{key:"do",value:function(e){return e&&(this.state=e),this.handle(this.state,this.source)}}]),e}();o.Type={STREAM:"Stream",PLAYER:"Player"},e.exports=o},function(e,t,n){"use strict";function r(e,t){var n="image/png",r=1,i=document.createElement("canvas");i.width=t.offsetWidth,i.height=t.offsetHeight;var o=this.data.options||{type:n,quality:r,position:[0,0,t.offsetWidth,t.offsetHeight]},a=o.type,s=void 0===a?n:a,c=o.quality,u=void 0===c?r:c,f=o.position,l=void 0===f?[0,0,t.offsetWidth,t.offsetHeight]:f,d=i.getContext("2d");d.drawImage(t,l[0],l[1],l[2],l[3]);var p=i.toDataURL(s,u);return i.remove(),p}function i(){}var o=n(331),a={options:null};e.exports=new o("capture","0.0.1",o.Type.PLAYER,r,i,a)},function(e,t,n){"use strict";function r(e,t){var n=void 0;n=this.data.mirror?1:-1,this.data.mirror=!this.data.mirror,["","moz","webkit","o","ms"].forEach(function(e){var r=e?e+"Transform":"transform";t.style[r]="scaleX("+n+")"})}function i(){}var o=n(331),a={mirror:!1};e.exports=new o("mirror","0.0.1",o.Type.PLAYER,r,i,a)},function(e,t){"use strict";e.exports={sender:{enableIceFilter:!1},receiver:{enableIceFilter:!1},player:{enableBeepOnConnected:!1,enableDisplayConnectState:!1},log:{enableLogToSignal:!0,enableLogToApi:!0,logApiServerIp:"https://log.realtimecat.com",logApiDynamicPeriod:10},codec:{video:"H264",audio:"OPUS"}}},function(e,t,n){"use strict";function r(e,t,n,r){var i=e.createScriptProcessor(512);return i.onaudioprocess=function(e){for(var t=e.inputBuffer.getChannelData(0),n=t.length,r=0,i=void 0,o=0;o<n;o++)i=t[o],Math.abs(i)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),r+=i*i;var a=Math.sqrt(r/n);this.volume=Math.max(a,this.volume*this.averaging)},i.clipping=!1,i.lastClip=0,i.volume=0,i.clipLevel=t||.98,i.averaging=n||.95,i.clipLag=r||750,i.connect(e.destination),i.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},i.shutdown=function(){this.disconnect(),this.onaudioprocess=null,e.close()},i}function i(e,t){function n(){i.data.detectVolume&&(i.data.onvolume&&i.data.onvolume(i.data.volumeMeter.volume),setTimeout(n,100))}var i=this;if(t.audioTrack)if("start"===e){this.data.detectVolume=!0;var o=s.getAudioContext(),a=o.createMediaStreamSource(t.mediaStream);this.data.volumeMeter=r(o),a.connect(this.data.volumeMeter),n()}else"stop"===e&&this.data.volumeMeter&&(this.data.volumeMeter.shutdown(),this.data.detectVolume=!1)}function o(){}var a=n(331),s=n(329),c={detectVolume:!1,volumeMeter:null,onvolume:null};e.exports=function(e){return new a("audio_detect","0.0.1",a.Type.STREAM,i,o,c)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t="";for(var n in e)t+=n+"="+e[n]+"&";return t.slice(0,t.length-1)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=new WeakMap,f=n(326).EventEmitter,l=n(327),d=n(337),p=n(323),h=n(338),v=n(354),y=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(u.set(o,{}),o.tokenId=e,u.get(o)._handle=null,u.get(o)._isPassiveDisconnect=!0,o.tokenId){if(n&&"object"===("undefined"==typeof n?"undefined":s(n))){var c=n.type,f=void 0===c?"p2p":c,y=n.url,g=void 0===y?l.publicServer:y,m=n.encrypt,b=void 0!==m&&m;o.type=f,o.url=g,o.encrypt=!!b}else o.type="p2p",o.url=l.publicServer,o.encrypt=!1;var w=o.url+"?"+a({tokenId:o.tokenId,encrypt:o.encrypt,type:o.type});"p2p"==o.type?u.get(o)._handle=new h(w,o.encrypt):"rel"==o.type&&(u.get(o)._handle=new v(w,o.encrypt)),u.get(o)._handle.onconnected=function(e){d.postEvents(d.EventType.SessionConnect,{platform:p.getPlatform(),device:p.getDevice(),domain:p.getDomain(),tokenId:o.tokenId,sdk:"JS SDK "+RTCat.getVersion()}),u.get(o)._isPassiveDisconnect=!0,o.emit("connected",e)},u.get(o)._handle.onin=function(e){o.emit("in",e)},u.get(o)._handle.onout=function(e){o.emit("out",e)},u.get(o)._handle.onremote=function(e){o.emit("remote",e)},u.get(o)._handle.onlocal=function(e){o.emit("local",e)},u.get(o)._handle.onmessage=function(e){o.emit("message",e)},u.get(o)._handle.onerror=function(e){o.emit("error",e)},u.get(o)._handle.ondisconnect=function(){d.postEvents(d.EventType.SessionDisconnect,{tokenId:o.tokenId,closed:u.get(o)._isPassiveDisconnect?d.DisconnectType.Passive:d.DisconnectType.Aggressive}),o.emit("disconnect")},u.get(o)._handle.onapilog=function(e,t){t.tokenId=o.tokenId,d.postEvents(e,t)}}return o}return o(t,e),c(t,[{key:"connect",value:function(){u.get(this)._handle.connect()}},{key:"send",value:function(e){u.get(this)._handle.broadcast(e)}},{key:"sendTo",value:function(e){u.get(this)._handle.unicast(e)}},{key:"link",value:function(e){u.get(this)._handle.link(e)}},{key:"unlink",value:function(){u.get(this)._handle.unlink()}},{key:"sendMessage",value:function(e,t){u.get(this)._handle.sendMessage(e,t)}},{key:"broadcastMessage",value:function(e){u.get(this)._handle.broadcastMessage(e)}},{key:"getState",value:function(){return u.get(this)._handle.state}},{key:"getWits",value:function(){return u.get(this)._handle.wits}},{key:"getReceivers",value:function(){return u.get(this)._handle.remote}},{key:"getSenders",value:function(){return u.get(this)._handle.local}},{key:"disconnect",value:function(){u.get(this)._isPassiveDisconnect=!1,u.get(this)._handle.disconnect()}},{key:"setIceServer",value:function(e){u.get(this)._handle.setIceServer(e)}},{key:"updateBySetting",value:function(){u.get(this)._handle.updateAllSender()}}]),t}(f);e.exports=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(334),a=function(){function e(){r(this,e)}return i(e,null,[{key:"postJson",value:function(e,t){function n(){a++,r()}function r(){u.open("post",c,!0),u.setRequestHeader("Content-Type","application/json;charset=UTF-8"),u.send(JSON.stringify(t))}if(o.log.enableLogToApi){t.timestamp=Math.floor(Date.now()/1e3);var i=o.log.logApiServerIp,a=0,s=3,c=i+"/"+e,u=new XMLHttpRequest;u.onload=function(){var e=(u.status,JSON.parse(u.response));!e.id&&a<s&&n()},u.onerror=function(){a<s&&n()},r()}}},{key:"postDynamic",value:function(t){e.postJson("dynamic",t)}},{key:"postEvents",value:function(t,n){var r={from:"client",type:t,data:n};e.postJson("events",r)}}]),e}();a.DynamicType={Audio:1,Video:2},a.PeerType={Sender:1,Receiver:2},a.DisconnectType={Passive:"passive",Aggressive:"aggressive"},a.EventType={SessionConnect:"session_connect",SessionDisconnect:"session_disconnect",PeerConnect:"peer_connect",PeerDisConnect:"peer_disconnect",ChannelConnect:"channel_connect",ChannelDisConnect:"channel_disconnect",Error:"error",WebRTC:"webrtc"},e.exports=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(339),c=n(340),u=n(349),f=n(328),l=n(353),d=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.encrypt=n,o.state=RTCat.SESSION_STATE.DISCONNECTED,o.local={},o.remote={},o.wits={},o.iceServers=[],o.manualIceServer=null,o}return o(t,e),a(t,[{key:"connect",value:function(e){var t=this;this.state=RTCat.SESSION_STATE.CONNECTING,this.connector.onopen=function(){t.checkin()},this.connector.onmessage=function(e){var n=e.data;switch(e.eventName){case l.S2C.JOIN:t.wits[n.tokenId]=new s(n.tokenId),t.onin(t.wits[n.tokenId].id);break;case l.S2C.PEERS:t.iceServers=n.iceServers;var r=n.connections,i=[];for(var o in r)t.wits[r[o]]=new s(r[o]),i.push(r[o]);t.state=RTCat.SESSION_STATE.CONNECTED,t.onconnected(i);break;case l.S2C.REMOVE_PEER:var a=n.tokenId;for(var c in t.local[a]){var d=t.local[a][c];d.close()}for(var p in t.remote[a]){var h=t.remote[a][p];h.close()}t.onout(t.wits[a].id),delete t.wits[a],delete t.remote[a],delete t.local[a];break;case l.S2C.OFFER:var v=t,y=n.config;y.from=n.from,y.sdp=n.sdp,y.channelId=n.channelId,t.manualIceServer?y.constraints={iceServers:[t.manualIceServer]}:y.constraints={iceServers:t.iceServers};var g=void 0;if(t.remote[n.from]&&t.remote[n.from][n.channelId])return g=t.remote[n.from][n.channelId],void g.updatePeer(n.sdp);g=new u(y),t.remote[n.from]=t.remote[n.from]||{},t.remote[n.from][n.channelId]=g,g.on("_log",function(e){v.send(l.C2S.LOG,e)}),g.on("_answer",function(e){v.send(l.C2S.ANSWER,e)}),g.on("_ice",function(e){v.send(l.C2S.ICE,e)}),g.on("_ice_complete",function(e){v.send(l.C2S.ICE_COMPLETE,e)}),g.on("_log_api",function(e,t){v.onapilog(e,t)}),t.onremote(g);break;case l.S2C.ANSWER:var m=t.local[n.from][n.channelId];m.receive(n.sdp),m.registered||(m.registered=!0,t.onlocal(m));break;case l.S2C.ICE:var b=void 0;"answer"==n.type?b=t.local[n.from][n.channelId]:"offer"==n.type&&t.remote[n.from]&&(b=t.remote[n.from][n.channelId]),b&&b.candidate(n.candidate);break;case l.S2C.MESSAGE:t.onmessage({from:n.from,message:n.message});break;case l.S2C.ERROR:t.onerror(new f(20003,(new Error).stack,n.error))}},this.connector.onerror=function(e){t.onerror(new f(20002,(new Error).stack,e))},this.connector.onclose=function(){t.state=RTCat.SESSION_STATE.DISCONNECTED,t.release(),t.ondisconnect()},this.connector.connect()}},{key:"broadcast",value:function(e){var t=e.data,n=void 0!==t&&t,r=e.attr,i=void 0===r?{}:r,o=e.stream,a=void 0!==o&&o;for(var s in this.wits)this.unicast({data:n,attr:i,stream:a,to:s})}},{key:"unicast",value:function(e){var t=e.data,n=void 0!==t&&t,r=e.attr,i=void 0===r?{}:r,o=e.stream,a=void 0!==o&&o,s=e.to,u=void 0!==s&&s,f=this,d={constraints:{iceServers:this.iceServers},data:n,attr:i,stream:a,to:u};this.manualIceServer&&(d.constraints={iceServers:[this.manualIceServer]});var p=new c(d),h=p.getId();this.local[u]=this.local[u]||{},this.local[u][h]=p,p.on("_log",function(e){f.send(l.C2S.LOG,e)}),p.on("_offer",function(e){f.send(l.C2S.OFFER,e)}),p.on("_ice",function(e){f.send(l.C2S.ICE,e)}),p.on("_ice_complete",function(e){f.send(l.C2S.ICE_COMPLETE,e)}),p.on("_log_api",function(e,t){f.onapilog(e,t)})}},{key:"updateAllSender",value:function(){for(var e in this.local)for(var t in this.local[e])this.local[e][t].updatePeer()}},{key:"setIceServer",value:function(e){this.manualIceServer=e}},{key:"disconnect",value:function(){this.connector.close()}},{key:"release",value:function(){if(this.remote){for(var e in this.remote)for(var t in this.remote[e])this.remote[e][t].close();this.remote={}}
if(this.local){for(var n in this.local)for(var r in this.local[n])this.local[n][r].close();this.local={}}this.wits&&(this.wits={})}}]),t}(l);e.exports=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(t){n(this,e),this.id=t};e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c=n(326).EventEmitter,u=n(341),f=(n(329),function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.set(n,{}),s.get(n)._handler=new u(e),s.get(n)._handler.init(),n.registered=!1,s.get(n)._handler.eventHandler=function(e,t){switch(t.length){case 0:n.emit(e);break;case 1:n.emit(e,t[0]);break;case 2:n.emit(e,t[0],t[1]);break;default:n.emit(e)}},s.get(n)._handler.createOffer(),n}return o(t,e),a(t,[{key:"receive",value:function(e){s.get(this)._handler.receiver(e)}},{key:"candidate",value:function(e){s.get(this)._handler.addCandidate(e)}},{key:"sendMessage",value:function(e){s.get(this)._handler.sendMessage(e)}},{key:"sendFile",value:function(e){s.get(this)._handler.sendFile(e)}},{key:"close",value:function(){s.get(this)._handler.close()}},{key:"getId",value:function(){return s.get(this)._handler.id}},{key:"getRole",value:function(){return s.get(this)._handler.role}},{key:"getReceiver",value:function(){return this.getReceiverToken()}},{key:"getReceiverToken",value:function(){return s.get(this)._handler.opposite}},{key:"getAttr",value:function(){return s.get(this)._handler.attr}},{key:"enableVideo",value:function(){s.get(this)._handler.setVideoEnabled(!0)}},{key:"enableAudio",value:function(){s.get(this)._handler.setAudioEnabled(!0)}},{key:"disableVideo",value:function(){s.get(this)._handler.setVideoEnabled(!1)}},{key:"disableAudio",value:function(){s.get(this)._handler.setAudioEnabled(!1)}},{key:"updateAndCreateOffer",value:function(){s.get(this)._handler.updateAndCreateOffer()}},{key:"updatePeer",value:function(){s.get(this)._handler.updatePeer()}}]),t}(c));e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=new WeakMap,u=n(342),f=n(346),l=n(347),d=n(329),p=n(311).Peer,h=n(348),v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return c.set(n,{}),n.id=d.generateUUID(),n.role="sender",n.opposite=e.to,n.stream=e.stream,n.peer=new p({peerConfig:n.peerConfig,isNegoIce:!1}),n}return o(t,e),a(t,[{key:"init",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),RTCat.STRATEGY.quality.enable&&this.hasAudio()&&this.hasVideo()&&(this.quality=new h(RTCat.STRATEGY.quality),this.quality.changeBandwidth=function(t,n){e.onBandwidthChange(t,n)}),this.currentFile=null,this.fileSending=!1}},{key:"createOffer",value:function(){function e(e){var n={to:t.opposite,sdp:e,channelId:t.id,config:{stream:!!t.stream,audio:t.hasVideo(),video:t.hasAudio(),data:t.data,attr:t.attr}};t.eventHandler("_offer",[n])}this.rcq=[];var t=this,n={};n[this.channelLabel.Message]=this.getChannelHandler(this.channelLabel.Message),n[this.channelLabel.File]=this.getChannelHandler(this.channelLabel.File),this.stream&&this.data?this.peer.offer(this.stream.getStreamCloneWrapper(),n,u.codecHandler).then(e):this.stream?this.peer.offer(this.stream.getStreamCloneWrapper(),null,u.codecHandler).then(e):this.data&&this.peer.offer(null,n,u.codecHandler).then(e)}},{key:"receiver",value:function(e){var t=this;this.peer.foffer(e).then(function(e){t.handshake=!0,t.onHandShake()})}},{key:"sendFileInternal",value:function(){this.fileSending=!0;var e=this.fileChannel,t=this.currentFile,n=this;l.sliceFile(t,function(t){e.send(t)},function(e){n.eventHandler("file_sending",[t.name,e])})}},{key:"messageChannelOnMessage",value:function(e){var t=JSON.parse(e);if("response"===t.type&&"file"===t.response){var n=t.content.name,r=t.content.purpose;n===this.currentFile.name&&("finish"===r?(this.eventHandler("file_sent",[this.currentFile.name]),this.fileSending=!1,this.currentFile=null):"agree"===r&&this.sendFileInternal())}}},{key:"sendMessage",value:function(e){if(this.msgChannel){var t={content:e,type:"message"};this.msgChannel.sendJSON(t)}else RTCat.E(this.tag,"<sendMessage>","message channel has not been established")}},{key:"sendFile",value:function(e){if(!this.fileSending&&e.size>0){this.currentFile=e;var t={file:{name:e.name,size:e.size,type:e.type},type:"file"};this.msgChannel?this.msgChannel.sendJSON(t):RTCat.E(c.get(this)._tag,"<sendMessage>","message channel has not been established")}else RTCat.E(this.tag,"<sendFile>","this sender can not send file"),this.eventHandler("error",[new Errors(40003,(new Error).stack)])}},{key:"channelOnMessage",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"channelOnMessage",this).call(this,e,n),e==this.channelLabel.Message&&this.messageChannelOnMessage(n)}},{key:"setVideoEnabled",value:function(e){this.peer.offerStream&&this.peer.offerStream.setVideoEnabled(e)}},{key:"setAudioEnabled",value:function(e){this.peer.offerStream&&this.peer.offerStream.setAudioEnabled(e)}},{key:"updateAndCreateOffer",value:function(){this.createOffer()}},{key:"updatePeer",value:function(){this.peer.onclose=function(e){},this.peer.close(),this.peer=new p({peerConfig:this.peerConfig,isNegoIce:!1});try{this.webrtcLog.stop(),this.webrtcLog=null}catch(e){}this.init(),this.createOffer()}},{key:"onBandwidthChange",value:function(e,t){this.peer&&this.peer.updateSdp(null,function(n){return"audio"==t?f.updateAudioBandwidth(n,e):"video"==t?f.updateVideoBandwidth(n,e):void 0})}},{key:"videoQualityHandler",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"videoQualityHandler",this).call(this,e),this.quality&&this.quality.addVideoQuality(e)}}]),t}(u);e.exports=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(337),a=n(343),s=n(328),c=n(323),u=n(344),f=(n(311).Peer,n(334)),l=n(346),d=function(){function e(t){r(this,e),this.channelLabel={Message:"data",File:"file"},this.peerConfig=t.constraints,this.attr=t.attr,this.data=t.data,this.id=null,this.opposite=null,this.role=null,this.peer=null}return i(e,[{key:"init",value:function(){var e=this;this.msgChannel=null,this.fileChannel=null,this.tag=this.role+" : "+this.id,this.webrtcLog=new u(this.role),this.rcq=[],this.handshake=!1,this.isPassiveDisconnect=!0,this.peerConnectInfo={role:this.role,opposite:this.opposite,peerId:this.id,video:{},audio:{},type:null,location:null,localAddress:null,remoteAddress:null,ipList:[],transport:null,networkType:null},this.iceIpList=[],this.isLogPeerConnectInfo=!1,this.dynamicCountVideo=0,this.dynamicCountAudio=0,this.dynamicLogPeriod=f.log.logApiDynamicPeriod,this.peer.onice=function(t){e.peerOnIce(t)},this.peer.onclose=function(t){e.peerOnClose()},this.peer.onconnected=function(t){e.peerOnConnected()},this.peer.onerror=function(t){e.peerOnError(t)},this.peer.onicecomplete=function(){},this.addWebRTCLogHandler()}},{key:"eventHandler",value:function(e,t){}},{key:"channelEvent",value:function(e,t){this.logApi(e,{peerId:this.id,label:t})}},{key:"peerOnIce",value:function(e){var t=a.getIp(e),n=a.getType(e);if(this.iceIpList.includes(t)||this.iceIpList.push(t),"srflx"==n&&(this.peerConnectInfo.location=t),this.iceFilter(e)){var r="sender"==this.role?"offer":"answer",i={to:this.opposite,channelId:this.id,candidate:e,type:r};this.eventHandler("_ice",[i])}}},{key:"peerOnClose",value:function(){this.logApi(o.EventType.PeerDisConnect,{peerId:this.id,closed:this.isPassiveDisconnect?o.DisconnectType.Passive:o.DisconnectType.Aggressive}),this.webrtcLog.stop(),this.eventHandler("close",[])}},{key:"peerOnConnected",value:function(){this.webrtcLog.start()}},{key:"peerOnError",value:function(e){RTCat.E(this.tag,"<Peer On Error>",e),this.logApi(o.EventType.Error,{peerId:this.id,type:"webrtc_error",message:e.message})}},{key:"channelOnOpen",value:function(e){this.channelEvent(o.EventType.ChannelConnect,e),e==this.channelLabel.Message?("receiver"==this.role?this.msgChannel=this.peer.rChannel[e]:this.msgChannel=this.peer.sChannel[e],this.eventHandler("channel_open",[])):("receiver"==this.role?this.fileChannel=this.peer.rChannel[e]:this.fileChannel=this.peer.sChannel[e],this.eventHandler("file_channel_open",[])),RTCat.D(this.tag,"<onopen>",e+" channel is open")}},{key:"channelOnClose",value:function(e){this.channelEvent(o.EventType.ChannelDisConnect,e),e===this.channelLabel.Message?this.eventHandler("channel_close",[]):this.eventHandler("file_channel_close",[]),RTCat.D(this.tag,"<onclose>",e+" channel is closed")}},{key:"channelOnError",value:function(e,t){e===this.channelLabel.Message?this.eventHandler("channel_error",[new s(30002,(new Error).stack,t)]):this.eventHandler("file_channel_error",[new s(30002,(new Error).stack,t)]),RTCat.E(this.tag,"<onerror>",t)}},{key:"channelOnMessage",value:function(e,t){}},{key:"addWebRTCLogHandler",value:function(){var e=this,t="sender"==e.role?o.PeerType.Sender:o.PeerType.Receiver;e.webrtcLog.on("get_stats",function(){e.peer.getStats().then(function(t){e.webrtcLog.addResult(t)})}),e.webrtcLog.on("client_log",function(n){e.hasAudio()&&(e.dynamicCountAudio++,e.dynamicCountAudio%e.dynamicLogPeriod==0&&o.postDynamic({role:t,peerId:e.id,type:o.DynamicType.Audio,count:Math.floor(e.dynamicCountAudio/e.dynamicLogPeriod),bytesReceived:n.audio.bitrate,packetLoss:n.audio.packetsLossRate,jitter:n.audio.jitter}),e.peerConnectInfo.audio.codec=n.audio.codecName),e.hasVideo()&&(e.dynamicCountVideo++,e.dynamicCountVideo%e.dynamicLogPeriod==0&&o.postDynamic({role:t,peerId:e.id,type:o.DynamicType.Video,count:Math.floor(e.dynamicCountVideo/e.dynamicLogPeriod),bytesReceived:n.video.bitrate,packetLoss:n.video.packetsLossRate,decodeTime:n.video.decodeMs,jitter:n.video.jitter,mos:n.video.mos}),e.peerConnectInfo.video={width:n.video.width,height:n.video.height,fps:n.video.fps,codec:n.video.codecName}),e.peerConnectInfo.type=n.net.local_candidate_type,e.peerConnectInfo.localAddress=n.net.local_ip,e.peerConnectInfo.remoteAddress=n.net.remote_ip,e.peerConnectInfo.transport=n.net.transport_protocol,e.peerConnectInfo.networkType=n.net.networkType,e.peerConnectInfo.ipList=e.iceIpList,e.isLogPeerConnectInfo||(e.isLogPeerConnectInfo=!0,e.logApi(o.EventType.PeerConnect,e.peerConnectInfo)),e.videoQualityHandler(n.video.mos),e.eventHandler("detect_net",[JSON.parse(JSON.stringify(n.net))]),e.eventHandler("log",[JSON.parse(JSON.stringify(n))])}),e.webrtcLog.on("server_log",function(t){if(f.log.enableLogToSignal){var n={id:e.id,opposite:e.opposite,clientType:c.getClientType(),role:e.role};e.hasVideo()&&(n.video=t.video),e.hasAudio()&&(n.audio=t.audio),e.eventHandler("_log",[n])}})}},{key:"logApi",value:function(e,t){this.eventHandler("_log_api",[e,t])}},{key:"hasVideo",value:function(){return this.stream&&this.stream.hasVideo()}},{key:"hasAudio",value:function(){return this.stream&&this.stream.hasAudio()}},{key:"addCandidate",value:function(e){RTCat.D(this.tag,"<addCandidate>",JSON.stringify(e)),this.peerIceHandler(e)}},{key:"iceFilter",value:function(e){var t=void 0;return t=f.sender.enableIceFilter&&"sender"==this.role||f.receiver.enableIceFilter&&"receiver"==this.role,!t||a.iceFilter(e,"relay")}},{key:"peerIceHandler",value:function(e){this.iceFilter(e)&&(this.handshake?this.peer.addCandidate(e):this.rcq.push(e))}},{key:"onHandShake",value:function(){var e=this;this.rcq.forEach(function(t){e.peerIceHandler(t)})}},{key:"getChannelHandler",value:function(e){var t={},n=this;return t.onopen=function(){n.channelOnOpen(e)},t.onclose=function(){n.channelOnClose(e)},t.onerror=function(t){n.channelOnError(e,t)},t.onmessage=function(t){n.channelOnMessage(e,t)},t}},{key:"videoQualityHandler",value:function(e){}},{key:"close",value:function(){this.isPassiveDisconnect=!1,this.peer.close()}}],[{key:"codecHandler",value:function(e){return e.sdp=l.maybePreferVideoSendCodec(e.sdp,{videoSendCodec:f.codec.video}),e.sdp=l.maybePreferAudioSendCodec(e.sdp,{audioSendCodec:f.codec.audio}),e}}]),e}();e.exports=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"getIp",value:function(e){var t=/(\d+\.\d+\.\d+\.\d+)/,n=e.candidate.match(t);return n&&n[1]?n[1]:"unknown"}},{key:"getType",value:function(e){var t=/typ\s([a-z]+)/,n=e.candidate.match(t);return n[1]}},{key:"iceFilter",value:function(e,t){return e.candidate.indexOf("typ "+t)!=-1}}]),e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=parseFloat(e);return isNaN(t)?e:parseFloat(t.toFixed(2))}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(345),u=n(326).EventEmitter,f=n(323),l={GENERATE_LOG_PERIOD:1,CLIENT_LOG_PERIOD:1,SERVER_LOG_PERIOD:10},d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type=e,n.video={},n.audio={},n.net={},n.videoBwe={},n.videoDetecter=new c(e),n.serverLog={},n.clientLog={},n.generateTimer=null,n.clientTimer=null,n.serverTimer=null,n.isStart=!1,n.hasVideo=!1,n.hasAudio=!1,n}return o(t,e),s(t,[{key:"start",value:function(){this.isStart||(this.isStart=!0),this.addLogTimer()}},{key:"addLogTimer",value:function(){var e=this;this.generateTimer=setInterval(function(){e.emit("get_stats")},1e3*l.GENERATE_LOG_PERIOD),this.clientTimer=setInterval(function(){e.updateClientLog()},1e3*l.CLIENT_LOG_PERIOD),this.serverTimer=setInterval(function(){e.updateServerLog()},1e3*l.SERVER_LOG_PERIOD)}},{key:"addResult",value:function(e){f.isMoz()?this.parserStatsMoz(e):this.parserStats(e)}},{key:"parserStatsMoz",value:function(e){var t=this,n=void 0,r=void 0;Object.keys(e).forEach(function(i){var o=e[i];"sender"==t.type&&("outboundrtp"==o.type&&"video"==o.mediaType&&(o.isRemote||t.fetchVideoState(o)),"outboundrtp"==o.type&&"audio"==o.mediaType&&(o.isRemote||t.fetchAudioState(o))),"receiver"==t.type&&("inboundrtp"==o.type&&"video"==o.mediaType&&(o.isRemote||t.fetchVideoState(o)),"inboundrtp"==o.type&&"audio"==o.mediaType&&(o.isRemote||t.fetchAudioState(o))),"candidatepair"==o.type&&1==o.selected&&o.localCandidateId&&o.remoteCandidateId&&(n=o.localCandidateId,r=o.remoteCandidateId)}),Object.keys(e).forEach(function(i){var o=e[i];"localcandidate"==o.type&&o.id==n&&(t.net.local_ip=o.ipAddress,t.net.local_candidate_type=o.candidateType,t.net.transport_protocol=o.transport),"remotecandidate"==o.type&&o.id==r&&(t.net.remote_ip=o.ipAddress,t.net.remote_candidate_type=o.candidateType)})}},{key:"parserStats",value:function(e){var t=this;Object.keys(e).forEach(function(n){var r=e[n];"googCandidatePair"==r.type&&"true"==r.googActiveConnection&&"true"==r.googReadable&&t.fetchNetState(r),"VideoBwe"==r.type&&t.fetchVideoBwe(r),"localcandidate"==r.type&&(t.net.networkType=r.networkType),"ssrc"==r.type&&("video"==r.mediaType&&(r.hasOwnProperty("bytesSent")&&"sender"==t.type||r.hasOwnProperty("bytesReceived")&&"receiver"==t.type)&&t.fetchVideoState(r),"audio"==r.mediaType&&(r.hasOwnProperty("bytesSent")&&"sender"==t.type||r.hasOwnProperty("bytesReceived")&&"receiver"==t.type)&&t.fetchAudioState(r))})}},{key:"fetchNetState",value:function(e){if("sender"==this.type){var t=a(e.bytesSent/1024);this.net.sent=a((t-(this.net.bytesSent||0))/l.GENERATE_LOG_PERIOD),this.net.sent=this.net.sent>0?this.net.sent:0,this.net.bytesSent=t}if("receiver"==this.type){var n=a(e.bytesReceived/1024);this.net.received=a((n-(this.net.bytesReceived||0))/l.GENERATE_LOG_PERIOD),this.net.received=this.net.received>0?this.net.received:0,this.net.bytesReceived=n}e.googLocalAddress&&(this.net.local_ip=e.googLocalAddress),e.googRemoteAddress&&(this.net.remote_ip=e.googRemoteAddress),e.googLocalCandidateType&&(this.net.local_candidate_type=e.googLocalCandidateType),e.googRemoteCandidateType&&(this.net.remote_candidate_type=e.googRemoteCandidateType),e.googTransportType&&(this.net.transport_protocol=e.googTransportType),e.googRtt&&(this.net.rtt=e.googRtt)}},{key:"fetchVideoBwe",value:function(e){"receiver"==this.type&&e.googAvailableReceiveBandwidth&&(this.videoBwe.arb=e.googAvailableReceiveBandwidth),"sender"==this.type&&e.googAvailableSendBandwidth&&(this.videoBwe.asb=e.googAvailableSendBandwidth)}},{key:"fetchVideoState",value:function(e){if(this.hasVideo=!0,"receiver"==this.type){var t=a(e.bytesReceived/1024);this.video.bitrate=a((t-(this.video.bytesReceived||0))/l.GENERATE_LOG_PERIOD),this.video.bytesReceived=t,e.googCurrentDelayMs&&(this.video.currentDelayMs=e.googCurrentDelayMs),e.googDecodeMs&&(this.video.decodeMs=e.googDecodeMs),e.googCodecName&&(this.video.codecName=e.googCodecName),e.googFrameRateDecoded?this.video.fps=e.googFrameRateDecoded:e.framerateMean&&(this.video.fps=e.framerateMean),e.googFrameHeightReceived&&(this.video.height=e.googFrameHeightReceived),e.googFrameWidthReceived&&(this.video.width=e.googFrameWidthReceived),e.googJitterBufferMs?this.video.jitter=e.googJitterBufferMs:e.jitter&&(this.video.jitter=e.jitter),e.packetsLost&&e.packetsReceived&&(this.video.packetsLost=e.packetsLost,this.video.packetsReceived=e.packetsReceived,this.video.packetsReceived>0?this.video.packetsLossRate=(this.video.packetsLost/this.video.packetsReceived*100).toFixed(2):this.video.packetsLossRate=0),this.video.fps&&(this.videoDetecter.addVideoInfo(null,null,null,null,this.video.fps),this.video.mos=this.videoDetecter.getSubjectQuality())}if("sender"==this.type){var n=a(e.bytesSent/1024);this.video.bitrate=a((n-(this.video.bytesSent||0))/l.GENERATE_LOG_PERIOD),this.video.bytesSent=n,e.googFrameRateSent&&(this.video.fps=e.googFrameRateSent),e.googCodecName&&(this.video.codecName=e.googCodecName),e.googAvgEncodeMs&&(this.video.encodeMs=e.googAvgEncodeMs),e.googFrameRateInput&&this.videoDetecter.setStandardFps(e.googFrameRateInput),e.googRtt&&(this.video.rtt=e.rtt),e.googFrameHeightSent&&(this.video.height=e.googFrameHeightSent),e.googFrameWidthSent&&(this.video.width=e.googFrameWidthSent),this.video.fps&&(this.videoDetecter.addVideoInfo(null,null,null,null,this.video.fps,this.video.rtt),this.video.mos=this.videoDetecter.getSubjectQuality(),this.videoDetecter.getRttQuality())}this.video.bitrate=this.video.bitrate>0?this.video.bitrate:0}},{key:"fetchAudioState",value:function(e){if(this.hasAudio=!0,"receiver"==this.type){var t=a(e.bytesReceived/1024);this.audio.bitrate=a((t-(this.audio.bytesReceived||0))/l.GENERATE_LOG_PERIOD),this.audio.bytesReceived=t,e.googCurrentDelayMs&&(this.audio.currentDelayMs=e.googCurrentDelayMs),e.googCodecName&&(this.audio.codecName=e.googCodecName),e.audioOutputLevel&&(this.audio.volumeLevel=e.audioOutputLevel),e.googJitterBufferMs?this.audio.jitter=e.googJitterBufferMs:e.jitter&&(this.audio.jitter=e.jitter),e.packetsReceived&&e.packetsLost&&(this.audio.packetsLost=e.packetsLost,this.audio.packetsReceived=e.packetsReceived,this.audio.packetsReceived>0?this.audio.packetsLossRate=(this.audio.packetsLost/this.audio.packetsReceived*100).toFixed(2):this.audio.packetsLossRate=0)}if("sender"==this.type){var n=a(e.bytesSent/1024);this.audio.bitrate=a((n-(this.audio.bytesSent||0))/l.GENERATE_LOG_PERIOD),this.audio.bytesSent=n,e.googCodecName&&(this.audio.codecName=e.googCodecName)}this.audio.bitrate=this.audio.bitrate>0?this.audio.bitrate:0}},{key:"updateClientLog",value:function(){var e=this;e.clientLog={net:e.net,videoBwe:e.videoBwe,video:e.video,audio:e.audio,bitrate:a(e.video.bitrate+e.audio.bitrate)},"sender"==e.type?e.clientLog.bytes=a(e.video.bytesSent+e.audio.bytesSent):"receiver"==e.type&&(e.clientLog.bytes=a(e.video.bytesReceived+e.audio.bytesReceived)),this.hasAudio||this.hasVideo?e.clientLog.bytes>0&&e.emit("client_log",JSON.parse(JSON.stringify(e.clientLog))):(e.clientLog.net.bytesReceived&&e.clientLog.net.bytesReceived>0||e.clientLog.net.bytesSent&&e.clientLog.net.bytesSent>0)&&e.emit("client_log",JSON.parse(JSON.stringify(e.clientLog)))}},{key:"updateServerLog",value:function(){var e=this;e.serverLog={video:{bitrate:e.video.bitrate||0},audio:{bitrate:e.audio.bitrate||0}},"sender"==e.type&&(e.serverLog.video.bytesSent=e.video.bytesSent||0,e.serverLog.audio.bytesSent=e.audio.bytesSent||0),"receiver"==e.type&&(e.serverLog.video.bytesReceived=e.video.bytesReceived||0,e.serverLog.audio.bytesReceived=e.audio.bytesReceived||0,e.audio.hasOwnProperty("packetsLossRate")&&(e.serverLog.audio.packetsLossRate=e.audio.packetsLossRate||0),e.video.hasOwnProperty("packetsLossRate")&&(e.serverLog.video.packetsLossRate=e.video.packetsLossRate||0)),e.emit("server_log",JSON.parse(JSON.stringify(e.serverLog)))}},{key:"stop",value:function(){clearInterval(this.generateTimer),clearInterval(this.clientTimer),clearInterval(this.serverTimer),this.isStart=!1}}]),t}(u);e.exports=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.TAG="MOS",this.videoinfo_list=[],this.fps_window=30,this.totalPauseTimes=0,this.frameJitterTimes=0,this.count=0,this.avg=.1,this.role=t,this.standardFps=null}return r(e,[{key:"addVideoInfo",value:function(e,t,n,r,i,a){var s=new o(e,t,n,r,i,a);this.videoinfo_list.push(s)}},{key:"getSubjectQuality",value:function(){var e=0,t=0,n=void 0,r=void 0;return this.standardFps?(r=this.getFpsStdDev()/this.standardFps,this.avg<this.standardFps/5*4&&(e=1),this.avg<this.standardFps/2&&(t=1)):(r=this.getFpsStdDev()/this.avg,this.avg<10&&(e=1),this.avg<5&&(t=1)),n=r<.06?5-2*e-2*t:r<.12?4-e-2*t:r<.27?3-e-t:r<.64?2-t:1}},{key:"getFpsStdDev",value:function(){var e=0,t=0,n=void 0,r=0,i=void 0,o=void 0,a=void 0;if(this.count=this.videoinfo_list.length,n=this.count-1,n<r)return 1e4;if(this.count<this.fps_window+r){for(o=r;o<=n;++o)e+=this.videoinfo_list[o].fps;for(this.avg=e/(this.count-r),o=r;o<=n;++o)t+=Math.pow(this.videoinfo_list[o].fps-this.avg,2);i=t/(this.count-r)}else{for(o=n-(this.fps_window-1);o<=n;++o)e+=this.videoinfo_list[o].fps;for(this.avg=e/this.fps_window,o=n-(this.fps_window-1);o<=n;++o)t+=Math.pow(this.videoinfo_list[o].fps-this.avg,2);i=t/this.fps_window}return a=Math.sqrt(i)}},{key:"getRttQuality",value:function(){var e=void 0,t=e/this.videoinfo_list.length,n=0;return t/2>=500?n=1:t/2>=400?n=2:t/2>=300?n=3:t/2>=200?n=4:t/2<200&&(n=5),n}},{key:"setStandardFps",value:function(e){this.standardFps=e}}]),e}(),o=function e(t,r,i,o,a,s){n(this,e),this.jitter=parseInt(t),this.packetsLossRate=parseFloat(r),this.width=parseInt(i),this.height=parseInt(o),this.fps=parseInt(a),this.rtt=parseInt(s)};e.exports=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"mergeConstraints",value:function(e,t){if(!e||!t)return e||t;var n=e;for(var r in t)n[r]=t[r];return n}},{key:"iceCandidateType",value:function(e){return e.split(" ")[7]}},{key:"maybeSetOpusOptions",value:function(e,t){return"true"===t.opusStereo?e=setCodecParam(e,"opus/48000","stereo","1"):"false"===t.opusStereo&&(e=removeCodecParam(e,"opus/48000","stereo")),"true"===t.opusFec?e=setCodecParam(e,"opus/48000","useinbandfec","1"):"false"===t.opusFec&&(e=removeCodecParam(e,"opus/48000","useinbandfec")),"true"===t.opusDtx?e=setCodecParam(e,"opus/48000","usedtx","1"):"false"===t.opusDtx&&(e=removeCodecParam(e,"opus/48000","usedtx")),t.opusMaxPbr&&(e=setCodecParam(e,"opus/48000","maxplaybackrate",t.opusMaxPbr)),e}},{key:"maybeSetAudioSendBitRate",value:function(e,t){return t.audioSendBitrate?(console.log("Prefer audio send bitrate: "+t.audioSendBitrate),preferBitRate(e,t.audioSendBitrate,"audio")):e}},{key:"maybeSetAudioReceiveBitRate",value:function(e,t){return t.audioRecvBitrate?(console.log("Prefer audio receive bitrate: "+t.audioRecvBitrate),preferBitRate(e,t.audioRecvBitrate,"audio")):e}},{key:"maybeSetVideoSendBitRate",value:function(t,n){return n.videoSendBitrate?e.preferBitRate(t,n.videoSendBitrate,"video"):t}},{key:"maybeSetVideoReceiveBitRate",value:function(e,t){return t.videoRecvBitrate?(console.log("Prefer video receive bitrate: "+t.videoRecvBitrate),preferBitRate(e,t.videoRecvBitrate,"video")):e}},{key:"preferBitRate",value:function(t,n,r){var i=t.split("\r\n"),o=e.findLine(i,"m=",r);if(null===o)return console.log("Failed to add bandwidth line to sdp, as no m-line found"),t;var a=e.findLineInRange(i,o+1,-1,"m=");null===a&&(a=i.length);var s=e.findLineInRange(i,o+1,a,"c=");if(null===s)return console.log("Failed to add bandwidth line to sdp, as no c-line found"),t;var c=e.findLineInRange(i,s+1,a,"b=AS");c&&i.splice(c,1);var u="b=AS:"+n;return i.splice(s+1,0,u),t=i.join("\r\n")}},{key:"maybeSetVideoSendInitialBitRate",value:function(t,n){var r=n.videoSendInitialBitrate;if(!r)return t;var i=r,o=n.videoSendBitrate;o&&(r>o&&(console.log("Clamping initial bitrate to max bitrate of "+o+" kbps."),r=o,n.videoSendInitialBitrate=r),i=o);var a=t.split("\r\n"),s=e.findLine(a,"m=","video");if(null===s)return console.log("Failed to find video m-line"),t;var c=n.videoRecvCodec;return t=setCodecParam(t,c,"x-google-min-bitrate",n.videoSendInitialBitrate.toString()),t=setCodecParam(t,c,"x-google-max-bitrate",i.toString())}},{key:"removePayloadTypeFromMline",value:function(e,t){e=e.split(" ");for(var n=0;n<e.length;++n)e[n]===t.toString()&&e.splice(n,1);return e.join(" ")}},{key:"removeCodecByName",value:function(t,n){var r=e.findLine(t,"a=rtpmap",n);if(null===r)return t;var i=getCodecPayloadTypeFromLine(t[r]);t.splice(r,1);var o=e.findLine(t,"m=","video");return null===o?t:(t[o]=removePayloadTypeFromMline(t[o],i),t)}},{key:"removeCodecByPayloadType",value:function(t,n){var r=e.findLine(t,"a=rtpmap",n.toString());if(null===r)return t;t.splice(r,1);var i=e.findLine(t,"m=","video");return null===i?t:(t[i]=removePayloadTypeFromMline(t[i],n),t)}},{key:"maybeRemoveVideoFec",value:function(t,n){if("false"!==n.videoFec)return t;var r=t.split("\r\n"),i=e.findLine(r,"a=rtpmap","red");if(null===i)return t;var o=getCodecPayloadTypeFromLine(r[i]);if(r=removeCodecByPayloadType(r,o),r=removeCodecByName(r,"ulpfec"),i=e.findLine(r,"a=fmtp",o.toString()),null===i)return t;var a=parseFmtpLine(r[i]),s=a.pt;return null===s?t:(r.splice(i,1),r=removeCodecByPayloadType(r,s),r.join("\r\n"))}},{key:"maybePreferAudioSendCodec",value:function(t,n){return e.maybePreferCodec(t,"audio","send",n.audioSendCodec)}},{key:"maybePreferAudioReceiveCodec",value:function(t,n){return e.maybePreferCodec(t,"audio","receive",n.audioRecvCodec)}},{key:"maybePreferVideoSendCodec",value:function(t,n){return e.maybePreferCodec(t,"video","send",n.videoSendCodec)}},{key:"maybePreferVideoReceiveCodec",value:function(t,n){return e.maybePreferCodec(t,"video","receive",n.videoRecvCodec)}},{key:"maybePreferCodec",value:function(t,n,r,i){var o=n+" "+r+" codec";if(!i)return console.log("No preference on "+o+"."),t;var a=t.split("\r\n"),s=e.findLine(a,"m=",n);if(null===s)return t;var c=e.getCodecPayloadType(a,i);return c&&(a[s]=e.setDefaultCodec(a[s],c)),t=a.join("\r\n")}},{key:"setCodecParam",value:function(t,n,r,i){var o=t.split("\r\n"),a=e.findFmtpLine(o,n),s={};if(null===a){var c=e.findLine(o,"a=rtpmap",n);if(null===c)return t;var u=e.getCodecPayloadTypeFromLine(o[c]);s.pt=u.toString(),s.params={},s.params[r]=i,o.splice(c+1,0,e.writeFmtpLine(s))}else s=e.parseFmtpLine(o[a]),s.params[r]=i,o[a]=e.writeFmtpLine(s);return t=o.join("\r\n")}},{key:"removeCodecParam",value:function(e,t,n){var r=e.split("\r\n"),i=findFmtpLine(r,t);if(null===i)return e;var o=parseFmtpLine(r[i]);delete o.params[n];var a=writeFmtpLine(o);return null===a?r.splice(i,1):r[i]=a,e=r.join("\r\n")}},{key:"parseFmtpLine",value:function(e){var t={},n=e.indexOf(" "),r=e.substring(n+1).split("; "),i=new RegExp("a=fmtp:(\\d+)"),o=e.match(i);if(!o||2!==o.length)return null;t.pt=o[1];for(var a={},s=0;s<r.length;++s){var c=r[s].split("=");2===c.length&&(a[c[0]]=c[1])}return t.params=a,t}},{key:"writeFmtpLine",value:function(e){if(!e.hasOwnProperty("pt")||!e.hasOwnProperty("params"))return null;var t=e.pt,n=e.params,r=[],i=0;for(var o in n)r[i]=o+"="+n[o],++i;return 0===i?null:"a=fmtp:"+t.toString()+" "+r.join("; ")}},{key:"findFmtpLine",value:function(t,n){var r=getCodecPayloadType(t,n);return r?e.findLine(t,"a=fmtp:"+r.toString()):null}},{key:"findLine",value:function(t,n,r){return e.findLineInRange(t,0,-1,n,r)}},{key:"findLineInRange",value:function(e,t,n,r,i){for(var o=n!==-1?n:e.length,a=t;a<o;++a)if(0===e[a].indexOf(r)&&(!i||e[a].toLowerCase().indexOf(i.toLowerCase())!==-1))return a;
return null}},{key:"getCodecPayloadType",value:function(t,n){var r=e.findLine(t,"a=rtpmap",n);return r?e.getCodecPayloadTypeFromLine(t[r]):null}},{key:"getCodecPayloadTypeFromLine",value:function(e){var t=new RegExp("a=rtpmap:(\\d+) [a-zA-Z0-9-]+\\/\\d+"),n=e.match(t);return n&&2===n.length?n[1]:null}},{key:"setDefaultCodec",value:function(e,t){var n=e.split(" "),r=n.slice(0,3);r.push(t);for(var i=3;i<n.length;i++)n[i]!==t&&r.push(n[i]);return r.join(" ")}},{key:"updateBandwidthRestriction",value:function(t,n){return e.maybeSetVideoSendBitRate(t,{videoSendBitrate:n})}},{key:"updateVideoBandwidth",value:function(t,n){return e.preferBitRate(t,n,"video")}},{key:"updateAudioBandwidth",value:function(t,n){return e.preferBitRate(t,n,"audio")}}]),e}();e.exports=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"sliceFile",value:function e(t,n,r){var i=16384,e=function e(o){var a=new FileReader;a.onload=function(){return function(a){if(n(a.target.result),t.size>o+a.target.result.byteLength){window.setTimeout(e,0,o+i);var s=(o+a.target.result.byteLength)/t.size;r(s)}}}(t);var s=t.slice(o,o+i);a.readAsArrayBuffer(s)};e(0)}},{key:"wrapperFile",value:function(e){var t=new Blob(e.buffer,{type:e.type});return t.name=e.name,{name:t.name,save:function(){var e=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=e,n.download=t.name,n.click(),setTimeout(function(){window.URL.revokeObjectURL(e)},100)},size:t.size,type:t.type,blob:t,release:function(){t=null,this.blob=null}}}}]),e}();e.exports=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.tag="quality",this.firstType=t.firstType,this.period=t.period,this.k=t.k,this.counter=0,this.mosArray=[],this.videoBandwidthLimit=(e.BAND_WIDTH_MAX+e.BAND_WIDTH_MIN)/2,this.continuousExcellencePoint=0,this.changeBandwidth=function(e){RTCat.D(this.tag,"<changeBandwidth>",e)},this.changeType="","audio"==this.firstType&&(this.changeType="video"),"video"==this.firstType&&(this.changeType="audio")}return r(e,[{key:"addVideoQuality",value:function(e){this.counter++,this.mosArray.push(e),this.counter==this.period&&(this.handleMos(),this.counter=0)}},{key:"handleMos",value:function(){for(var t=this.mosArray.length,n=1,r=0,i=1;i<=this.period;i++)r+=this.mosArray[t-i];var o=r/this.period;if(o<e.STANDARD_MOS){this.continuousExcellencePoint=0;var a=o-e.STANDARD_MOS;n=Math.pow(2,this.k*a)}else o==e.STANDARD_MOS?(this.continuousExcellencePoint++,n=1):(this.continuousExcellencePoint++,this.continuousExcellencePoint==e.UP_COUNT?(this.continuousExcellencePoint=0,n=Math.pow(2,this.k)):n=1);1!=n&&(this.videoBandwidthLimit=this.videoBandwidthLimit*n,this.videoBandwidthLimit>e.BAND_WIDTH_MAX&&(this.videoBandwidthLimit=e.BAND_WIDTH_MAX),this.videoBandwidthLimit<e.BAND_WIDTH_MIN&&(this.videoBandwidthLimit=e.BAND_WIDTH_MIN),RTCat.D(this.tag,"<handleMos>","Type: "+this.changeType+" Gain: "+n+" Bandwidth: "+this.videoBandwidthLimit+" AvgMos: "+o),this.changeBandwidth(this.videoBandwidthLimit,this.changeType))}}]),e}();i.BAND_WIDTH_MAX=2e4,i.BAND_WIDTH_MIN=50,i.STANDARD_MOS=3,i.UP_COUNT=3,e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c=n(326).EventEmitter,u=n(350),f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.set(n,{}),s.get(n)._handler=new u(e),s.get(n)._handler.init(),s.get(n)._handler.eventHandler=function(e,t){switch(t.length){case 0:n.emit(e);break;case 1:n.emit(e,t[0]);break;case 2:n.emit(e,t[0],t[1]);break;default:n.emit(e)}},n}return o(t,e),a(t,[{key:"candidate",value:function(e){s.get(this)._handler.addCandidate(e)}},{key:"response",value:function(){s.get(this)._handler.response()}},{key:"responseFile",value:function(){s.get(this)._handler.responseFile()}},{key:"getId",value:function(){return s.get(this)._handler.id}},{key:"getSender",value:function(){return this.getSenderToken()}},{key:"getSenderToken",value:function(){return s.get(this)._handler.opposite}},{key:"getRole",value:function(){return s.get(this)._handler.role}},{key:"getAttr",value:function(){return s.get(this)._handler.attr}},{key:"getStream",value:function(){return s.get(this)._handler.stream}},{key:"getFileList",value:function(){return s.get(this)._handler.fileList}},{key:"close",value:function(){s.get(this)._handler.close()}},{key:"enableVideo",value:function(){s.get(this)._handler.setVideoEnabled(!0)}},{key:"enableAudio",value:function(){s.get(this)._handler.setAudioEnabled(!0)}},{key:"disableVideo",value:function(){s.get(this)._handler.setVideoEnabled(!1)}},{key:"disableAudio",value:function(){s.get(this)._handler.setAudioEnabled(!1)}},{key:"updateRemoteSdp",value:function(e){s.get(this)._handler.setRemoteSdp(e)}},{key:"updatePeer",value:function(e){s.get(this)._handler.updatePeer(e)}}]),t}(c);e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(342),u=n(351),f=n(347),l=n(311).Peer,d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.role="receiver",n.id=e.channelId,n.opposite=e.from,n.sdp=e.sdp,n.peer=new l({peerConfig:n.peerConfig,isNegoIce:!1}),n}return o(t,e),a(t,[{key:"init",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.currentFile={name:null,size:0,type:null,buffer:[]},this.fileList={},this.peer.onstream=function(t){e.stream=new u(t),e.eventHandler("stream",[e.stream])}}},{key:"responseFileInternal",value:function(e,t){var n={type:"response",response:"file",content:{name:e,purpose:t}};this.msgChannel&&this.msgChannel.sendJSON(n)}},{key:"responseFile",value:function(){this.currentFile.name&&this.responseFileInternal(this.currentFile.name,"agree")}},{key:"response",value:function(){function e(e){t.handshake=!0,t.onHandShake();var n={to:t.opposite,sdp:e,channelId:t.id};t.eventHandler("_answer",[n])}var t=this;t.rcq=[];var n={};n[t.channelLabel.Message]=t.getChannelHandler(t.channelLabel.Message),n[t.channelLabel.File]=t.getChannelHandler(t.channelLabel.File),this.data?this.peer.answer(this.sdp,null,n,c.codecHandler).then(e):this.peer.answer(this.sdp,null,null,c.codecHandler).then(e)}},{key:"channelOnMessage",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"channelOnMessage",this).call(this,e,n),e==this.channelLabel.Message?this.messageChannelOnMessage(n):this.fileChannelOnMessage(n)}},{key:"messageChannelOnMessage",value:function(e){var t=JSON.parse(e);switch(t.type){case"message":this.eventHandler("message",[t.content]);break;case"video":break;case"file":RTCat.I(this.tag,"<onmessage>","receive file(name:"+t.name+") request"),this.currentFile={buffer:[],name:t.file.name,size:t.file.size,type:t.file.type,receiveSize:0},this.eventHandler("receive_file",[this.currentFile.name])}}},{key:"fileChannelOnMessage",value:function(e){this.currentFile.name&&(this.currentFile.buffer.push(e),this.currentFile.receiveSize+=e.byteLength,this.currentFile.receiveSize==this.currentFile.size&&(this.responseFileInternal(this.currentFile.name,"finish"),this.eventHandler("file",[f.wrapperFile(this.currentFile)]),this.fileList[this.currentFile.name]=Object.assign({},this.currentFile),this.currentFile={name:null,size:0,type:null,buffer:[]}))}},{key:"close",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"close",this).call(this),this.stream&&this.stream.stop()}},{key:"setVideoEnabled",value:function(e){this.stream&&this.stream.getStreamWrapper().setVideoEnabled(e)}},{key:"setAudioEnabled",value:function(e){this.stream&&this.stream.getStreamWrapper().setAudioEnabled(e)}},{key:"setRemoteSdp",value:function(e){this.sdp=e}},{key:"updatePeer",value:function(e){this.sdp=e,this.stream&&this.stream.stop(),this.peer.onclose=function(e){},this.peer.close(),this.peer=new l({peerConfig:this.peerConfig,isNegoIce:!1});try{this.webrtcLog.stop(),this.webrtcLog=null}catch(e){}this.init(),this.response()}}]),t}(c);e.exports=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(325),c=n(352),u=n(335),f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{stream:e,local:!1}));return n.vc_plugin=c(),n.ad_plugin=u(),n.ad_plugin.data.onvolume=function(e){n.emit("volume",e)},n.load(n.vc_plugin),n.load(n.ad_plugin),n}return o(t,e),a(t,[{key:"detectVolume",value:function(e){this.ad_plugin.do(e)}},{key:"changeOutputDevice",value:function(e){this.getPlayer().audioOutput(e)}},{key:"mute",value:function(){this.getPlayer().mute(!0)}},{key:"unmute",value:function(){this.getPlayer().mute(!1)}},{key:"vc",value:function(){}}]),t}(s);e.exports=f},function(e,t,n){"use strict";function r(e,t){var n=this;switch(e){case"start":var r=1024;this.data.audioContext=new AudioContext;var i=2,o=.5,a=function(e){for(var t=new Float32Array(e),n=0;n<e;n++)t[n]=.5*(1-Math.cos(2*Math.PI*n/(e-1)));return t},s=function(e,t,n){return e+(t-e)*n},c=function(){n.data.process&&n.data.process.disconnect(),n.data.process=n.data.audioContext.createScriptProcessor(r,1,1),n.data.process.buffer=new Float32Array(2*r),n.data.process.grainWindow=a(r),n.data.process.onaudioprocess=function(e){for(var t=e.inputBuffer.getChannelData(0),n=e.outputBuffer.getChannelData(0),a=0;a<t.length;a++)t[a]*=this.grainWindow[a],this.buffer[a]=this.buffer[a+r],this.buffer[a+r]=0;for(var c=new Float32Array(2*r),u=0,f=0;u<r;u++,f+=i){var l=Math.floor(f)%r,d=t[l],p=t[(l+1)%r];c[u]+=s(d,p,f%1)*this.grainWindow[u]}for(var h=0;h<r;h+=Math.round(r*(1-o)))for(var v=0;v<=r;v++)this.buffer[h+v]+=c[v];for(var y=0;y<r;y++)n[y]=this.buffer[y]}};this.data.source=this.data.audioContext.createMediaStreamSource(t.mediaStream),c(),this.data.source.connect(n.data.process),n.data.process.connect(this.data.audioContext.destination);break;case"stop":this.data.process.disconnect()}}function i(){}var o=n(331),a={audioContext:null,source:null,process:null};e.exports=function(e){return new o("vc","0.0.1",o.Type.STREAM,r,i,a)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(311).Connector,s=n(328),c=262144,u=function(){function e(t){r(this,e),this.connector=new a(t),this.onerror=function(e){},this.onin=function(e){},this.onconnected=function(e){},this.onout=function(e){},this.onremote=function(e){},this.onlocal=function(e){},this.onmessage=function(e){},this.ondisconnect=function(e){}}return o(e,[{key:"checkin",value:function(){this.send(e.C2S.JOIN,{platform:{}})}},{key:"send",value:function(e,t){var n={eventName:e};t&&(n.data=t),this.connector.sendJSONWithHandler(n,null)}},{key:"sendMessage",value:function(t,n){var r=this,o=function(){r.send(e.C2S.MESSAGE,{message:n,to:t})};"object"===("undefined"==typeof n?"undefined":i(n))?JSON.stringify(n).length<c?o():this.onerror(new s(20005,(new Error).stack)):"string"==typeof n?n.length<c?o():this.onerror(new s(20005,(new Error).stack)):this.onerror(new s(20004,(new Error).stack))}},{key:"broadcastMessage",value:function(t){var n=this,r=function(){n.send(e.C2S.BROADCAST,{message:t})};"object"===("undefined"==typeof t?"undefined":i(t))?JSON.stringify(t).length<c?r():this.onerror(new s(20005,(new Error).stack)):t.length?t.length<c?r():this.onerror(new s(20005,(new Error).stack)):this.onerror(new s(20004,(new Error).stack))}}]),e}();u.C2S={JOIN:"__join",MESSAGE:"__message",BROADCAST:"__broadcast",LOG:"__log",ANSWER:"__answer",OFFER:"__offer",ICE:"__ice",ICE_COMPLETE:"__icecomplete",FETCH:"__fetch",LINK:"__link",UNLINK:"__unlink"},u.S2C={JOIN:"_join",PEERS:"_peers",REMOVE_PEER:"_remove_peer",OFFER:"_offer",ANSWER:"_answer",ICE:"_ice",MESSAGE:"_message",ERROR:"_error",ICE_COMPLETE:"_icecomplete"},e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(339),c=n(340),u=n(349),f=n(328),l=n(353),d=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.encrypt=n,o.state=0,o.local={},o.remote={},o.wits={},o.iceServers=[],o}return o(t,e),a(t,[{key:"connect",value:function(){var e=this;this.connector.onopen=function(){e.checkin()},this.connector.onmessage=function(t){var n=(t.eventName,t.data);switch(t.eventName){case l.S2C.JOIN:e.wits[n.tokenId]=new s(n.tokenId),e.onin(e.wits[n.tokenId].id);break;case l.S2C.PEERS:e.iceServers=n.iceServers;var r=n.connections,i=[];for(var o in r)e.wits[r[o]]=new s(r[o]),i.push(r[o]);e.onconnected(i);break;case l.S2C.REMOVE_PEER:var a=n.tokenId;for(var c in e.local[a]){var d=e.local[a][c];d.close()}for(var p in e.remote[a]){var h=e.remote[a][p];h.close()}e.onout(e.wits[a].id),delete e.wits[a],delete e.remote[a],delete e.local[a];break;case l.S2C.OFFER:var v=e,y={};n.config&&(y=n.config),y.from=n.from,y.sdp=n.sdp,y.channelId=n.channelId,y.constraints={iceServers:e.iceServers};var g=new u(y);g.on("_log",function(e){v.send(l.C2S.LOG,e)}),g.on("_answer",function(e){v.send(l.C2S.ANSWER,e)}),g.on("_ice",function(e){v.send(l.C2S.ICE,e)}),e.remote[n.from]=e.remote[n.from]||{},e.remote[n.from][n.channelId]=g,RTCat.D(e.remote),e.onremote(g);break;case l.S2C.ANSWER:var m=e.local[n.channelId];m.receive(n.sdp),e.onlocal(m);break;case l.S2C.ICE:var b=void 0;"answer"==n.type?b=e.local[n.channelId]:"offer"==n.type&&e.remote[n.from]&&(b=e.remote[n.from][n.channelId]),b&&b.candidate(n.candidate);break;case l.S2C.MESSAGE:e.onmessage({from:n.from,message:n.message});break;case l.S2C.ERROR:e.onerror(new f(20003,(new Error).stack,n.error))}},this.connector.onerror=function(t){e.onerror(new f(20002,(new Error).stack,data.error))},this.connector.onclose=function(){e.state=0,e.release(),e.ondisconnect()},this.connector.connect()}},{key:"link",value:function(e){var t=e.stream,n=void 0!==t&&t;if(n){var r=this,i={stream:n,data:!1};i.constraints={iceServers:r.iceServers};var o=new c(i);o.on("_log",function(e){r.send(l.C2S.LOG,e)}),o.on("_offer",function(e){r.send(l.C2S.LINK,e)}),o.on("_ice",function(e){r.send(l.C2S.ICE,e)}),this.local[o.getId()]=o}else this.onerror(new f(20006,(new f).stack))}},{key:"unlink",value:function(){this.send(l.C2S.UNLINK)}},{key:"broadcast",value:function(e){var t=e.sender,n=void 0===t?null:t;for(var r in this.wits)this.unicast({sender:n,to:this.wits[r].id})}},{key:"unicast",value:function(e){var t=e.sender,n=void 0===t?null:t,r=e.to,i=void 0===r?"":r;this.wits[i]&&n&&this.send(l.C2S.FETCH,{channelId:n.getId(),to:i})}},{key:"disconnect",value:function(){this.socket.close()}},{key:"release",value:function(){if(this.remote){for(var e in this.remote)for(var t in this.remote[e])this.remote[e][t].close();this.remote={}}if(this.local){for(var n in this.local)this.local[n].close();this.local={}}this.wits&&(this.wits={})}}]),t}(l);e.exports=d},function(e,t){"use strict";e.exports={quality:{enable:!0,firstType:"audio",period:3,k:1}}}])});