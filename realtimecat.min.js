/*!
 * RealTimeCat JavaScript SDK v0.6.0-alpha
 * https://shishimao.com
 * Copyright 2015-2017 北京乐塔克科技有限公司
 * Date: 2017-09-21T09:18:09.028Z
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RTCat=t():e.RTCat=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),n(299),e.exports=n(312)},function(e,t,n){(function(e){"use strict";function t(e,t,n){e[t]||Object[r](e,t,{writable:!0,configurable:!0,value:n})}if(n(2),n(293),n(296),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var r="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,n){"use strict";n(3),n(52),n(53),n(54),n(55),n(57),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(70),n(72),n(74),n(76),n(79),n(80),n(81),n(85),n(87),n(89),n(92),n(93),n(94),n(95),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(105),n(106),n(107),n(109),n(110),n(111),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(131),n(132),n(136),n(137),n(138),n(139),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(159),n(160),n(166),n(167),n(169),n(170),n(171),n(175),n(176),n(177),n(178),n(179),n(181),n(182),n(183),n(184),n(187),n(189),n(190),n(191),n(193),n(195),n(197),n(198),n(199),n(201),n(202),n(203),n(204),n(211),n(214),n(215),n(217),n(218),n(221),n(222),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(244),n(245),n(246),n(247),n(248),n(249),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(260),n(261),n(263),n(264),n(265),n(266),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(291),n(292),e.exports=n(9)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(4),o=n(5),a=n(6),s=n(8),c=n(18),u=n(22).KEY,f=n(7),l=n(23),d=n(24),p=n(19),h=n(25),v=n(26),y=n(27),m=n(29),g=n(42),b=n(45),S=n(12),w=n(32),_=n(16),k=n(17),C=n(46),T=n(49),E=n(51),P=n(11),O=n(30),R=E.f,x=P.f,I=T.f,L=i.Symbol,M=i.JSON,A=M&&M.stringify,j="prototype",D=h("_hidden"),N=h("toPrimitive"),F={}.propertyIsEnumerable,B=l("symbol-registry"),U=l("symbols"),V=l("op-symbols"),G=Object[j],W="function"==typeof L,H=i.QObject,z=!H||!H[j]||!H[j].findChild,J=a&&f(function(){return 7!=C(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=R(G,t);r&&delete G[t],x(e,t,n),r&&e!==G&&x(G,t,r)}:x,q=function(e){var t=U[e]=C(L[j]);return t._k=e,t},Y=W&&"symbol"==r(L.iterator)?function(e){return"symbol"==("undefined"==typeof e?"undefined":r(e))}:function(e){return e instanceof L},Q=function(e,t,n){return e===G&&Q(V,t,n),S(e),t=_(t,!0),S(n),o(U,t)?(n.enumerable?(o(e,D)&&e[D][t]&&(e[D][t]=!1),n=C(n,{enumerable:k(0,!1)})):(o(e,D)||x(e,D,k(1,{})),e[D][t]=!0),J(e,t,n)):x(e,t,n)},K=function(e,t){S(e);for(var n,r=g(t=w(t)),i=0,o=r.length;o>i;)Q(e,n=r[i++],t[n]);return e},X=function(e,t){return void 0===t?C(e):K(C(e),t)},$=function(e){var t=F.call(this,e=_(e,!0));return!(this===G&&o(U,e)&&!o(V,e))&&(!(t||!o(this,e)||!o(U,e)||o(this,D)&&this[D][e])||t)},Z=function(e,t){if(e=w(e),t=_(t,!0),e!==G||!o(U,t)||o(V,t)){var n=R(e,t);return!n||!o(U,t)||o(e,D)&&e[D][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=I(w(e)),r=[],i=0;n.length>i;)o(U,t=n[i++])||t==D||t==u||r.push(t);return r},te=function(e){for(var t,n=e===G,r=I(n?V:w(e)),i=[],a=0;r.length>a;)!o(U,t=r[a++])||n&&!o(G,t)||i.push(U[t]);return i};W||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function t(n){this===G&&t.call(V,n),o(this,D)&&o(this[D],e)&&(this[D][e]=!1),J(this,e,k(1,n))};return a&&z&&J(G,e,{configurable:!0,set:t}),q(e)},c(L[j],"toString",function(){return this._k}),E.f=Z,P.f=Q,n(50).f=T.f=ee,n(44).f=$,n(43).f=te,a&&!n(28)&&c(G,"propertyIsEnumerable",$,!0),v.f=function(e){return q(h(e))}),s(s.G+s.W+s.F*!W,{Symbol:L});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)h(ne[re++]);for(var ne=O(h.store),re=0;ne.length>re;)y(ne[re++]);s(s.S+s.F*!W,"Symbol",{for:function(e){return o(B,e+="")?B[e]:B[e]=L(e)},keyFor:function(e){if(Y(e))return m(B,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!W,"Object",{create:X,defineProperty:Q,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),M&&s(s.S+s.F*(!W||f(function(){var e=L();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Y(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&b(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,A.apply(M,r)}}}),L[j][N]||n(10)(L[j],N,L[j].valueOf),d(L,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t){"use strict";var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){"use strict";var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";e.exports=!n(7)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(4),i=n(9),o=n(10),a=n(18),s=n(20),c="prototype",u=function e(t,n,u){var f,l,d,p,h=t&e.F,v=t&e.G,y=t&e.S,m=t&e.P,g=t&e.B,b=v?r:y?r[n]||(r[n]={}):(r[n]||{})[c],S=v?i:i[n]||(i[n]={}),w=S[c]||(S[c]={});v&&(u=n);for(f in u)l=!h&&b&&void 0!==b[f],d=(l?b:u)[f],p=g&&l?s(d,r):m&&"function"==typeof d?s(Function.call,d):d,b&&a(b,f,d,t&e.U),S[f]!=d&&o(S,f,p),m&&w[f]!=d&&(w[f]=d)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){"use strict";var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";var r=n(11),i=n(17);e.exports=n(6)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var r=n(12),i=n(14),o=n(16),a=Object.defineProperty;t.f=n(6)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===("undefined"==typeof e?"undefined":n(e))?null!==e:"function"==typeof e}},function(e,t,n){"use strict";e.exports=!n(6)&&!n(7)(function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";var r=n(13),i=n(4).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(4),i=n(10),o=n(5),a=n(19)("src"),s="toString",c=Function[s],u=(""+c).split(s);n(9).inspectSource=function(e){return c.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||c.call(this)})},function(e,t){"use strict";var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";var r=n(21);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(19)("meta"),o=n(13),a=n(5),s=n(11).f,c=0,u=Object.isExtensible||function(){return!0},f=!n(7)(function(){return u(Object.preventExtensions({}))}),l=function(e){s(e,i,{value:{i:"O"+ ++c,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==("undefined"==typeof e?"undefined":r(e))?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[i].i},p=function(e,t){if(!a(e,i)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[i].w},h=function(e){return f&&v.NEED&&u(e)&&!a(e,i)&&l(e),e},v=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:p,onFreeze:h}},function(e,t,n){"use strict";var r=n(4),i="__core-js_shared__",o=r[i]||(r[i]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){"use strict";var r=n(11).f,i=n(5),o=n(25)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(23)("wks"),i=n(19),o=n(4).Symbol,a="function"==typeof o,s=e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=r},function(e,t,n){"use strict";t.f=n(25)},function(e,t,n){"use strict";var r=n(4),i=n(9),o=n(28),a=n(26),s=n(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){"use strict";e.exports=!1},function(e,t,n){"use strict";var r=n(30),i=n(32);e.exports=function(e,t){for(var n,o=i(e),a=r(o),s=a.length,c=0;s>c;)if(o[n=a[c++]]===t)return n}},function(e,t,n){"use strict";var r=n(31),i=n(41);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(5),i=n(32),o=n(36)(!1),a=n(40)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){"use strict";var r=n(33),i=n(35);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";var r=n(34);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){"use strict";var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){"use strict";e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(32),i=n(37),o=n(39);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),f=o(a,u);if(e&&n!=n){for(;u>f;)if(s=c[f++],s!=s)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){"use strict";var r=n(38),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){"use strict";var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(38),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(23)("keys"),i=n(19);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){"use strict";e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){"use strict";var r=n(30),i=n(43),o=n(44);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),c=o.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},function(e,t){"use strict";t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(34);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(12),i=n(47),o=n(41),a=n(40)("IE_PROTO"),s=function(){},c="prototype",u=function(){var e,t=n(15)("iframe"),r=o.length,i="<",a=">";for(t.style.display="none",n(48).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),u=e.F;r--;)delete u[c][o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=r(e),n=new s,s[c]=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){"use strict";var r=n(11),i=n(12),o=n(30);e.exports=n(6)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){"use strict";e.exports=n(4).document&&document.documentElement},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(32),o=n(50).f,a={}.toString,s="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return o(e)}catch(e){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?c(e):o(i(e))}},function(e,t,n){"use strict";var r=n(31),i=n(41).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(44),i=n(17),o=n(32),a=n(16),s=n(5),c=n(14),u=Object.getOwnPropertyDescriptor;t.f=n(6)?u:function(e,t){if(e=o(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r=n(8);r(r.S,"Object",{create:n(46)})},function(e,t,n){"use strict";var r=n(8);r(r.S+r.F*!n(6),"Object",{defineProperty:n(11).f})},function(e,t,n){"use strict";var r=n(8);r(r.S+r.F*!n(6),"Object",{defineProperties:n(47)})},function(e,t,n){"use strict";var r=n(32),i=n(51).f;n(56)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){"use strict";var r=n(8),i=n(9),o=n(7);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){"use strict";var r=n(58),i=n(59);n(56)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){"use strict";var r=n(35);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r=n(5),i=n(58),o=n(40)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";var r=n(58),i=n(30);n(56)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){"use strict";n(56)("getOwnPropertyNames",function(){return n(49).f})},function(e,t,n){"use strict";var r=n(13),i=n(22).onFreeze;n(56)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){"use strict";var r=n(13),i=n(22).onFreeze;n(56)("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){"use strict";var r=n(13),i=n(22).onFreeze;n(56)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){"use strict";var r=n(13);n(56)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){"use strict";var r=n(13);n(56)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){"use strict";var r=n(13);n(56)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){"use strict";var r=n(8);r(r.S+r.F,"Object",{assign:n(69)})},function(e,t,n){"use strict";var r=n(30),i=n(43),o=n(44),a=n(58),s=n(33),c=Object.assign;e.exports=!c||n(7)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=a(e),c=arguments.length,u=1,f=i.f,l=o.f;c>u;)for(var d,p=s(arguments[u++]),h=f?r(p).concat(f(p)):r(p),v=h.length,y=0;v>y;)l.call(p,d=h[y++])&&(n[d]=p[d]);return n}:c},function(e,t,n){"use strict";var r=n(8);r(r.S,"Object",{is:n(71)})},function(e,t){"use strict";e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(8);r(r.S,"Object",{setPrototypeOf:n(73).set})},function(e,t,n){"use strict";var r=n(13),i=n(12),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(20)(Function.call,n(51).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){"use strict";var r=n(75),i={};i[n(25)("toStringTag")]="z",i+""!="[object z]"&&n(18)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){"use strict";var r=n(34),i=n(25)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var r=n(8);r(r.P,"Function",{bind:n(77)})},function(e,t,n){"use strict";var r=n(21),i=n(13),o=n(78),a=[].slice,s={},c=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function r(){var i=n.concat(a.call(arguments));return this instanceof r?c(t,i.length,i):o(t,i,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){"use strict";e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){"use strict";var r=n(11).f,i=n(17),o=n(5),a=Function.prototype,s=/^\s*function ([^ (]*)/,c="name",u=Object.isExtensible||function(){return!0};c in a||n(6)&&r(a,c,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(s)[1];return o(e,c)||!u(e)||r(e,c,i(5,t)),t}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(13),i=n(59),o=n(25)("hasInstance"),a=Function.prototype;o in a||n(11).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){"use strict";var r=n(8),i=n(82);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){"use strict";var r=n(4).parseInt,i=n(83).trim,o=n(84),a=/^[\-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){"use strict";var r=n(8),i=n(35),o=n(7),a=n(84),s="["+a+"]",c="​",u=RegExp("^"+s+s+"*"),f=RegExp(s+s+"*$"),l=function(e,t,n){var i={},s=o(function(){return!!a[e]()||c[e]()!=c}),u=i[e]=s?t(d):a[e];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},d=l.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(f,"")),e};e.exports=l},function(e,t){"use strict";e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){"use strict";var r=n(8),i=n(86);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(4).parseFloat,i=n(83).trim;e.exports=1/r(n(84)+"-0")!==-(1/0)?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(34),a=n(88),s=n(16),c=n(7),u=n(50).f,f=n(51).f,l=n(11).f,d=n(83).trim,p="Number",h=r[p],v=h,y=h.prototype,m=o(n(46)(y))==p,g="trim"in String.prototype,b=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():d(t,3);var n,r,i,o=t.charCodeAt(0);if(43===o||45===o){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,c=t.slice(2),u=0,f=c.length;u<f;u++)if(a=c.charCodeAt(u),a<48||a>i)return NaN;return parseInt(c,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(m?c(function(){y.valueOf.call(n)}):o(n)!=p)?a(new v(b(t)),n,h):b(t)};for(var S,w=n(6)?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)i(v,S=w[_])&&!i(h,S)&&l(h,S,f(v,S));h.prototype=y,y.constructor=h,n(18)(r,p,h)}},function(e,t,n){"use strict";var r=n(13),i=n(73).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(8),i=n(38),o=n(90),a=n(91),s=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",l="0",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*u[n],u[n]=r%1e7,r=c(r/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=c(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+a.call(l,7-n.length)+n}return t},v=function e(t,n,r){return 0===n?r:n%2===1?e(t,n-1,r*t):e(t*t,n/2,r)},y=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(7)(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,r,s,c=o(this,f),u=i(e),m="",g=l;if(u<0||u>20)throw RangeError(f);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(t=y(c*v(2,69,1))-69,n=t<0?c*v(2,-t,1):c/v(2,t,1),n*=4503599627370496,t=52-t,t>0){for(d(0,n),r=u;r>=7;)d(1e7,0),r-=7;for(d(v(10,r,1),0),r=t-1;r>=23;)p(1<<23),r-=23;p(1<<r),d(1,1),p(2),g=h()}else d(0,n),d(1<<-t,0),g=h()+a.call(l,u);return u>0?(s=g.length,g=m+(s<=u?"0."+a.call(l,u-s)+g:g.slice(0,s-u)+"."+g.slice(s-u))):g=m+g,g}})},function(e,t,n){"use strict";var r=n(34);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){"use strict";var r=n(38),i=n(35);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){"use strict";var r=n(8),i=n(7),o=n(90),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){"use strict";var r=n(8),i=n(4).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Number",{isInteger:n(96)})},function(e,t,n){"use strict";var r=n(13),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t,n){"use strict";var r=n(8);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){"use strict";var r=n(8),i=n(96),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){"use strict";var r=n(8),i=n(86);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){"use strict";var r=n(8),i=n(82);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){"use strict";var r=n(8),i=n(104),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t){"use strict";e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=n(8),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(e,t,n){"use strict";var r=n(8),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){"use strict";var r=n(8),i=n(108);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){"use strict";e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){"use strict";var r=n(8),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){"use strict";var r=n(8),i=n(112);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t){"use strict";var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){"use strict";var r=n(8),i=n(108),o=Math.pow,a=o(2,-52),s=o(2,-23),c=o(2,127)*(2-s),u=o(2,-126),f=function(e){return e+1/a-1/a};r(r.S,"Math",{fround:function(e){var t,n,r=Math.abs(e),o=i(e);return r<u?o*f(r/u/s)*u*s:(t=(1+s/a)*r,n=t-(t-r),n>c||n!=n?o*(1/0):o*n)}})},function(e,t,n){"use strict";var r=n(8),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,c=0;a<s;)n=i(arguments[a++]),c<n?(r=c/n,o=o*r*r+1,c=n):n>0?(r=n/c,o+=r*r):o+=n;return c===1/0?1/0:c*Math.sqrt(o)}})},function(e,t,n){"use strict";var r=n(8),i=Math.imul;r(r.S+r.F*n(7)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(e,t){var n=65535,r=+e,i=+t,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{log1p:n(104)})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{sign:n(108)})},function(e,t,n){"use strict";var r=n(8),i=n(112),o=Math.exp;r(r.S+r.F*n(7)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){"use strict";var r=n(8),i=n(112),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){"use strict";var r=n(8),i=n(39),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var r=n(8),i=n(32),o=n(37);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(83)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(127)(!0);n(128)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(38),i=n(35);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):(o-55296<<10)+(a-56320)+65536)}}},function(e,t,n){"use strict";var r=n(28),i=n(8),o=n(18),a=n(10),s=n(5),c=n(129),u=n(130),f=n(24),l=n(59),d=n(25)("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",v="keys",y="values",m=function(){return this};e.exports=function(e,t,n,g,b,S,w){u(n,t,g);var _,k,C,T=function(e){if(!p&&e in R)return R[e];switch(e){case v:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",P=b==y,O=!1,R=e.prototype,x=R[d]||R[h]||b&&R[b],I=x||T(b),L=b?P?T("entries"):I:void 0,M="Array"==t?R.entries||x:x;if(M&&(C=l(M.call(new e)),C!==Object.prototype&&(f(C,E,!0),r||s(C,d)||a(C,d,m))),P&&x&&x.name!==y&&(O=!0,I=function(){return x.call(this)}),r&&!w||!p&&!O&&R[d]||a(R,d,I),c[t]=I,c[E]=m,b)if(_={values:P?I:T(y),keys:S?I:T(v),entries:L},w)for(k in _)k in R||o(R,k,_[k]);else i(i.P+i.F*(p||O),t,_);return _}},function(e,t){"use strict";e.exports={}},function(e,t,n){"use strict";var r=n(46),i=n(17),o=n(24),a={};n(10)(a,n(25)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(8),i=n(127)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(8),i=n(37),o=n(133),a="endsWith",s=""[a];r(r.P+r.F*n(135)(a),"String",{endsWith:function(e){var t=o(this,e,a),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),c=void 0===n?r:Math.min(i(n),r),u=String(e);return s?s.call(t,u,c):t.slice(c-u.length,c)===u}})},function(e,t,n){"use strict";var r=n(134),i=n(35);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){"use strict";var r=n(13),i=n(34),o=n(25)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){"use strict";var r=n(25)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){"use strict";var r=n(8),i=n(133),o="includes";r(r.P+r.F*n(135)(o),"String",{includes:function(e){return!!~i(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(8);r(r.P,"String",{repeat:n(91)})},function(e,t,n){"use strict";var r=n(8),i=n(37),o=n(133),a="startsWith",s=""[a];r(r.P+r.F*n(135)(a),"String",{
startsWith:function(e){var t=o(this,e,a),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return s?s.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(140)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";var r=n(8),i=n(7),o=n(35),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){"use strict";n(140)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(140)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(140)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(140)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(140)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(140)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){"use strict";n(140)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(140)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){"use strict";n(140)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(140)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(140)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(140)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(8),i=n(58),o=n(16);r(r.P+r.F*n(7)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){"use strict";var r=n(8),i=n(7),o=Date.prototype.getTime,a=function(e){return e>9?e:"0"+e};r(r.P+r.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}})},function(e,t,n){"use strict";var r=Date.prototype,i="Invalid Date",o="toString",a=r[o],s=r.getTime;new Date(NaN)+""!=i&&n(18)(r,o,function(){var e=s.call(this);return e===e?a.call(this):i})},function(e,t,n){"use strict";var r=n(25)("toPrimitive"),i=Date.prototype;r in i||n(10)(i,r,n(158))},function(e,t,n){"use strict";var r=n(12),i=n(16),o="number";e.exports=function(e){if("string"!==e&&e!==o&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),e!=o)}},function(e,t,n){"use strict";var r=n(8);r(r.S,"Array",{isArray:n(45)})},function(e,t,n){"use strict";var r=n(20),i=n(8),o=n(58),a=n(161),s=n(162),c=n(37),u=n(163),f=n(164);i(i.S+i.F*!n(165)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,l,d=o(e),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,y=void 0!==v,m=0,g=f(d);if(y&&(v=r(v,h>2?arguments[2]:void 0,2)),void 0==g||p==Array&&s(g))for(t=c(d.length),n=new p(t);t>m;m++)u(n,m,y?v(d[m],m):d[m]);else for(l=g.call(d),n=new p;!(i=l.next()).done;m++)u(n,m,y?a(l,v,[i.value,m],!0):i.value);return n.length=m,n}})},function(e,t,n){"use strict";var r=n(12);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){"use strict";var r=n(129),i=n(25)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(11),i=n(17);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){"use strict";var r=n(75),i=n(25)("iterator"),o=n(129);e.exports=n(9).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(25)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(8),i=n(163);r(r.S+r.F*n(7)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(8),i=n(32),o=[].join;r(r.P+r.F*(n(33)!=Object||!n(168)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";var r=n(8),i=n(48),o=n(34),a=n(39),s=n(37),c=[].slice;r(r.P+r.F*n(7)(function(){i&&c.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return c.call(this,e,t);for(var i=a(e,n),u=a(t,n),f=s(u-i),l=Array(f),d=0;d<f;d++)l[d]="String"==r?this.charAt(i+d):this[i+d];return l}})},function(e,t,n){"use strict";var r=n(8),i=n(21),o=n(58),a=n(7),s=[].sort,c=[1,2,3];r(r.P+r.F*(a(function(){c.sort(void 0)})||!a(function(){c.sort(null)})||!n(168)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(8),i=n(172)(0),o=n(168)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(20),i=n(33),o=n(58),a=n(37),s=n(173);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,f=4==e,l=6==e,d=5==e||l,p=t||s;return function(t,s,h){for(var v,y,m=o(t),g=i(m),b=r(s,h,3),S=a(g.length),w=0,_=n?p(t,S):c?p(t,0):void 0;S>w;w++)if((d||w in g)&&(v=g[w],y=b(v,w,m),e))if(n)_[w]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:_.push(v)}else if(f)return!1;return l?-1:u||f?f:_}}},function(e,t,n){"use strict";var r=n(174);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(13),i=n(45),o=n(25)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(8),i=n(172)(1);r(r.P+r.F*!n(168)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(172)(2);r(r.P+r.F*!n(168)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(172)(3);r(r.P+r.F*!n(168)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(172)(4);r(r.P+r.F*!n(168)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(180);r(r.P+r.F*!n(168)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(21),i=n(58),o=n(33),a=n(37);e.exports=function(e,t,n,s,c){r(t);var u=i(e),f=o(u),l=a(u.length),d=c?l-1:0,p=c?-1:1;if(n<2)for(;;){if(d in f){s=f[d],d+=p;break}if(d+=p,c?d<0:l<=d)throw TypeError("Reduce of empty array with no initial value")}for(;c?d>=0:l>d;d+=p)d in f&&(s=t(s,f[d],d,u));return s}},function(e,t,n){"use strict";var r=n(8),i=n(180);r(r.P+r.F*!n(168)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(8),i=n(36)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(168)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(8),i=n(32),o=n(38),a=n(37),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(168)(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){"use strict";var r=n(8);r(r.P,"Array",{copyWithin:n(185)}),n(186)("copyWithin")},function(e,t,n){"use strict";var r=n(58),i=n(39),o=n(37);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),c=i(t,a),u=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===u?a:i(u,a))-c,a-s),l=1;for(c<s&&s<c+f&&(l=-1,c+=f-1,s+=f-1);f-- >0;)c in n?n[s]=n[c]:delete n[s],s+=l,c+=l;return n}},function(e,t,n){"use strict";var r=n(25)("unscopables"),i=Array.prototype;void 0==i[r]&&n(10)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){"use strict";var r=n(8);r(r.P,"Array",{fill:n(188)}),n(186)("fill")},function(e,t,n){"use strict";var r=n(58),i=n(39),o=n(37);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(8),i=n(172)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(186)(o)},function(e,t,n){"use strict";var r=n(8),i=n(172)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(186)(o)},function(e,t,n){"use strict";n(192)("Array")},function(e,t,n){"use strict";var r=n(4),i=n(11),o=n(6),a=n(25)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(186),i=n(194),o=n(129),a=n(32);e.exports=n(128)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){"use strict";e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(4),i=n(88),o=n(11).f,a=n(50).f,s=n(134),c=n(196),u=r.RegExp,f=u,l=u.prototype,d=/a/g,p=/a/g,h=new u(d)!==d;if(n(6)&&(!h||n(7)(function(){return p[n(25)("match")]=!1,u(d)!=d||u(p)==p||"/a/i"!=u(d,"i")}))){u=function(e,t){var n=this instanceof u,r=s(e),o=void 0===t;return!n&&r&&e.constructor===u&&o?e:i(h?new f(r&&!o?e.source:e,t):f((r=e instanceof u)?e.source:e,r&&o?c.call(e):t),n?this:l,u)};for(var v=(function(e){e in u||o(u,e,{configurable:!0,get:function(){return f[e]},set:function(t){f[e]=t}})}),y=a(f),m=0;y.length>m;)v(y[m++]);l.constructor=u,u.prototype=l,n(18)(r,"RegExp",u)}n(192)("RegExp")},function(e,t,n){"use strict";var r=n(12);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";n(198);var r=n(12),i=n(196),o=n(6),a="toString",s=/./[a],c=function(e){n(18)(RegExp.prototype,a,e,!0)};n(7)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?c(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):s.name!=a&&c(function(){return s.call(this)})},function(e,t,n){"use strict";n(6)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(196)})},function(e,t,n){"use strict";n(200)("match",1,function(e,t,n){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){"use strict";var r=n(10),i=n(18),o=n(7),a=n(35),s=n(25);e.exports=function(e,t,n){var c=s(e),u=n(a,c,""[e]),f=u[0],l=u[1];o(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,f),r(RegExp.prototype,c,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)}))}},function(e,t,n){"use strict";n(200)("replace",2,function(e,t,n){return[function(r,i){var o=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]})},function(e,t,n){"use strict";n(200)("search",1,function(e,t,n){return[function(n){var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){"use strict";n(200)("split",2,function(e,t,r){var i=n(134),o=r,a=[].push,s="split",c="length",u="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[c]||2!="ab"[s](/(?:ab)*/)[c]||4!="."[s](/(.?)(.?)/)[c]||"."[s](/()()/)[c]>1||""[s](/.?/)[c]){var f=void 0===/()??/.exec("")[1];r=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!i(e))return o.call(n,e,t);var r,s,l,d,p,h=[],v=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),y=0,m=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,v+"g");for(f||(r=new RegExp("^"+g.source+"$(?!\\s)",v));(s=g.exec(n))&&(l=s.index+s[0][c],!(l>y&&(h.push(n.slice(y,s.index)),!f&&s[c]>1&&s[0].replace(r,function(){for(p=1;p<arguments[c]-2;p++)void 0===arguments[p]&&(s[p]=void 0)}),s[c]>1&&s.index<n[c]&&a.apply(h,s.slice(1)),d=s[0][c],y=l,h[c]>=m)));)g[u]===s.index&&g[u]++;return y===n[c]?!d&&g.test("")||h.push(""):h.push(n.slice(y)),h[c]>m?h.slice(0,m):h}}else"0"[s](void 0,0)[c]&&(r=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(n,i){var o=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]})},function(e,t,n){"use strict";var r,i,o,a=n(28),s=n(4),c=n(20),u=n(75),f=n(8),l=n(13),d=n(21),p=n(205),h=n(206),v=n(207),y=n(208).set,m=n(209)(),g="Promise",b=s.TypeError,S=s.process,w=s[g],S=s.process,_="process"==u(S),k=function(){},C=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[n(25)("species")]=function(e){e(k,k)};return(_||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t}catch(e){}}(),T=function(e,t){return e===t||e===w&&t===o},E=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return T(w,e)?new O(e):new i(e)},O=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},R=function(e){try{e()}catch(e){return{error:e}}},x=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,c=t.reject,u=t.domain;try{a?(i||(2==e._h&&M(e),e._h=1),a===!0?n=r:(u&&u.enter(),n=a(r),u&&u.exit()),n===t.promise?c(b("Promise-chain cycle")):(o=E(n))?o.call(n,s,c):s(n)):c(r)}catch(e){c(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){y.call(s,function(){var t,n,r,i=e._v;if(L(e)&&(t=R(function(){_?S.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=_||L(e)?2:1),e._a=void 0,t)throw t.error})},L=function e(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,i=0;r.length>i;)if(n=r[i++],n.fail||!e(n.promise))return!1;return!0},M=function(e){y.call(s,function(){var t;_?S.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},A=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),x(t,!0))},j=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw b("Promise can't be resolved itself");(n=E(t))?m(function(){var i={_w:r,_d:!1};try{n.call(t,c(e,i,1),c(A,i,1))}catch(e){A.call(i,e)}}):(r._v=t,r._s=1,x(r,!1))}catch(e){A.call({_w:r,_d:!1},e)}}};C||(w=function(e){p(this,w,g,"_h"),d(e),r.call(this);try{e(c(j,this,1),c(A,this,1))}catch(e){A.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(210)(w.prototype,{then:function(e,t){var n=P(v(this,w));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=_?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&x(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),O=function(){var e=new r;this.promise=e,this.resolve=c(j,e,1),this.reject=c(A,e,1)}),f(f.G+f.W+f.F*!C,{Promise:w}),n(24)(w,g),n(192)(g),o=n(9)[g],f(f.S+f.F*!C,g,{reject:function(e){var t=P(this),n=t.reject;return n(e),t.promise}}),f(f.S+f.F*(a||!C),g,{resolve:function(e){if(e instanceof w&&T(e.constructor,this))return e;var t=P(this),n=t.resolve;return n(e),t.promise}}),f(f.S+f.F*!(C&&n(165)(function(e){w.all(e).catch(k)})),g,{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=R(function(){var n=[],o=0,a=1;h(e,!1,function(e){var s=o++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=R(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t){"use strict";e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";var r=n(20),i=n(161),o=n(162),a=n(12),s=n(37),c=n(164),u={},f={},l=e.exports=function(e,t,n,l,d){var p,h,v,y,m=d?function(){return e}:c(e),g=r(n,l,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(p=s(e.length);p>b;b++)if(y=t?g(a(h=e[b])[0],h[1]):g(e[b]),y===u||y===f)return y}else for(v=m.call(e);!(h=v.next()).done;)if(y=i(v,g,h.value,t),y===u||y===f)return y};l.BREAK=u,l.RETURN=f},function(e,t,n){"use strict";var r=n(12),i=n(21),o=n(25)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){"use strict";var r,i,o,a=n(20),s=n(78),c=n(48),u=n(15),f=n(4),l=f.process,d=f.setImmediate,p=f.clearImmediate,h=f.MessageChannel,v=0,y={},m="onreadystatechange",g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){g.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete y[e]},"process"==n(34)(l)?r=function(e){l.nextTick(a(g,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(e){f.postMessage(e+"","*")},f.addEventListener("message",b,!1)):r=m in u("script")?function(e){c.appendChild(u("script"))[m]=function(){c.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,n){"use strict";var r=n(4),i=n(208).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(34)(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(o){var f=!0,l=document.createTextNode("");new o(u).observe(l,{characterData:!0}),n=function(){l.data=f=!f}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(u)}}else n=function(){i.call(r,u)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";var r=n(212);e.exports=n(213)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(11).f,i=n(46),o=n(210),a=n(20),s=n(205),c=n(35),u=n(206),f=n(128),l=n(194),d=n(192),p=n(6),h=n(22).fastKey,v=p?"_s":"size",y=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,f){var l=e(function(e,r){s(e,l,t,"_i"),e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[f],e)});return o(l.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var t=this,n=y(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[v]--}return!!n},forEach:function(e){s(this,l,"forEach");for(var t,n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!y(this,e)}}),p&&r(l.prototype,"size",{get:function(){return c(this[v])}}),l},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){f(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(4),i=n(8),o=n(18),a=n(210),s=n(22),c=n(206),u=n(205),f=n(13),l=n(7),d=n(165),p=n(24),h=n(88);e.exports=function(e,t,n,v,y,m){var g=r[e],b=g,S=y?"set":"add",w=b&&b.prototype,_={},k=function(e){var t=w[e];o(w,e,"delete"==e?function(e){return!(m&&!f(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!f(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!f(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(m||w.forEach&&!l(function(){(new b).entries().next()}))){var C=new b,T=C[S](m?{}:-0,1)!=C,E=l(function(){C.has(1)}),P=d(function(e){new b(e)}),O=!m&&l(function(){for(var e=new b,t=5;t--;)e[S](t,t);return!e.has(-0)});P||(b=t(function(t,n){u(t,b,e);var r=h(new g,t,b);return void 0!=n&&c(n,y,r[S],r),r}),b.prototype=w,w.constructor=b),(E||O)&&(k("delete"),k("has"),y&&k("get")),(O||T)&&k(S),m&&w.clear&&delete w.clear}else b=v.getConstructor(t,e,y,S),a(b.prototype,n),s.NEED=!0;return p(b,e),_[e]=b,i(i.G+i.W+i.F*(b!=g),_),m||v.setStrong(b,e,y),b}},function(e,t,n){"use strict";var r=n(212);e.exports=n(213)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(172)(0),o=n(18),a=n(22),s=n(69),c=n(216),u=n(13),f=a.getWeak,l=Object.isExtensible,d=c.ufstore,p={},h=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(u(e)){var t=f(e);return t===!0?d(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(this,e,t)}},y=e.exports=n(213)("WeakMap",h,v,c,!0,!0);7!=(new y).set((Object.freeze||Object)(p),7).get(p)&&(r=c.getConstructor(h),s(r.prototype,v),a.NEED=!0,i(["delete","has","get","set"],function(e){var t=y.prototype,n=t[e];o(t,e,function(t,i){if(u(t)&&!l(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)})}))},function(e,t,n){"use strict";var r=n(210),i=n(22).getWeak,o=n(12),a=n(13),s=n(205),c=n(206),u=n(172),f=n(5),l=u(5),d=u(6),p=0,h=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},y=function(e,t){return l(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e(function(e,r){s(e,u,t,"_i"),e._i=p++,e._l=void 0,void 0!=r&&c(r,n,e[o],e)});return r(u.prototype,{delete:function(e){if(!a(e))return!1;var t=i(e);return t===!0?h(this).delete(e):t&&f(t,this._i)&&delete t[this._i]},has:function(e){if(!a(e))return!1;var t=i(e);return t===!0?h(this).has(e):t&&f(t,this._i)}}),u},def:function(e,t,n){var r=i(o(t),!0);return r===!0?h(e).set(t,n):r[e._i]=n,e},ufstore:h}},function(e,t,n){"use strict";var r=n(216);n(213)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(8),i=n(219),o=n(220),a=n(12),s=n(39),c=n(37),u=n(13),f=n(4).ArrayBuffer,l=n(207),d=o.ArrayBuffer,p=o.DataView,h=i.ABV&&f.isView,v=d.prototype.slice,y=i.VIEW,m="ArrayBuffer";r(r.G+r.W+r.F*(f!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,m,{isView:function(e){return h&&h(e)||u(e)&&y in e}}),r(r.P+r.U+r.F*n(7)(function(){return!new d(2).slice(1,void 0).byteLength}),m,{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(l(this,d))(c(i-r)),u=new p(this),f=new p(o),h=0;r<i;)f.setUint8(h++,u.getUint8(r++));return o}}),n(192)(m)},function(e,t,n){"use strict";for(var r,i=n(4),o=n(10),a=n(19),s=a("typed_array"),c=a("view"),u=!(!i.ArrayBuffer||!i.DataView),f=u,l=0,d=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<d;)(r=i[p[l++]])?(o(r.prototype,s,!0),o(r.prototype,c,!0)):f=!1;e.exports={ABV:u,CONSTR:f,TYPED:s,VIEW:c}},function(e,t,n){"use strict";var r=n(4),i=n(6),o=n(28),a=n(219),s=n(10),c=n(210),u=n(7),f=n(205),l=n(38),d=n(37),p=n(50).f,h=n(11).f,v=n(188),y=n(24),m="ArrayBuffer",g="DataView",b="prototype",S="Wrong length!",w="Wrong index!",_=r[m],k=r[g],C=r.Math,T=r.RangeError,E=r.Infinity,P=_,O=C.abs,R=C.pow,x=C.floor,I=C.log,L=C.LN2,M="buffer",A="byteLength",j="byteOffset",D=i?"_b":M,N=i?"_l":A,F=i?"_o":j,B=function(e,t,n){var r,i,o,a=Array(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,f=23===t?R(2,-24)-R(2,-77):0,l=0,d=e<0||0===e&&1/e<0?1:0;for(e=O(e),e!=e||e===E?(i=e!=e?1:0,r=c):(r=x(I(e)/L),e*(o=R(2,-r))<1&&(r--,o*=2),e+=r+u>=1?f/o:f*R(2,1-u),e*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*R(2,t),r+=u):(i=e*R(2,u-1)*R(2,t),r=0));t>=8;a[l++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[l++]=255&r,r/=256,s-=8);return a[--l]|=128*d,a},U=function(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=n-1,u=e[c--],f=127&u;for(u>>=7;s>0;f=256*f+e[c],c--,s-=8);for(r=f&(1<<-s)-1,f>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===f)f=1-a;else{if(f===o)return r?NaN:u?-E:E;r+=R(2,t),f-=a}return(u?-1:1)*r*R(2,f-t)},V=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},G=function(e){return[255&e]},W=function(e){return[255&e,e>>8&255]},H=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},z=function(e){return B(e,52,8)},J=function(e){return B(e,23,4)},q=function(e,t,n){h(e[b],t,{get:function(){return this[n]}})},Y=function(e,t,n,r){var i=+n,o=l(i);if(i!=o||o<0||o+t>e[N])throw T(w);var a=e[D]._b,s=o+e[F],c=a.slice(s,s+t);return r?c:c.reverse()},Q=function(e,t,n,r,i,o){var a=+n,s=l(a);if(a!=s||s<0||s+t>e[N])throw T(w);for(var c=e[D]._b,u=s+e[F],f=r(+i),d=0;d<t;d++)c[u+d]=f[o?d:t-d-1]},K=function(e,t){f(e,_,m);var n=+t,r=d(n);if(n!=r)throw T(S);return r};if(a.ABV){if(!u(function(){new _})||!u(function(){new _(.5)})){_=function(e){return new P(K(this,e))};for(var X,$=_[b]=P[b],Z=p(P),ee=0;Z.length>ee;)(X=Z[ee++])in _||s(_,X,P[X]);o||($.constructor=_)}var te=new k(new _(2)),ne=k[b].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||c(k[b],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else _=function(e){var t=K(this,e);this._b=v.call(Array(t),0),this[N]=t},k=function(e,t,n){f(this,k,g),f(e,_,g);var r=e[N],i=l(t);if(i<0||i>r)throw T("Wrong offset!");if(n=void 0===n?r-i:d(n),i+n>r)throw T(S);this[D]=e,this[F]=i,this[N]=n},i&&(q(_,A,"_l"),q(k,M,"_b"),q(k,A,"_l"),q(k,j,"_o")),c(k[b],{getInt8:function(e){return Y(this,1,e)[0]<<24>>24},getUint8:function(e){return Y(this,1,e)[0]},getInt16:function(e){var t=Y(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Y(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return V(Y(this,4,e,arguments[1]))},getUint32:function(e){return V(Y(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return U(Y(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return U(Y(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){Q(this,1,e,G,t)},setUint8:function(e,t){Q(this,1,e,G,t)},setInt16:function(e,t){Q(this,2,e,W,t,arguments[2])},setUint16:function(e,t){Q(this,2,e,W,t,arguments[2])},setInt32:function(e,t){Q(this,4,e,H,t,arguments[2])},setUint32:function(e,t){Q(this,4,e,H,t,arguments[2])},setFloat32:function(e,t){Q(this,4,e,J,t,arguments[2])},setFloat64:function(e,t){Q(this,8,e,z,t,arguments[2])}});y(_,m),y(k,g),s(k[b],a.VIEW,!0),t[m]=_,t[g]=k},function(e,t,n){"use strict";var r=n(8);r(r.G+r.W+r.F*!n(219).ABV,{DataView:n(220).DataView})},function(e,t,n){"use strict";n(223)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(n(6)){var i=n(28),o=n(4),a=n(7),s=n(8),c=n(219),u=n(220),f=n(20),l=n(205),d=n(17),p=n(10),h=n(210),v=n(38),y=n(37),m=n(39),g=n(16),b=n(5),S=n(71),w=n(75),_=n(13),k=n(58),C=n(162),T=n(46),E=n(59),P=n(50).f,O=n(164),R=n(19),x=n(25),I=n(172),L=n(36),M=n(207),A=n(193),j=n(129),D=n(165),N=n(192),F=n(188),B=n(185),U=n(11),V=n(51),G=U.f,W=V.f,H=o.RangeError,z=o.TypeError,J=o.Uint8Array,q="ArrayBuffer",Y="Shared"+q,Q="BYTES_PER_ELEMENT",K="prototype",X=Array[K],$=u.ArrayBuffer,Z=u.DataView,ee=I(0),te=I(2),ne=I(3),re=I(4),ie=I(5),oe=I(6),ae=L(!0),se=L(!1),ce=A.values,ue=A.keys,fe=A.entries,le=X.lastIndexOf,de=X.reduce,pe=X.reduceRight,he=X.join,ve=X.sort,ye=X.slice,me=X.toString,ge=X.toLocaleString,be=x("iterator"),Se=x("toStringTag"),we=R("typed_constructor"),_e=R("def_constructor"),ke=c.CONSTR,Ce=c.TYPED,Te=c.VIEW,Ee="Wrong length!",Pe=I(1,function(e,t){return Me(M(e,e[_e]),t)}),Oe=a(function(){return 1===new J(new Uint16Array([1]).buffer)[0]}),Re=!!J&&!!J[K].set&&a(function(){new J(1).set({})}),xe=function(e,t){if(void 0===e)throw z(Ee);var n=+e,r=y(e);if(t&&!S(n,r))throw H(Ee);return r},Ie=function(e,t){var n=v(e);if(n<0||n%t)throw H("Wrong offset!");return n},Le=function(e){if(_(e)&&Ce in e)return e;throw z(e+" is not a typed array!")},Me=function(e,t){if(!(_(e)&&we in e))throw z("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return je(M(e,e[_e]),t)},je=function(e,t){for(var n=0,r=t.length,i=Me(e,r);r>n;)i[n]=t[n++];return i},De=function(e,t,n){G(e,t,{get:function(){return this._d[n]}})},Ne=function(e){var t,n,r,i,o,a,s=k(e),c=arguments.length,u=c>1?arguments[1]:void 0,l=void 0!==u,d=O(s);if(void 0!=d&&!C(d)){for(a=d.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(l&&c>2&&(u=f(u,arguments[2],2)),t=0,n=y(s.length),i=Me(this,n);n>t;t++)i[t]=l?u(s[t],t):s[t];return i},Fe=function(){for(var e=0,t=arguments.length,n=Me(this,t);t>e;)n[e]=arguments[e++];return n},Be=!!J&&a(function(){ge.call(new J(1))}),Ue=function(){return ge.apply(Be?ye.call(Le(this)):Le(this),arguments)},Ve={copyWithin:function(e,t){return B.call(Le(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return re(Le(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){
return F.apply(Le(this),arguments)},filter:function(e){return Ae(this,te(Le(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ie(Le(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return oe(Le(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){ee(Le(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return se(Le(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ae(Le(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return he.apply(Le(this),arguments)},lastIndexOf:function(e){return le.apply(Le(this),arguments)},map:function(e){return Pe(Le(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return de.apply(Le(this),arguments)},reduceRight:function(e){return pe.apply(Le(this),arguments)},reverse:function(){for(var e,t=this,n=Le(t).length,r=Math.floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t},some:function(e){return ne(Le(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ve.call(Le(this),e)},subarray:function(e,t){var n=Le(this),r=n.length,i=m(e,r);return new(M(n,n[_e]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,y((void 0===t?r:m(t,r))-i))}},Ge=function(e,t){return Ae(this,ye.call(Le(this),e,t))},We=function(e){Le(this);var t=Ie(arguments[1],1),n=this.length,r=k(e),i=y(r.length),o=0;if(i+t>n)throw H(Ee);for(;o<i;)this[t+o]=r[o++]},He={entries:function(){return fe.call(Le(this))},keys:function(){return ue.call(Le(this))},values:function(){return ce.call(Le(this))}},ze=function(e,t){return _(e)&&e[Ce]&&"symbol"!=("undefined"==typeof t?"undefined":r(t))&&t in e&&String(+t)==String(t)},Je=function(e,t){return ze(e,t=g(t,!0))?d(2,e[t]):W(e,t)},qe=function(e,t,n){return!(ze(e,t=g(t,!0))&&_(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?G(e,t,n):(e[t]=n.value,e)};ke||(V.f=Je,U.f=qe),s(s.S+s.F*!ke,"Object",{getOwnPropertyDescriptor:Je,defineProperty:qe}),a(function(){me.call({})})&&(me=ge=function(){return he.call(this)});var Ye=h({},Ve);h(Ye,He),p(Ye,be,He.values),h(Ye,{slice:Ge,set:We,constructor:function(){},toString:me,toLocaleString:Ue}),De(Ye,"buffer","b"),De(Ye,"byteOffset","o"),De(Ye,"byteLength","l"),De(Ye,"length","e"),G(Ye,Se,{get:function(){return this[Ce]}}),e.exports=function(e,t,n,r){r=!!r;var u=e+(r?"Clamped":"")+"Array",f="Uint8Array"!=u,d="get"+e,h="set"+e,v=o[u],m=v||{},g=v&&E(v),b=!v||!c.ABV,S={},k=v&&v[K],C=function(e,n){var r=e._d;return r.v[d](n*t+r.o,Oe)},O=function(e,n,i){var o=e._d;r&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[h](n*t+o.o,i,Oe)},R=function(e,t){G(e,t,{get:function(){return C(this,t)},set:function(e){return O(this,t,e)},enumerable:!0})};b?(v=n(function(e,n,r,i){l(e,v,u,"_d");var o,a,s,c,f=0,d=0;if(_(n)){if(!(n instanceof $||(c=w(n))==q||c==Y))return Ce in n?je(v,n):Ne.call(v,n);o=n,d=Ie(r,t);var h=n.byteLength;if(void 0===i){if(h%t)throw H(Ee);if(a=h-d,a<0)throw H(Ee)}else if(a=y(i)*t,a+d>h)throw H(Ee);s=a/t}else s=xe(n,!0),a=s*t,o=new $(a);for(p(e,"_d",{b:o,o:d,l:a,e:s,v:new Z(o)});f<s;)R(e,f++)}),k=v[K]=T(Ye),p(k,"constructor",v)):D(function(e){new v(null),new v(e)},!0)||(v=n(function(e,n,r,i){l(e,v,u);var o;return _(n)?n instanceof $||(o=w(n))==q||o==Y?void 0!==i?new m(n,Ie(r,t),i):void 0!==r?new m(n,Ie(r,t)):new m(n):Ce in n?je(v,n):Ne.call(v,n):new m(xe(n,f))}),ee(g!==Function.prototype?P(m).concat(P(g)):P(m),function(e){e in v||p(v,e,m[e])}),v[K]=k,i||(k.constructor=v));var x=k[be],I=!!x&&("values"==x.name||void 0==x.name),L=He.values;p(v,we,!0),p(k,Ce,u),p(k,Te,!0),p(k,_e,v),(r?new v(1)[Se]==u:Se in k)||G(k,Se,{get:function(){return u}}),S[u]=v,s(s.G+s.W+s.F*(v!=m),S),s(s.S,u,{BYTES_PER_ELEMENT:t,from:Ne,of:Fe}),Q in k||p(k,Q,t),s(s.P,u,Ve),N(u),s(s.P+s.F*Re,u,{set:We}),s(s.P+s.F*!I,u,He),s(s.P+s.F*(k.toString!=me),u,{toString:me}),s(s.P+s.F*a(function(){new v(1).slice()}),u,{slice:Ge}),s(s.P+s.F*(a(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!a(function(){k.toLocaleString.call([1,2])})),u,{toLocaleString:Ue}),j[u]=I?x:L,i||I||p(k,be,L)}}else e.exports=function(){}},function(e,t,n){"use strict";n(223)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){"use strict";n(223)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";n(223)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";var r=n(8),i=n(21),o=n(12),a=(n(4).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(7)(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=i(e),c=o(n);return a?a(r,t,c):s.call(r,t,c)}})},function(e,t,n){"use strict";var r=n(8),i=n(46),o=n(21),a=n(12),s=n(13),c=n(7),u=n(77),f=(n(4).Reflect||{}).construct,l=c(function(){function e(){}return!(f(function(){},[],e)instanceof e)}),d=!c(function(){f(function(){})});r(r.S+r.F*(l||d),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!l)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var c=n.prototype,p=i(s(c)?c:Object.prototype),h=Function.apply.call(e,p,t);return s(h)?h:p}})},function(e,t,n){"use strict";var r=n(11),i=n(8),o=n(12),a=n(16);i(i.S+i.F*n(7)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(8),i=n(51).f,o=n(12);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(8),i=n(12),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(130)(o,"Object",function(){var e,t=this,n=t._k;do if(t._i>=n.length)return{value:void 0,done:!0};while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){"use strict";function r(e,t){var n,s,f=arguments.length<3?e:arguments[2];return u(e)===f?e[t]:(n=i.f(e,t))?a(n,"value")?n.value:void 0!==n.get?n.get.call(f):void 0:c(s=o(e))?r(s,t,f):void 0}var i=n(51),o=n(59),a=n(5),s=n(8),c=n(13),u=n(12);s(s.S,"Reflect",{get:r})},function(e,t,n){"use strict";var r=n(51),i=n(8),o=n(12);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){"use strict";var r=n(8),i=n(59),o=n(12);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){"use strict";var r=n(8),i=n(12),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Reflect",{ownKeys:n(243)})},function(e,t,n){"use strict";var r=n(50),i=n(43),o=n(12),a=n(4).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var r=n(8),i=n(12),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){"use strict";function r(e,t,n){var c,d,p=arguments.length<4?e:arguments[3],h=o.f(f(e),t);if(!h){if(l(d=a(e)))return r(d,t,n,p);h=u(0)}return s(h,"value")?!(h.writable===!1||!l(p))&&(c=o.f(p,t)||u(0),c.value=n,i.f(p,t,c),!0):void 0!==h.set&&(h.set.call(p,n),!0)}var i=n(11),o=n(51),a=n(59),s=n(5),c=n(8),u=n(17),f=n(12),l=n(13);c(c.S,"Reflect",{set:r})},function(e,t,n){"use strict";var r=n(8),i=n(73);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(8),i=n(36)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(186)("includes")},function(e,t,n){"use strict";var r=n(8),i=n(127)(!0);r(r.P,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(8),i=n(250);r(r.P,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(37),i=n(91),o=n(35);e.exports=function(e,t,n,a){var s=String(o(e)),c=s.length,u=void 0===n?" ":String(n),f=r(t);if(f<=c||""==u)return s;var l=f-c,d=i.call(u,Math.ceil(l/u.length));return d.length>l&&(d=d.slice(0,l)),a?d+s:s+d}},function(e,t,n){"use strict";var r=n(8),i=n(250);r(r.P,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(83)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(83)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var r=n(8),i=n(35),o=n(37),a=n(134),s=n(196),c=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(130)(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in c?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new u(r,t)}})},function(e,t,n){"use strict";n(27)("asyncIterator")},function(e,t,n){"use strict";n(27)("observable")},function(e,t,n){"use strict";var r=n(8),i=n(243),o=n(32),a=n(51),s=n(163);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=o(e),r=a.f,c=i(n),u={},f=0;c.length>f;)s(u,t=c[f++],r(n,t));return u}})},function(e,t,n){"use strict";var r=n(8),i=n(259)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(30),i=n(32),o=n(44).f;e.exports=function(e){return function(t){for(var n,a=i(t),s=r(a),c=s.length,u=0,f=[];c>u;)o.call(a,n=s[u++])&&f.push(e?[n,a[n]]:a[n]);return f}}},function(e,t,n){"use strict";var r=n(8),i=n(259)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(8),i=n(58),o=n(21),a=n(11);n(6)&&r(r.P+n(262),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";e.exports=n(28)||!n(7)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(4)[e]})},function(e,t,n){"use strict";var r=n(8),i=n(58),o=n(21),a=n(11);n(6)&&r(r.P+n(262),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(8),i=n(58),o=n(16),a=n(59),s=n(51).f;n(6)&&r(r.P+n(262),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do if(t=s(n,r))return t.get;while(n=a(n))}})},function(e,t,n){"use strict";var r=n(8),i=n(58),o=n(16),a=n(59),s=n(51).f;n(6)&&r(r.P+n(262),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do if(t=s(n,r))return t.set;while(n=a(n))}})},function(e,t,n){"use strict";var r=n(8);r(r.P+r.R,"Map",{toJSON:n(267)("Map")})},function(e,t,n){"use strict";var r=n(75),i=n(268);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){"use strict";var r=n(206);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){"use strict";var r=n(8);r(r.P+r.R,"Set",{toJSON:n(267)("Set")})},function(e,t,n){"use strict";var r=n(8);r(r.S,"System",{global:n(4)})},function(e,t,n){"use strict";var r=n(8),i=n(34);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=t>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{imulh:function(e,t){var n=65535,r=+e,i=+t,o=r&n,a=i&n,s=r>>16,c=i>>16,u=(s*a>>>0)+(o*a>>>16);return s*c+(u>>16)+((o*c>>>0)+(u&n)>>16)}})},function(e,t,n){"use strict";var r=n(8);r(r.S,"Math",{umulh:function(e,t){var n=65535,r=+e,i=+t,o=r&n,a=i&n,s=r>>>16,c=i>>>16,u=(s*a>>>0)+(o*a>>>16);return s*c+(u>>>16)+((o*c>>>0)+(u&n)>>>16)}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(211),o=n(8),a=n(23)("metadata"),s=a.store||(a.store=new(n(215))),c=function(e,t,n){var r=s.get(e);if(!r){if(!n)return;s.set(e,r=new i)}var o=r.get(t);if(!o){if(!n)return;r.set(t,o=new i)}return o},u=function(e,t,n){var r=c(t,n,!1);return void 0!==r&&r.has(e)},f=function(e,t,n){var r=c(t,n,!1);return void 0===r?void 0:r.get(e)},l=function(e,t,n,r){c(n,r,!0).set(e,t)},d=function(e,t){var n=c(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},p=function(e){return void 0===e||"symbol"==("undefined"==typeof e?"undefined":r(e))?e:String(e)},h=function(e){o(o.S,"Reflect",e)};e.exports={store:s,map:c,has:u,get:f,set:l,keys:d,key:p,exp:h}},function(e,t,n){"use strict";var r=n(277),i=n(12),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var c=s.get(t);return c.delete(n),!!c.size||s.delete(t)}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=n(59),a=r.has,s=r.get,c=r.key,u=function e(t,n,r){var i=a(t,n,r);if(i)return s(t,n,r);var c=o(n);return null!==c?e(t,c,r):void 0};r.exp({getMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:c(arguments[2]))}})},function(e,t,n){"use strict";var r=n(214),i=n(268),o=n(277),a=n(12),s=n(59),c=o.keys,u=o.key,f=function e(t,n){var o=c(t,n),a=s(t);if(null===a)return o;var u=e(a,n);return u.length?o.length?i(new r(o.concat(u))):u:o};o.exp({getMetadataKeys:function(e){return f(a(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=n(59),a=r.has,s=r.key,c=function e(t,n,r){var i=a(t,n,r);if(i)return!0;var s=o(n);return null!==s&&e(t,s,r)};r.exp({hasMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){"use strict";var r=n(277),i=n(12),o=n(21),a=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?i:o)(n),a(r))}}})},function(e,t,n){"use strict";var r=n(8),i=n(209)(),o=n(4).process,a="process"==n(34)(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";var r=n(8),i=n(4),o=n(9),a=n(209)(),s=n(25)("observable"),c=n(21),u=n(12),f=n(205),l=n(210),d=n(10),p=n(206),h=p.RETURN,v=function(e){return null==e?void 0:c(e)},y=function(e){var t=e._c;t&&(e._c=void 0,t())},m=function(e){return void 0===e._o},g=function(e){m(e)||(e._o=void 0,y(e))},b=function(e,t){u(e),this._c=void 0,this._o=e,e=new S(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:c(n),this._c=n)}catch(t){return void e.error(t)}m(this)&&y(this)};b.prototype=l({},{unsubscribe:function(){g(this)}});var S=function(e){this._s=e};S.prototype=l({},{next:function(e){var t=this._s;if(!m(t)){var n=t._o;try{var r=v(n.next);if(r)return r.call(n,e)}catch(e){try{g(t)}finally{throw e}}}},error:function(e){var t=this._s;if(m(t))throw e;var n=t._o;t._o=void 0;try{var r=v(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{y(t)}finally{throw e}}return y(t),e},complete:function(e){var t=this._s;if(!m(t)){var n=t._o;t._o=void 0;try{var r=v(n.complete);e=r?r.call(n,e):void 0}catch(e){try{y(t)}finally{throw e}}return y(t),e}}});var w=function(e){f(this,w,"Observable","_f")._f=c(e)};l(w.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)(function(n,r){c(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n})})}}),l(w,{from:function(e){var t="function"==typeof this?this:w,n=v(u(e)[s]);if(n){var r=u(n.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var n=!1;return a(function(){if(!n){try{if(p(e,!1,function(e){if(t.next(e),n)return h})===h)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:w)(function(e){var t=!1;return a(function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}}),function(){t=!0}})}}),d(w.prototype,s,function(){return this}),r(r.G,{Observable:w}),n(192)("Observable")},function(e,t,n){"use strict";var r=n(4),i=n(8),o=n(78),a=n(289),s=r.navigator,c=!!s&&/MSIE .\./.test(s.userAgent),u=function(e){return c?function(t,n){return e(o(a,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};i(i.G+i.B+i.F*c,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){"use strict";var r=n(290),i=n(78),o=n(21);e.exports=function(){for(var e=o(this),t=arguments.length,n=Array(t),a=0,s=r._,c=!1;t>a;)(n[a]=arguments[a++])===s&&(c=!0);return function(){var r,o=this,a=arguments.length,u=0,f=0;if(!c&&!a)return i(e,n,o);if(r=n.slice(),c)for(;t>u;u++)r[u]===s&&(r[u]=arguments[f++]);for(;a>f;)r.push(arguments[f++]);return i(e,r,o)}}},function(e,t,n){"use strict";e.exports=n(4)},function(e,t,n){"use strict";var r=n(8),i=n(208);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){"use strict";for(var r=n(193),i=n(18),o=n(4),a=n(10),s=n(129),c=n(25),u=c("iterator"),f=c("toStringTag"),l=s.Array,d=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],p=0;p<5;p++){var h,v=d[p],y=o[v],m=y&&y.prototype;if(m){m[u]||a(m,u,l),m[f]||a(m,f,v),s[v]=l;for(h in r)m[h]||i(m,h,r[h],!0)}}},function(e,t,n){(function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function i(e,t,n,r){var i=t&&t.prototype instanceof a?t:a,o=Object.create(i.prototype),s=new h(r||[]);return o._invoke=l(e,n,s),o}function o(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function a(){}function s(){}function c(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function f(e){function t(n,i,a,s){var c=o(e[n],e,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"===("undefined"==typeof f?"undefined":r(f))&&b.call(f,"__await")?Promise.resolve(f.__await).then(function(e){t("next",e,a,s)},function(e){t("throw",e,a,s)}):Promise.resolve(f).then(function(e){u.value=e,a(u)},s)}s(c.arg)}function i(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return a=a?a.then(r,r):r()}"object"===("undefined"==typeof n?"undefined":r(n))&&n.domain&&(t=n.domain.bind(t));var a;this._invoke=i}function l(e,t,n){var r=T;return function(i,a){if(r===P)throw new Error("Generator is already running");if(r===O){if("throw"===i)throw a;return y()}for(;;){var s=n.delegate;if(s){if("return"===i||"throw"===i&&s.iterator[i]===m){n.delegate=null;var c=s.iterator.return;if(c){var u=o(c,s.iterator,a);if("throw"===u.type){i="throw",a=u.arg;continue}}if("return"===i)continue}var u=o(s.iterator[i],s.iterator,a);if("throw"===u.type){n.delegate=null,i="throw",a=u.arg;continue}i="next",a=m;var f=u.arg;if(!f.done)return r=E,f;n[s.resultName]=f.value,n.next=s.nextLoc,n.delegate=null}if("next"===i)n.sent=n._sent=a;else if("throw"===i){if(r===T)throw r=O,a;n.dispatchException(a)&&(i="next",a=m)}else"return"===i&&n.abrupt("return",a);r=P;var u=o(e,t,n);if("normal"===u.type){r=n.done?O:E;var f={value:u.arg,done:n.done};if(u.arg!==R)return f;n.delegate&&"next"===i&&(a=m)}else"throw"===u.type&&(r=O,i="throw",a=u.arg)}}}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function v(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(b.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=m,t.done=!0,t};return r.next=r}}return{next:y}}function y(){return{value:m,done:!0}}var m,g=Object.prototype,b=g.hasOwnProperty,S="function"==typeof Symbol?Symbol:{},w=S.iterator||"@@iterator",_=S.toStringTag||"@@toStringTag",k="object"===r(t),C=e.regeneratorRuntime;if(C)return void(k&&(t.exports=C));C=e.regeneratorRuntime=k?t.exports:{},C.wrap=i;var T="suspendedStart",E="suspendedYield",P="executing",O="completed",R={},x={};x[w]=function(){return this};var I=Object.getPrototypeOf,L=I&&I(I(v([])));L&&L!==g&&b.call(L,w)&&(x=L);var M=c.prototype=a.prototype=Object.create(x);s.prototype=M.constructor=c,c.constructor=s,c[_]=s.displayName="GeneratorFunction",C.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,_ in e||(e[_]="GeneratorFunction")),e.prototype=Object.create(M),e},C.awrap=function(e){return{__await:e}},u(f.prototype),C.AsyncIterator=f,C.async=function(e,t,n,r){var o=new f(i(e,t,n,r));return C.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},u(M),M[_]="Generator",M.toString=function(){return"[object Generator]"},C.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},C.values=v,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),s=b.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),R},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),R}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},R}}}("object"===("undefined"==typeof e?"undefined":r(e))?e:"object"===("undefined"==typeof window?"undefined":r(window))?window:"object"===("undefined"==typeof self?"undefined":r(self))?self:void 0)}).call(t,function(){return this}(),n(294)(e),n(295))},function(e,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){v&&p&&(v=!1,p.length?h=p.concat(h):y=-1,h.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=h.length;t;){for(p=h,h=[];++y<t;)p&&p[y].run();y=-1,t=h.length}p=null,v=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var f,l,d=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var p,h=[],v=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new c(e,t)),1!==h.length||v||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";n(297),e.exports=n(9).RegExp.escape},function(e,t,n){"use strict";var r=n(8),i=n(298)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){"use strict";e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){(function(t){"use strict";var r=n(300);e.exports=r({window:t.window})}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(301);e.exports=function(e,t){var i=e&&e.window,o={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var a in t)hasOwnProperty.call(t,a)&&(o[a]=t[a]);var s=r.log,c=r.detectBrowser(i),u={browserDetails:c,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings},f=n(302)||null,l=n(304)||null,d=n(308)||null,p=n(310)||null,h=n(311)||null;switch(c.browser){case"chrome":if(!f||!f.shimPeerConnection||!o.shimChrome)return s("Chrome shim is not included in this adapter release."),u;s("adapter.js shimming chrome."),u.browserShim=f,h.shimCreateObjectURL(i),f.shimGetUserMedia(i),f.shimMediaStream(i),f.shimSourceObject(i),f.shimPeerConnection(i),f.shimOnTrack(i),f.shimAddTrackRemoveTrack(i),f.shimGetSendersWithDtmf(i),h.shimRTCIceCandidate(i);break;case"firefox":if(!d||!d.shimPeerConnection||!o.shimFirefox)return s("Firefox shim is not included in this adapter release."),u;s("adapter.js shimming firefox."),u.browserShim=d,h.shimCreateObjectURL(i),d.shimGetUserMedia(i),d.shimSourceObject(i),d.shimPeerConnection(i),d.shimOnTrack(i),h.shimRTCIceCandidate(i);break;case"edge":if(!l||!l.shimPeerConnection||!o.shimEdge)return s("MS edge shim is not included in this adapter release."),u;s("adapter.js shimming edge."),u.browserShim=l,h.shimCreateObjectURL(i),l.shimGetUserMedia(i),l.shimPeerConnection(i),l.shimReplaceTrack(i);break;case"safari":if(!p||!o.shimSafari)return s("Safari shim is not included in this adapter release."),u;s("adapter.js shimming safari."),u.browserShim=p,h.shimCreateObjectURL(i),p.shimRTCIceServerUrls(i),p.shimCallbacksAPI(i),p.shimLocalStreamsAPI(i),p.shimRemoteStreamsAPI(i),p.shimTrackEventTransceiver(i),p.shimGetUserMedia(i),h.shimRTCIceCandidate(i);break;default:s("Unsupported browser!")}return u}},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=!0,i=!0,o={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+("undefined"==typeof e?"undefined":n(e))+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+("undefined"==typeof e?"undefined":n(e))+". Please use a boolean."):(i=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"===("undefined"==typeof window?"undefined":n(window))){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){i&&console.warn(e+" is deprecated, please use "+t+" instead.")},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(e){var t=e&&e.navigator,n={};if(n.browser=null,n.version=null,"undefined"==typeof e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=this.extractVersion(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)if(e.webkitRTCPeerConnection)n.browser="chrome",n.version=this.extractVersion(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!t.userAgent.match(/Version\/(\d+).(\d+)/))return n.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",n;n.browser="safari",n.version=this.extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=this.extractVersion(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!t.mediaDevices||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=this.extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return n}};e.exports={log:o.log,deprecated:o.deprecated,disableLog:o.disableLog,disableWarnings:o.disableWarnings,extractVersion:o.extractVersion,shimCreateObjectURL:o.shimCreateObjectURL,detectBrowser:o.detectBrowser.bind(o)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(301),o=i.log,a={
shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"===("undefined"==typeof e?"undefined":r(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return n._ontrackpoly||(n._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.track.id}):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}),t.stream.getTracks().forEach(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.id}):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})},n.addEventListener("addstream",n._ontrackpoly)),t.apply(n,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"===("undefined"==typeof e?"undefined":r(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=this,o=n.apply(i,arguments);return o||(o=t(i,e),i._senders.push(o)),o};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;i.apply(t,arguments);var n=t._senders.indexOf(e);n!==-1&&t._senders.splice(n,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;n._senders=n._senders||[],o.apply(n,[e]),e.getTracks().forEach(function(e){n._senders.push(t(n,e))})};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],a.apply(t,[t._streams[e.id]||e]),e.getTracks().forEach(function(e){var n=t._senders.find(function(t){return t.track===e});n&&t._senders.splice(t._senders.indexOf(n),1)})}}else if("object"===("undefined"==typeof e?"undefined":r(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(e,[]);return t.forEach(function(t){t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSourceObject:function(e){var t=e&&e.URL;"object"===("undefined"==typeof e?"undefined":r(e))&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var n=this;return this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)}),void e.addEventListener("removetrack",function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)})):void(this.src="")}}))},shimAddTrackRemoveTrack:function(e){function t(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}function n(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}var r=i.detectBrowser(e);if(!(e.RTCPeerConnection.prototype.addTrack&&r.version>=62)){var o=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=o.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var a=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{},t.getTracks().forEach(function(e){var t=n.getSenders().find(function(t){return t.track===e});if(t)throw new DOMException("Track already exists.","InvalidAccessError")}),!n._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());n._streams[t.id]=r,n._reverseStreams[r.id]=t,t=r}a.apply(n,[t])};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},s.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===r.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=r.getSenders().find(function(e){return e.track===t});if(o)throw new DOMException("Track already exists.","InvalidAccessError");r._streams=r._streams||{},r._reverseStreams=r._reverseStreams||{};var a=r._streams[n.id];if(a)a.addTrack(t),Promise.resolve().then(function(){r.dispatchEvent(new Event("negotiationneeded"))});else{var s=new e.MediaStream([t]);r._streams[n.id]=s,r._reverseStreams[s.id]=n,r.addStream(s)}return r.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(n){var r=e.RTCPeerConnection.prototype[n];e.RTCPeerConnection.prototype[n]=function(){var e=this,n=arguments,i=arguments.length&&"function"==typeof arguments[0];return i?r.apply(e,[function(r){var i=t(e,r);n[0].apply(null,[i])},function(e){n[1]&&n[1].apply(null,e)},arguments[2]]):r.apply(e,arguments).then(function(n){return t(e,n)})}});var c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this;return arguments.length&&arguments[0].type?(arguments[0]=n(e,arguments[0]),c.apply(e,arguments)):c.apply(e,arguments)};var u=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=this,n=u.get.apply(this);return""===n.type?n:t(e,n)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===t.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var n=e._pc===t;if(!n)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");t._streams=t._streams||{};var r;Object.keys(t._streams).forEach(function(n){var i=t._streams[n].getTracks().find(function(t){return e.track===t});i&&(r=t._streams[n])}),r&&(1===r.getTracks().length?t.removeStream(r):r.removeTrack(e.track),t.dispatchEvent(new Event("negotiationneeded")))}}},shimPeerConnection:function(e){var t=i.detectBrowser(e);if(e.RTCPeerConnection){var n=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,r.push(a)):r.push(e.iceServers[o])}e.iceServers=r}return new n(e,t)},e.RTCPeerConnection.prototype=n.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return n.generateCertificate}})}else e.RTCPeerConnection=function(t,n){return o("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,n)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}});var a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,n){var r=this,i=arguments;if(arguments.length>0&&"function"==typeof e)return a.apply(this,arguments);if(0===a.length&&(0===arguments.length||"function"!=typeof arguments[0]))return a.apply(this,[]);var o=function(e){var t={},n=e.result();return n.forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){var c=function(e){i[1](s(o(e)))};return a.apply(this,[c,arguments[0]])}return new Promise(function(e,t){a.apply(r,[function(t){e(s(o(t)))},t])}).then(t,n)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,r=new Promise(function(r,i){n.apply(t,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),t.version<52&&["createOffer","createAnswer"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===r(arguments[0])){var t=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){n.apply(e,[r,i,t])})}return n.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var s=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?s.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};e.exports={shimMediaStream:a.shimMediaStream,shimOnTrack:a.shimOnTrack,shimAddTrackRemoveTrack:a.shimAddTrackRemoveTrack,shimGetSendersWithDtmf:a.shimGetSendersWithDtmf,shimSourceObject:a.shimSourceObject,shimPeerConnection:a.shimPeerConnection,shimGetUserMedia:n(303)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(301),o=i.log;e.exports=function(e){var t=i.detectBrowser(e),n=e&&e.navigator,a=function(e){if("object"!==("undefined"==typeof e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var a={};"number"==typeof i.ideal?(a[o("min",n)]=i.ideal,t.optional.push(a),a={},a[o("max",n)]=i.ideal,t.optional.push(a)):(a[o("",n)]=i.ideal,t.optional.push(a))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,i){if(e=JSON.parse(JSON.stringify(e)),e&&"object"===r(e.audio)){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};e=JSON.parse(JSON.stringify(e)),s(e.audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=a(e.audio)}if(e&&"object"===r(e.video)){var c=e.video.facingMode;c=c&&("object"===("undefined"==typeof c?"undefined":r(c))?c:{ideal:c});var u=t.version<61;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||u)){delete e.video.facingMode;var f;if("environment"===c.exact||"environment"===c.ideal?f=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(function(t){t=t.filter(function(e){return"videoinput"===e.kind});var n=t.find(function(e){return f.some(function(t){return e.label.toLowerCase().indexOf(t)!==-1})});return!n&&t.length&&f.indexOf("back")!==-1&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=a(e.video),o("chrome: "+JSON.stringify(e)),i(e)})}e.video=a(e.video)}return o("chrome: "+JSON.stringify(e)),i(e)},c=function(e){return{name:{PermissionDeniedError:"NotAllowedError",InvalidStateError:"NotReadableError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotReadableError",MediaDeviceKillSwitchOn:"NotReadableError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},u=function(e,t,r){s(e,function(e){n.webkitGetUserMedia(e,t,function(e){r&&r(c(e))})})};n.getUserMedia=u;var f=function(e){return new Promise(function(t,r){n.getUserMedia(e,t,r)})};if(n.mediaDevices||(n.mediaDevices={getUserMedia:f,enumerateDevices:function(){return new Promise(function(t){var n={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:n[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),n.mediaDevices.getUserMedia){var l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return s(e,function(e){return l(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(c(e))})})}}else n.mediaDevices.getUserMedia=function(e){return f(e)};"undefined"==typeof n.mediaDevices.addEventListener&&(n.mediaDevices.addEventListener=function(){o("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof n.mediaDevices.removeEventListener&&(n.mediaDevices.removeEventListener=function(){o("Dummy mediaDevices.removeEventListener called.")})}},function(e,t,n){"use strict";var r=n(301),i=n(305);e.exports={shimGetUserMedia:n(307),shimPeerConnection:function(e){var t=r.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCPeerConnection=i(e,t.version)},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}}},function(e,t,n){"use strict";function r(e,t,n,r){var i=c.writeRtpDescription(e.kind,t);if(i+=c.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=c.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",i+=e.direction?"a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var o="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+o,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+c.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+c.localCName+"\r\n"),i}function i(e,t){var n=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter(function(e){var r=0===e.indexOf("turn:")&&e.indexOf("transport=udp")!==-1&&e.indexOf("turn:[")===-1&&!n;return r?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&e.indexOf("?transport=udp")===-1}),delete e.url,e.urls=i?r[0]:r,!!r.length}return!1})}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),a=r(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach(function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!i(r,a,e.codecs,t.codecs))continue;a=JSON.parse(JSON.stringify(a)),a.numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n}function a(e,t,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)!==-1}function s(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}var c=n(306);e.exports=function(e,t){var n=function(n){var r=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=o[e].bind(o)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onicegatheringstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this.localDescription=null,this.remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy){var a=new Error("rtcpMuxPolicy 'negotiate' is not supported");throw a.name="NotSupportedError",a}switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=i(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers=new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy});else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=c.generateSessionId(),this._sdpSessionVersion=0};return n.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this.dispatchEvent(e),"function"==typeof this.onicegatheringstatechange&&this.onicegatheringstatechange(e)},n.prototype.getConfiguration=function(){return this._config},n.prototype.getLocalStreams=function(){return this.localStreams},n.prototype.getRemoteStreams=function(){return this.remoteStreams},n.prototype._createTransceiver=function(e){var t=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,wantReceive:!0};if(this.usingBundle&&t)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();n.iceTransport=r.iceTransport,n.dtlsTransport=r.dtlsTransport}return this.transceivers.push(n),n},n.prototype.addTrack=function(t,n){for(var r,i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(n)===-1&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},n.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)})}},n.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},n.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},n.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},n.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].candidates=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].candidates&&r.transceivers[t].candidates.push(e.candidate)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},n.prototype._gather=function(t,n){var r=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].candidates;this.transceivers[n].candidates=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(r.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,s=!a||0===Object.keys(a).length;s?"new"!==i.state&&"gathering"!==i.state||(i.state="completed"):("new"===i.state&&(i.state="gathering"),a.component=1,o.candidate.candidate=c.writeCandidate(a));var u=c.splitSections(r.localDescription.sdp);s?u[o.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n":u[o.candidate.sdpMLineIndex+1]+="a="+o.candidate.candidate+"\r\n",r.localDescription.sdp=u.join("");var f=r.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),s||(r.dispatchEvent(o),"function"==typeof r.onicecandidate&&r.onicecandidate(o)),f&&(r.dispatchEvent(new Event("icecandidate")),"function"==typeof r.onicecandidate&&r.onicecandidate(new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout(function(){o.forEach(function(e){var t=new Event("RTCIceGatherEvent");t.candidate=e,i.onlocalcandidate(t)})},0)}},n.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},n.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},n.prototype._transceive=function(e,n,r){var i=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:c.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),r&&e.rtpReceiver&&i.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.rtcpParameters.cname,compound:e.rtcpParameters.compound},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},n.prototype.setLocalDescription=function(e){var t=this,n=arguments;if(!a("setLocalDescription",e.type,this.signalingState))return new Promise(function(r,i){var o=new Error("Can not set local "+e.type+" in state "+t.signalingState);o.name="InvalidStateError",n.length>2&&"function"==typeof n[2]&&n[2].apply(null,[o]),i(o)});var r,i;if("offer"===e.type)r=c.splitSections(e.sdp),i=r.shift(),r.forEach(function(e,n){var r=c.parseRtpParameters(e);t.transceivers[n].localCapabilities=r}),this.transceivers.forEach(function(e,n){t._gather(e.mid,n)});else if("answer"===e.type){r=c.splitSections(t.remoteDescription.sdp),i=r.shift();var s=c.matchPrefix(i,"a=ice-lite").length>0;r.forEach(function(e,n){var r=t.transceivers[n],a=r.iceGatherer,u=r.iceTransport,f=r.dtlsTransport,l=r.localCapabilities,d=r.remoteCapabilities,p=c.isRejected(e)&&1===!c.matchPrefix(e,"a=bundle-only").length;if(!p&&!r.isDatachannel){var h=c.getIceParameters(e,i),v=c.getDtlsParameters(e,i);s&&(v.role="server"),t.usingBundle&&0!==n||(t._gather(r.mid,n),"new"===u.state&&u.start(a,h,s?"controlling":"controlled"),"new"===f.state&&f.start(v));var y=o(l,d);t._transceive(r,y.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var u=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(e){u&&u.apply(null),e()})},n.prototype.setRemoteDescription=function(n){var r=this,i=arguments;if(!a("setRemoteDescription",n.type,this.signalingState))return new Promise(function(e,t){var o=new Error("Can not set remote "+n.type+" in state "+r.signalingState);o.name="InvalidStateError",i.length>2&&"function"==typeof i[2]&&i[2].apply(null,[o]),t(o)});var o={};this.remoteStreams.forEach(function(e){o[e.id]=e});var u=[],f=c.splitSections(n.sdp),l=f.shift(),d=c.matchPrefix(l,"a=ice-lite").length>0,p=c.matchPrefix(l,"a=group:BUNDLE ").length>0;this.usingBundle=p;var h=c.matchPrefix(l,"a=ice-options:")[0];switch(h?this.canTrickleIceCandidates=h.substr(14).split(" ").indexOf("trickle")>=0:this.canTrickleIceCandidates=!1,f.forEach(function(i,a){var f=c.splitLines(i),h=c.getKind(i),v=c.isRejected(i)&&1===!c.matchPrefix(i,"a=bundle-only").length,y=f[0].substr(2).split(" ")[2],m=c.getDirection(i,l),g=c.parseMsid(i),b=c.getMid(i)||c.generateIdentifier();if("application"===h&&"DTLS/SCTP"===y)return void(r.transceivers[a]={mid:b,isDatachannel:!0});var S,w,_,k,C,T,E,P,O,R,x,I=c.parseRtpParameters(i);v||(R=c.getIceParameters(i,l),x=c.getDtlsParameters(i,l),x.role="client"),E=c.parseRtpEncodingParameters(i);var L=c.parseRtcpParameters(i),M=c.matchPrefix(i,"a=end-of-candidates",l).length>0,A=c.matchPrefix(i,"a=candidate:").map(function(e){return c.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===n.type||"answer"===n.type)&&!v&&p&&a>0&&r.transceivers[a]&&(r._disposeIceAndDtlsTransports(a),r.transceivers[a].iceGatherer=r.transceivers[0].iceGatherer,r.transceivers[a].iceTransport=r.transceivers[0].iceTransport,r.transceivers[a].dtlsTransport=r.transceivers[0].dtlsTransport,r.transceivers[a].rtpSender&&r.transceivers[a].rtpSender.setTransport(r.transceivers[0].dtlsTransport),r.transceivers[a].rtpReceiver&&r.transceivers[a].rtpReceiver.setTransport(r.transceivers[0].dtlsTransport)),"offer"!==n.type||v)"answer"!==n.type||v||(S=r.transceivers[a],w=S.iceGatherer,_=S.iceTransport,k=S.dtlsTransport,C=S.rtpReceiver,T=S.sendEncodingParameters,P=S.localCapabilities,r.transceivers[a].recvEncodingParameters=E,r.transceivers[a].remoteCapabilities=I,r.transceivers[a].rtcpParameters=L,A.length&&"new"===_.state&&(!d&&!M||p&&0!==a?A.forEach(function(e){s(S.iceTransport,e)}):_.setRemoteCandidates(A)),p&&0!==a||("new"===_.state&&_.start(w,R,"controlling"),"new"===k.state&&k.start(x)),r._transceive(S,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!C||"sendrecv"!==m&&"sendonly"!==m?delete S.rtpReceiver:(O=C.track,g?(o[g.stream]||(o[g.stream]=new e.MediaStream),o[g.stream].addTrack(O),u.push([O,C,o[g.stream]])):(o.default||(o.default=new e.MediaStream),o.default.addTrack(O),u.push([O,C,o.default]))));else{S=r.transceivers[a]||r._createTransceiver(h),S.mid=b,S.iceGatherer||(S.iceGatherer=r._createIceGatherer(a,p)),A.length&&"new"===S.iceTransport.state&&(!M||p&&0!==a?A.forEach(function(e){s(S.iceTransport,e)}):S.iceTransport.setRemoteCandidates(A)),P=e.RTCRtpReceiver.getCapabilities(h),t<15019&&(P.codecs=P.codecs.filter(function(e){return"rtx"!==e.name})),T=[{ssrc:1001*(2*a+2)}];var j=!1;if(("sendrecv"===m||"sendonly"===m)&&(j=!S.rtpReceiver,C=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,h),j)){var D;O=C.track,g?(o[g.stream]||(o[g.stream]=new e.MediaStream,Object.defineProperty(o[g.stream],"id",{get:function(){return g.stream}})),Object.defineProperty(O,"id",{get:function(){return g.track}}),D=o[g.stream]):(o.default||(o.default=new e.MediaStream),
D=o.default),D.addTrack(O),u.push([O,C,D])}S.localCapabilities=P,S.remoteCapabilities=I,S.rtpReceiver=C,S.rtcpParameters=L,S.sendEncodingParameters=T,S.recvEncodingParameters=E,r._transceive(r.transceivers[a],!1,j)}}),this.remoteDescription={type:n.type,sdp:n.sdp},n.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+n.type+'"')}return Object.keys(o).forEach(function(t){var n=o[t];if(n.getTracks().length){if(r.remoteStreams.indexOf(n)===-1){r.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,e.setTimeout(function(){r.dispatchEvent(i),"function"==typeof r.onaddstream&&r.onaddstream(i)})}u.forEach(function(t){var i=t[0],o=t[1];if(n.id===t[2].id){var a=new Event("track");a.track=i,a.receiver=o,a.transceiver={receiver:o},a.streams=[n],e.setTimeout(function(){r.dispatchEvent(a),"function"==typeof r.ontrack&&r.ontrack(a)})}})}}),e.setTimeout(function(){r&&r.transceivers&&r.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),new Promise(function(e){i.length>1&&"function"==typeof i[1]&&i[1].apply(null),e()})},n.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},n.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),"function"==typeof this.onsignalingstatechange&&this.onsignalingstatechange(t)},n.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&this.needNegotiation!==!0&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation!==!1){t.needNegotiation=!1;var e=new Event("negotiationneeded");t.dispatchEvent(e),"function"==typeof t.onnegotiationneeded&&t.onnegotiationneeded(e)}},0))},n.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n.new>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),"function"==typeof this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},n.prototype.createOffer=function(){var n,i=this,o=arguments;1===arguments.length&&"function"!=typeof arguments[0]?n=arguments[0]:3===arguments.length&&(n=arguments[2]);var a=this.transceivers.filter(function(e){return"audio"===e.kind}).length,s=this.transceivers.filter(function(e){return"video"===e.kind}).length;if(n){if(n.mandatory||n.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==n.offerToReceiveAudio&&(a=n.offerToReceiveAudio===!0?1:n.offerToReceiveAudio===!1?0:n.offerToReceiveAudio),void 0!==n.offerToReceiveVideo&&(s=n.offerToReceiveVideo===!0?1:n.offerToReceiveVideo===!1?0:n.offerToReceiveVideo)}for(this.transceivers.forEach(function(e){"audio"===e.kind?(a--,a<0&&(e.wantReceive=!1)):"video"===e.kind&&(s--,s<0&&(e.wantReceive=!1))});a>0||s>0;)a>0&&(this._createTransceiver("audio"),a--),s>0&&(this._createTransceiver("video"),s--);var u=c.writeSessionBoilerplate(this._sdpSessionId,this._sdpSessionVersion++);this.transceivers.forEach(function(n,r){var o=n.track,a=n.kind,s=c.generateIdentifier();n.mid=s,n.iceGatherer||(n.iceGatherer=i._createIceGatherer(r,i.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name})),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1")});var f=[{ssrc:1001*(2*r+1)}];o&&t>=15019&&"video"===a&&(f[0].rtx={ssrc:1001*(2*r+1)+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,a)),n.localCapabilities=u,n.sendEncodingParameters=f}),"max-compat"!==this._config.bundlePolicy&&(u+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",this.transceivers.forEach(function(e,t){u+=r(e,e.localCapabilities,"offer",e.stream),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===i.iceGatheringState||0!==t&&i.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,u+="a="+c.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))});var f=new e.RTCSessionDescription({type:"offer",sdp:u});return new Promise(function(e){return o.length>0&&"function"==typeof o[0]?(o[0].apply(null,[f]),void e()):void e(f)})},n.prototype.createAnswer=function(){var n=arguments,i=c.writeSessionBoilerplate(this._sdpSessionId,this._sdpSessionVersion++);this.usingBundle&&(i+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n");var a=c.splitSections(this.remoteDescription.sdp).length-1;this.transceivers.forEach(function(e,n){if(!(n+1>a)){if(e.isDatachannel)return void(i+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+e.mid+"\r\n");if(e.stream){var s;"audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&(e.sendEncodingParameters[0].rtx={ssrc:1001*(2*n+2)+1})}var c=o(e.localCapabilities,e.remoteCapabilities),u=c.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length;!u&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=r(e,c,"answer",e.stream),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\r\n")}});var s=new e.RTCSessionDescription({type:"answer",sdp:i});return new Promise(function(e){return n.length>0&&"function"==typeof n[0]?(n[0].apply(null,[s]),void e()):void e(s)})},n.prototype.addIceCandidate=function(e){var t,n;if(e&&""!==e.candidate){if(!e.sdpMLineIndex&&!e.sdpMid)throw new TypeError("sdpMLineIndex or sdpMid required");if(this.remoteDescription){var r=e.sdpMLineIndex;if(e.sdpMid)for(var i=0;i<this.transceivers.length;i++)if(this.transceivers[i].mid===e.sdpMid){r=i;break}var o=this.transceivers[r];if(o){if(o.isDatachannel)return Promise.resolve();var a=Object.keys(e.candidate).length>0?c.parseCandidate(e.candidate):{};if("tcp"===a.protocol&&(0===a.port||9===a.port))return Promise.resolve();if(a.component&&1!==a.component)return Promise.resolve();if((0===r||r>0&&o.iceTransport!==this.transceivers[0].iceTransport)&&(s(o.iceTransport,a)||(t=new Error("Can not add ICE candidate"),t.name="OperationError")),!t){var u=e.candidate.trim();0===u.indexOf("a=")&&(u=u.substr(2)),n=c.splitSections(this.remoteDescription.sdp),n[r+1]+="a="+(a.type?u:"end-of-candidates")+"\r\n",this.remoteDescription.sdp=n.join("")}}else t=new Error("Can not add ICE candidate"),t.name="OperationError"}else t=new Error("Can not add ICE candidate without a remote description"),t.name="InvalidStateError"}else for(var f=0;f<this.transceivers.length&&(this.transceivers[f].isDatachannel||(this.transceivers[f].iceTransport.addRemoteCandidate({}),n=c.splitSections(this.remoteDescription.sdp),n[f+1]+="a=end-of-candidates\r\n",this.remoteDescription.sdp=n.join(""),!this.usingBundle));f++);var l=arguments;return new Promise(function(e,n){t?(l.length>2&&"function"==typeof l[2]&&l[2].apply(null,[t]),n(t)):(l.length>1&&"function"==typeof l[1]&&l[1].apply(null),e())})},n.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1],n=function(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};return new Promise(function(r){var i=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){e[t].type=n(e[t]),i.set(t,e[t])})}),t&&t.apply(null,i),r(i)})})},n}},function(e,t,n){(function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={};n.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},n.splitSections=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),e.ufrag&&(t.push("ufrag"),t.push(e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},n.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},n.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){var r=n.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:r.map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},n.getIceParameters=function(e,t){var r=n.splitLines(e);r=r.concat(n.splitLines(t));var i={usernameFragment:r.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return i},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e),i=r[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=n.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=n.parseRtpMap(s),u=n.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=u.length?n.parseFmtp(u[0]):{},c.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(n.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){r+=n.writeExtmap(e)}),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};r.push(n),o&&(n=JSON.parse(JSON.stringify(n)),n.fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},r.push(n))}}),0===r.length&&c&&r.push({ssrc:c});var f=n.matchPrefix(e,"b=");return f.length&&(f=0===f[0].indexOf("b=TIAS:")?parseInt(f[0].substr(7),10):0===f[0].indexOf("b=AS:")?1e3*parseInt(f[0].substr(5),10)*.95-16e3:void 0,r.forEach(function(e){e.maxBitrate=f})),r},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var i=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return t=r[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t){var r,i=void 0!==t?t:2;return r=e?e:n.generateSessionId(),"v=0\r\no=thisisadapterortc "+r+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,i){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.direction?"a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){var t=n.splitLines(e),r=t[0].split(" ");return r[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e),r=t[0].split(" ");return{kind:r[0].substr(2),port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},"object"===t(e)&&(e.exports=n)}).call(t,n(294)(e))},function(e,t){"use strict";e.exports=function(e){var t=e&&e.navigator,n=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch(function(e){return Promise.reject(n(e))})}}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(301),o={shimOnTrack:function(e){"object"!==("undefined"==typeof e?"undefined":r(e))||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.transceiver={receiver:n.receiver},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}}),"object"===("undefined"==typeof e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"===("undefined"==typeof e?"undefined":r(e))&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(e){var t=i.detectBrowser(e);if("object"===("undefined"==typeof e?"undefined":r(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(n,r){if(t.version<38&&n&&n.iceServers){for(var i=[],o=0;o<n.iceServers.length;o++){var a=n.iceServers[o];if(a.hasOwnProperty("urls"))for(var s=0;s<a.urls.length;s++){var c={url:a.urls[s]};0===a.urls[s].indexOf("turn")&&(c.username=a.username,c.credential=a.credential),i.push(c)}else i.push(n.iceServers[o])}n.iceServers=i}return new e.mozRTCPeerConnection(n,r)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var o=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},a={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,r){return s.apply(this,[e||null]).then(function(e){if(t.version<48&&(e=o(e)),t.version<53&&!n)try{e.forEach(function(e){e.type=a[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,n){e.set(n,Object.assign({},t,{type:a[t.type]||t.type}))})}return e}).then(n,r)}}}};e.exports={shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:n(309)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(301),o=i.log;e.exports=function(e){var t=i.detectBrowser(e),n=e&&e.navigator,a=e&&e.MediaStreamTrack,s=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,i,a){var c=function(e){if("object"!==("undefined"==typeof e?"undefined":r(e))||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=e[n]="object"===r(e[n])?e[n]:{ideal:e[n]};if(void 0===i.min&&void 0===i.max&&void 0===i.exact||t.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:e[n]=i.exact,delete i.exact),void 0!==i.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof i.ideal?o[n]={min:i.ideal,max:i.ideal}:o[n]=i.ideal,e.advanced.push(o),delete i.ideal,Object.keys(i).length||delete e[n]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(o("spec: "+JSON.stringify(e)),e.audio&&(e.audio=c(e.audio)),e.video&&(e.video=c(e.video)),o("ff37: "+JSON.stringify(e))),n.mozGetUserMedia(e,i,function(e){a(s(e))})},u=function(e){return new Promise(function(t,n){c(e,t,n)})};if(n.mediaDevices||(n.mediaDevices={getUserMedia:u,addEventListener:function(){},removeEventListener:function(){}}),n.mediaDevices.enumerateDevices=n.mediaDevices.enumerateDevices||function(){return new Promise(function(e){var t=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];e(t)})},t.version<41){var f=n.mediaDevices.enumerateDevices.bind(n.mediaDevices);n.mediaDevices.enumerateDevices=function(){return f().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(t.version<49){var l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return l(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(s(e))})}}if(!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var d=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},p=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===("undefined"==typeof e?"undefined":r(e))&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),d(e.audio,"autoGainControl","mozAutoGainControl"),d(e.audio,"noiseSuppression","mozNoiseSuppression")),p(e)},a&&a.prototype.getSettings){var h=a.prototype.getSettings;a.prototype.getSettings=function(){var e=h.apply(this,arguments);return d(e,"mozAutoGainControl","autoGainControl"),d(e,"mozNoiseSuppression","noiseSuppression"),e}}if(a&&a.prototype.applyConstraints){var v=a.prototype.applyConstraints;a.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===("undefined"==typeof e?"undefined":r(e))&&(e=JSON.parse(JSON.stringify(e)),d(e,"autoGainControl","mozAutoGainControl"),d(e,"noiseSuppression","mozNoiseSuppression")),v.apply(this,[e])}}}n.getUserMedia=function(e,r,o){return t.version<44?c(e,r,o):(i.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),void n.mediaDevices.getUserMedia(e).then(r,o))}}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(301),o={shimLocalStreamsAPI:function(e){if("object"===("undefined"==typeof e?"undefined":r(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach(function(n){n.id===e&&(t=n)}),this._remoteStreams&&this._remoteStreams.forEach(function(n){n.id===e&&(t=n)}),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.indexOf(e)===-1&&this._localStreams.push(e);var n=this;e.getTracks().forEach(function(r){t.call(n,r,e)})},e.RTCPeerConnection.prototype.addTrack=function(e,n){n&&(this._localStreams?this._localStreams.indexOf(n)===-1&&this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(t!==-1){this._localStreams.splice(t,1);var n=this,r=e.getTracks();this.getSenders().forEach(function(e){r.indexOf(e.track)!==-1&&n.removeTrack(e)})}})}},shimRemoteStreamsAPI:function(e){"object"===("undefined"==typeof e?"undefined":r(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),"onaddstream"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){var t=e.streams[0];if(this._remoteStreams||(this._remoteStreams=[]),!(this._remoteStreams.indexOf(t)>=0)){this._remoteStreams.push(t);var n=new Event("addstream");n.stream=e.streams[0],this.dispatchEvent(n)}}.bind(this))}}))},shimCallbacksAPI:function(e){if("object"===("undefined"==typeof e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};var c=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=c}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,r.push(a)):r.push(e.iceServers[o])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"===("undefined"==typeof e?"undefined":r(e))&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}};e.exports={shimCallbacksAPI:o.shimCallbacksAPI,shimLocalStreamsAPI:o.shimLocalStreamsAPI,shimRemoteStreamsAPI:o.shimRemoteStreamsAPI,shimGetUserMedia:o.shimGetUserMedia,shimRTCIceServerUrls:o.shimRTCIceServerUrls,shimTrackEventTransceiver:o.shimTrackEventTransceiver}},function(e,t,n){"use strict";function r(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){r(n(e))};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)}})}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(306),a=n(301);e.exports={shimRTCIceCandidate:function(e){if(!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){"object"===("undefined"==typeof e?"undefined":i(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&(e=JSON.parse(JSON.stringify(e)),e.candidate=e.candidate.substr(2));var n=new t(e),r=o.parseCandidate(e.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a},r(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"
}),t})}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"===("undefined"==typeof e?"undefined":i(e))&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var n=t.createObjectURL.bind(t),r=t.revokeObjectURL.bind(t),o=new Map,s=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++s;return o.set(t,e),a.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return n(e)},t.revokeObjectURL=function(e){r(e),o.delete(e)};var c=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return c.get.apply(this)},set:function(e){return this.srcObject=o.get(e)||null,c.set.apply(this,[e])}});var u=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=o.get(arguments[1])||null),u.apply(this,arguments)}}}}},function(e,t,n){"use strict";var r=n(313),i=Object.assign({},r);i.setLogLevel(i.LogLevels.INFO);var o=n(314).Devices,a=n(326),s=n(327),c=n(339),u=n(357),f=n(337),l=n(362);i.getCameraDevices=o.getCameras,i.getAudioInputDevices=o.getMics,i.getAudioOutputDevices=o.getSpeakers,i.detect=a.all,i.createStream=function(e){return new Promise(function(t,n){var r=new s(e);r.on("accepted",function(){t(r)}).on("error",function(e){n(e)}).init()})},i.createSession=function(e,t){return new Promise(function(n,r){var i=void 0;i=t?new c(e,t):new c(e),i.on("connected",function(){n(i)}).on("error",function(e){r(e)}),i.connect()})},i.createSFUSession=function(e,t){return new u(e,t)},i.setRelay=function(e,t){f.sender.enableIceFilter=e,f.receiver.enableIceFilter=t},i.getCurrentConfig=function(){return JSON.parse(JSON.stringify(f))},i.setPlayer=function(e){f.player=e},i.setVideoCodec=function(e){f.codec.video=e},i.setAudioCodec=function(e){f.codec.audio=e},i.STREAM_TYPE=s.TYPE,i.getVersion=function(){return"0.6"},i.STRATEGY=l,i.SESSION_STATE={DISCONNECTED:0,CONNECTING:1,CONNECTED:2},e.exports=i},function(e,t){"use strict";var n=!!navigator.mozGetUserMedia,r={2:"%c [ VERBOSE ] ",3:"%c [ DEBUG ] ",4:"%c [ INFO ] ",5:"%c [ WARN ] ",6:"%c [ ERROR ] ",7:"%c [ ASSERT ] "},i={2:"color: #9abff9",3:"color: #5c95f2",4:"color: #1a66e0;font-weight:bold;",5:"color: #aaaf0c;font-weight:bold;",6:"color: #ff4314;font-weight:bold;",7:"color: #a52b2b;font-weight:bold;"},o={log:function(e,t){if(e>=o.logLevel){var a=r[e]+t.join(" ");2==e?console.log(a,i[e]):3==e||4==e?n?console.error(a,i[e]):console.trace(a,i[e]):console.error(a,i[e])}},V:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.VERBOSE,t)},D:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.DEBUG,t)},I:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.INFO,t)},W:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.WARN,t)},E:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.ERROR,t)},A:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log(o.LogLevels.ASSERT,t)},setLogLevel:function(e){return o.logLevel=e},LogLevels:{VERBOSE:2,DEBUG:3,INFO:4,WARN:5,ERROR:6,ASSERT:7}};o.logLevel=o.LogLevels.VERBOSE,e.exports=o},function(e,t,n){"use strict";e.exports={LocalStreamWrapper:n(315),RemoteStreamWrapper:n(319),Connector:n(320),Devices:n(321),Player:n(322),Peer:n(324),Utils:n(323)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c={_initAudioConstraint:function(e,t){t?s.get(e)._audioConstraints={deviceId:{exact:t}}:s.get(e)._audioConstraints=!0},_initVideoConstraint:function(e,t,n,r){s.get(e)._videoConstraints={width:{ideal:t.width},height:{ideal:t.height},frameRate:{ideal:n}},r&&(s.get(e)._videoConstraints.deviceId={exact:r})}},u=n(316),f=n(317),l=n(318),d=!!navigator.mozGetUserMedia,p=!!navigator.webkitGetUserMedia,h=function(e){function t(e){var n=e.type,o=e.fps,a=e.size,u=e.videoSource,f=e.audioSource,l=e.extensionId,d=e.htmlElement;r(this,t);var p=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));switch(s.set(p,{}),s.get(p)._type=null,s.get(p)._audioConstraints=null,s.get(p)._videoConstraints=null,s.get(p)._extensionId=null,s.get(p)._htmlElement=null,n){case t.Type.AUDIO:c._initAudioConstraint(p,f);break;case t.Type.VIDEO:c._initVideoConstraint(p,a,o,u);break;case t.Type.AV:c._initAudioConstraint(p,f),c._initVideoConstraint(p,a,o,u);break;case t.Type.SCREEN:s.get(p)._extensionId=l;break;case t.Type.HTML_ELEMENT:s.get(p)._htmlElement=d;break;case t.Type.FILE:RTCat.W("the file type is not supported in this version");break;default:n=t.Type.AV,c._initAudioConstraint(p,f),c._initVideoConstraint(p,a,o,u)}return s.get(p)._type=n,p}return o(t,e),a(t,[{key:"init",value:function(){var e=s.get(this)._type,n=s.get(this)._audioConstraints,r=s.get(this)._videoConstraints,i=s.get(this)._htmlElement,o=s.get(this)._extensionId,a=this,c=function(e,t){return{audio:!1,video:{mandatory:{chromeMediaSource:e,chromeMediaSourceId:t,maxWidth:window.screen.width,maxHeight:window.screen.height}}}},f=function(e){return new Promise(function(t){navigator.mediaDevices.getUserMedia(e).then(function(e){a.setter(e),t()}).catch(a.onerror)})},h=function(){return new Promise(function(e){/^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(location.hostname)?a.onerror(l.localstreamwrapper_screensharing_host_invaild):chrome.runtime.sendMessage(o,{isInstalled:!0},function(t){if(t)if(d){var n={video:{mozMediaSource:"screen",mediaSource:"screen"}};f(n).then(function(){return e()})}else chrome.runtime.sendMessage(o,{getStream:!0},function(t){if(t){var n=c("desktop",t.streamId);f(n).then(function(){return e()})}});else a.onerror(l.localstreamwrapper_screensharing_extension_not_install)})})};return u(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:o.t0=e,o.next=o.t0===t.Type.AUDIO?3:o.t0===t.Type.VIDEO?6:o.t0===t.Type.AV?9:o.t0===t.Type.SCREEN?12:o.t0===t.Type.HTML_ELEMENT?15:o.t0===t.Type.FILE?17:18;break;case 3:return o.next=5,f({audio:n});case 5:return o.abrupt("break",19);case 6:return o.next=8,f({video:r});case 8:return o.abrupt("break",19);case 9:return o.next=11,f({audio:n,video:r});case 11:return o.abrupt("break",19);case 12:return o.next=14,h();case 14:return o.abrupt("break",19);case 15:return i.captureStream?a.setter(i.captureStream(15)):i.mozCaptureStream?a.setter(i.mozCaptureStream(15)):p?a.onerror(l.localstreamwrapper_capturestream_should_enable_flag):a.onerror(l.localstreamwrapper_capturestream_not_supported_yet),o.abrupt("break",19);case 17:return o.abrupt("break",19);case 18:return o.abrupt("break",19);case 19:return o.abrupt("return",a);case 20:case"end":return o.stop()}},o,this)}))}}]),t}(f);h.Type={AUDIO:1,VIDEO:2,AV:3,SCREEN:4,HTML_ELEMENT:5,FILE:6},e.exports=h},function(e,t){"use strict";function n(e){var t=this,n=l.call(arguments,1);return new Promise(function(i,o){function a(t){var n;try{n=e.next(t)}catch(e){return o(e)}u(n)}function c(t){var n;try{n=e.throw(t)}catch(e){return o(e)}u(n)}function u(e){if(e.done)return i(e.value);var n=r.call(t,e.value);return n&&s(n)?n.then(a,c):c(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(e.value)+'"'))}return"function"==typeof e&&(e=e.apply(t,n)),e&&"function"==typeof e.next?void a():i(e)})}function r(e){return e?s(e)?e:u(e)||c(e)?n.call(this,e):"function"==typeof e?i.call(this,e):Array.isArray(e)?o.call(this,e):f(e)?a.call(this,e):e:e}function i(e){var t=this;return new Promise(function(n,r){e.call(t,function(e,t){return e?r(e):(arguments.length>2&&(t=l.call(arguments,1)),void n(t))})})}function o(e){return Promise.all(e.map(r,this))}function a(e){function t(e,t){n[t]=void 0,o.push(e.then(function(e){n[t]=e}))}for(var n=new e.constructor,i=Object.keys(e),o=[],a=0;a<i.length;a++){var c=i[a],u=r.call(this,e[c]);u&&s(u)?t(u,c):n[c]=e[c]}return Promise.all(o).then(function(){return n})}function s(e){return"function"==typeof e.then}function c(e){return"function"==typeof e.next&&"function"==typeof e.throw}function u(e){var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||c(t.prototype))}function f(e){return Object==e.constructor}var l=Array.prototype.slice;e.exports=n.default=n.co=n,n.wrap=function(e){function t(){return n.call(this,e.apply(this,arguments))}return t.__generatorFunction__=e,t}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(n(316),function(){function e(t){r(this,e),this.videoTrack=null,this.audioTrack=null,this.mediaStream=null,t&&this.setter(t),this.onaudioend=function(){RTCat.D("stream audio over")},this.onvideoend=function(){RTCat.D("stream video over")},this.onerror=function(e){RTCat.E(e)}}return i(e,[{key:"setter",value:function(e){var t=this;this.mediaStream=e,this.videoTrack=e.getVideoTracks()&&e.getVideoTracks()[0],this.audioTrack=e.getAudioTracks()&&e.getAudioTracks()[0],this.videoTrack&&(this.videoTrack.onended=function(){t.onvideoend()}),this.audioTrack&&(this.audioTrack.onended=function(){t.onaudioend()})}},{key:"stop",value:function(){this.mediaStream.stop?this.mediaStream.stop():(this.stopVideo(),this.stopAudio())}},{key:"stopVideo",value:function(){this.videoTrack&&(this.videoTrack.stop(),this.mediaStream.removeTrack(this.videoTrack))}},{key:"stopAudio",value:function(){this.audioTrack&&(this.audioTrack.stop(),this.mediaStream.removeTrack(this.audioTrack))}},{key:"clone",value:function(){var t=new MediaStream;return this.videoTrack&&t.addTrack(this.videoTrack.clone()),this.audioTrack&&t.addTrack(this.audioTrack.clone()),new e(t)}},{key:"setVideoEnabled",value:function(e){this.videoTrack&&(this.videoTrack.enabled=e)}},{key:"setAudioEnabled",value:function(e){this.audioTrack&&(this.audioTrack.enabled=e)}},{key:"isVideoEnabled",value:function(){return this.videoTrack&&this.videoTrack.enabled}},{key:"isAudioEnabled",value:function(){return this.audioTrack&&this.audioTrack.enabled}}]),e}());e.exports=o},function(e,t){"use strict";var n={localstreamwrapper_screensharing_host_invaild:new Error("use domain for screensharing , not ip address."),localstreamwrapper_screensharing_extension_not_install:new Error("the screensharing extension is not installed or enabled."),localstreamwrapper_capturestream_not_supported_yet:new Error("the browser not support this feature now"),localstreamwrapper_capturestream_should_enable_flag:new Error("chrome should enable this flag(chrome://flags/#enable-experimental-web-platform-features) for this feature")};e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(317),s=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),t}(a);e.exports=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rtcat-protocol";n(this,e),this.url=t,this.tag="Connector : "+this.url,this.protocol=i,this.socket=null,this.state=e.CLOSED,this.onmessage=function(e){return RTCat.D(r.tag,"<onmessage>",e)},this.onclose=function(e){return RTCat.I(r.tag,"<onclose>")},this.onopen=function(e){return RTCat.I(r.tag,"<onopen>")},this.onerror=function(e){return RTCat.E(r.tag,"<onerror>",e)}}return i(e,[{key:"connect",value:function(){var t=this;this.socket=new WebSocket(this.url,this.protocol),this.state=e.CONNECTING,this.socket.onopen=function(){t.state=e.OPEN,t.onopen()},this.socket.onmessage=function(e){var n=void 0;try{n=JSON.parse(e.data)}catch(e){RTCat.W(t.tag,"<socket-onmessage>","json parse error",e)}n&&t.onmessage(n)},this.socket.onclose=function(){t.close(),t.onclose(),t.state=e.CLOSED},this.socket.onerror=function(e){t.onerror(e)}}},{key:"sendJSONWithHandler",value:function(e,t){if("object"==("undefined"==typeof e?"undefined":r(e))){var n=JSON.stringify(e);t&&"function"==typeof t&&(n=t(n)),this.sendStr(n)}else RTCat.W(this.tag,"<sendJSONWithHandler>",("undefined"==typeof e?"undefined":r(e))+" is not supported by the function")}},{key:"sendStr",value:function(e){this.socket&&1==this.socket.readyState?(RTCat.D(this.tag,"<sendStr>",e),this.socket.send(e)):RTCat.W(this.tag,"<sendStr>","pls use connector when it is open")}},{key:"close",value:function(){this.state=e.CLOSING,this.socket&&(1==this.socket.readyState&&this.socket.close(),this.socket=null)}}]),e}();o.CONNECTING=0,o.OPEN=1,o.CLOSING=2,o.CLOSED=3,e.exports=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=[],r=0,i=!0,o=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if(u.kind==e||"all"==e){var f={};""===u.label?(r++,"videoinput"==u.kind?f.label="Camera-"+r:"audioinput"==u.kind?f.label="Mic-"+r:"audiooutput"==u.kind?f.label="Speaker-"+r:(r--,f.label="unknown device")):f.label=u.label,f.groupId=u.groupId,f.deviceId=u.deviceId,f.kind=u.kind,n.push(f)}}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return n}function i(e,t){return t?void navigator.mediaDevices.enumerateDevices().then(function(n){t(null,r(e,n))}).catch(function(e){t(e,null)}):new Promise(function(t,n){navigator.mediaDevices.enumerateDevices().then(function(n){t(r(e,n))}).catch(function(e){n(e)})})}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){n(this,e)}return o(e,null,[{key:"getCameras",value:function(e){return i("videoinput",e)}},{key:"getMics",value:function(e){return i("audioinput",e)}},{key:"getSpeakers",value:function(e){return i("audiooutput",e)}},{key:"getDevices",value:function(e){return i("all",e)}},{key:"scanCamera",value:function(){var e=[[3840,2160],[1920,1080],[1600,1200],[1280,720],[800,600],[640,480],[640,360],[352,288],[320,240],[176,144],[160,120]],t=0,n=[],r=function r(i){var o=e[t++],a=void 0;setTimeout(function(){e[t]?navigator.mediaDevices.getUserMedia({video:{width:{exact:o[0]},height:{exact:o[1]}}}).then(function(e){n.push(o);e.getVideoTracks()[0].stop(),r(i)}).catch(function(e){RTCat.I("resolution "+o[0]+"x"+o[1]+" is not supported "),r(i)}):i(n)},a?200:0)};return new Promise(function(e){r(e)})}}]),e}();e.exports=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(323),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments[2];r(this,e),this.id=o.uuid(),this.tag="Player : "+this.id,this.element=document.createElement("video"),this.element.muted=n&&(this.element.volume=0),i&&this.setSize(i);var a=void 0;(a=document.querySelector(t))||(a=document.body,RTCat.W(this.tag,"constructor","unknown parent element,use body")),a.appendChild(this.element)}return i(e,[{key:"play",value:function(e){this.element&&e&&(this.element.setAttribute("autoplay","autoplay"),this.element.pause(),this.element.src=URL.createObjectURL(e),this.element.play())}},{key:"stop",value:function(){this.element&&(this.element.remove(),delete this.element)}},{key:"poster",value:function(e){this.element&&this.element.setAttribute("poster",e)}},{key:"setSize",value:function(e){var t=e.width,n=e.height;this.element&&(this.element.setAttribute("width",t),this.element.setAttribute("height",n))}},{key:"audioOutput",value:function(e){this.element.setSinkId(e)}},{key:"mute",value:function(e){this.element.muted=!!e}},{key:"load",value:function(e){e.source=this.element}}]),e}();e.exports=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"uuid",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}}]),e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(323),a=n(325),s=n(319),c=function(){function e(t){var n=this,i=t.peerConfig,a=void 0===i?{}:i,c=t.id,u=void 0===c?o.uuid():c,f=t.offerConstraint,l=void 0===f?{offerToReceiveAudio:1,offerToReceiveVideo:1}:f,d=t.isNegoIce,p=void 0!==d&&d;r(this,e),this.setId(u),this.isNegoIce=p,this.negoIce=!1,this.sIceQueue=[],this.rIceQueue=[],this.onerror=function(e){RTCat.E(n.tag,"<onerror>")},this.onstream=function(e){RTCat.I(n.tag,"<onstream>")},this.onice=function(e){RTCat.W(n.tag,"<onice>","drop candidate : "+e)},this.onclose=function(e){RTCat.I(n.tag,"<onclose>")},this.onconnected=function(e){RTCat.I(n.tag,"<onconnected>")},this.onicestate=function(e){RTCat.D(n.tag,"<onicestate>",e)},this.onicecomplete=function(e){RTCat.D(n.tag,"<onicecomplete>")},this.offerStream=null,this.remoteStream=null,this.peerConfig=a,this.offerConstraint=l,this.pc=new RTCPeerConnection(a),this.pc.onicecandidate=function(e){null==e.candidate||e.candidate.candidate.indexOf("endOfCandidates")>0?n.onicecomplete():n.onice&&(n.isNegoIce&&!n.negoIce?n.sIceQueue.push(e.candidate):n.onice(e.candidate))},this.pc.onaddstream=function(e){e.stream&&n.onstream&&(n.remoteStream=new s(e.stream),n.onstream(n.remoteStream))},this.pc.oniceconnectionstatechange=function(e){switch(RTCat.D(n.tag,"oniceconnectionstatechange",n.pc.iceConnectionState),n.onicestate(n.pc.iceConnectionState),n.pc.iceConnectionState){case"closed":n.offerStream&&n.offerStream.stop(),n.onclose();break;case"connected":n.onconnected()}},this.pc.onnegotiationneeded=function(e){RTCat.D(n.tag,"onnegotiationneeded")},this.pc.onsignalingstatechange=function(e){RTCat.D(n.tag,"onsignalingstatechange",n.pc.signalingState)},this.sChannel={},this.rChannel={}}return i(e,[{key:"setId",value:function(e){this.id&&RTCat.I(this.tag,"<setId>","change id : "+this.id+" -> "+e),this.id=e,this.tag="Peer : "+this.id}},{key:"addCandidate",value:function(e){this.isNegoIce&&!this.negoIce?this.rIceQueue.push(e):this.pc.addIceCandidate(e)}},{key:"offer",value:function(e,t,n){var r=this;if(e&&(this.offerStream=e,this.pc.addStream(this.offerStream.mediaStream)),t)for(var i in t){var o=t[i],s=this.pc.createDataChannel(i);this.sChannel[i]=new a(s,this.id);for(var c in o)this.sChannel[i][c]=o[c]}return new Promise(function(e){r.pc.createOffer(r.offerConstraint).then(function(t){var i=t;"function"==typeof n&&(i=n(t)),r.pc.setLocalDescription(i).then(function(t){e(i)}).catch(r.onerror)}).catch(r.onerror)})}},{key:"updateOffer",value:function(e,t){return e&&(this.pc.removeStream(this.offerStream.mediaStream),this.offerStream.stop()),this.offer(e,null,t)}},{key:"updateSdp",value:function(e,t){var n=this,r=this.pc,i=r.localDescription;"function"==typeof e&&(i.sdp=e(i.sdp)),r.setLocalDescription(i).then(function(e){var n=r.remoteDescription;return"function"==typeof t&&(n.sdp=t(n.sdp)),r.setRemoteDescription(n)}).then(function(e){RTCat.D(n.tag,"updateSdp","success")}).catch(this.onerror)}},{key:"answer",value:function(e,t,n,r){var i=this;return n&&(this.pc.ondatachannel=function(e){if(e.channel){var t=e.channel.label;if(i.rChannel[t]=new a(e.channel,i.id),n[t])for(var r in n[t])i.rChannel[t][r]=n[t][r]}}),new Promise(function(t){i.pc.setRemoteDescription(e).then(function(e){i.pc.createAnswer().then(function(e){var n=e;"function"==typeof r&&(n=r(n)),i.pc.setLocalDescription(n).then(function(e){t(n)}).catch(i.onerror)}).catch(i.onerror)}).catch(i.onerror)})}},{key:"foffer",value:function(e,t){var n=this;return new Promise(function(r){var i=e;"function"==typeof t&&(i=t(i)),n.pc.setRemoteDescription(i).then(function(e){if(n.isNegoIce){n.negoIce=!0;var t=!0,i=!1,o=void 0;try{for(var a,s=n.sIceQueue[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var c=a.value;n.onice(c)}}catch(e){i=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw o}}n.sIceQueue=[];var u=!0,f=!1,l=void 0;try{for(var d,p=n.rIceQueue[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var h=d.value;n.addCandidate(h)}}catch(e){f=!0,l=e}finally{try{!u&&p.return&&p.return()}finally{if(f)throw l}}n.rIceQueue=[]}r(e)}).catch(n.onerror)})}},{key:"getStats",value:function(){var e=this;return new Promise(function(t){e.pc&&e.pc.getStats(null).then(function(e){return t(e)}).catch(e.onerror)})}},{key:"close",value:function(){null!=this.pc&&"closed"!=this.pc.iceConnectionState&&this.pc.close()}}]),e}();c.NEW=1,c.CHECKING=2,c.CONNECTED=3,c.COMPLETED=4,c.FAILED=5,c.DISCONNECTED=6,c.CLOSED=7,e.exports=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.Type.Binary;n(this,e),this.pid=r,this.tag="channel : label -> "+t.label+" , pid -> "+this.pid,this.dc=t,this.dc.binaryType=o,this.onopen=function(e){return RTCat.I(i.tag,"<onopen>")},this.onmessage=function(e){return RTCat.D(i.tag,"<onmessage>",e)},this.onerror=function(e){return RTCat.E(i.tag,"<onerror>",e)},this.onclose=function(e){return RTCat.I(i.tag,"<onclose>")},this.dc.onopen=function(e){return i.onopen()},this.dc.onclose=function(e){return i.onclose()},this.dc.onerror=function(e){return i.onerror(e)},this.dc.onmessage=function(e){return i.onmessage(e.data)}}return r(e,[{key:"sendJSON",value:function(e){var t=JSON.stringify(e);this.send(t)}},{key:"send",value:function(e){this.dc&&"open"==this.dc.readyState?(RTCat.D(this.tag,"<send>",e),this.dc.send(e)):RTCat.W(this.tag,"<send>","can not send message when channel is not open.")}}]),e}();i.Type={Binary:"arraybuffer",Blob:"blob"},e.exports=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={uploadAddr:"https://api.realtimecat.com:443/dashboard/user/logout",uploadSize:10485760,downloadAddr:"https://cdn.realtimecat.com/realtimecat/random-file-100MB",detectTime:1e4},a=function(){function e(){n(this,e)}return i(e,null,[{key:"browser",value:function(){function e(){var e=new RegExp("QQBrowser/([0-9.]+)","g"),n=new RegExp("BIDUBrowser/([0-9.]+)","g"),r=new RegExp("Maxthon/([0-9.]+)","g"),i=new RegExp("LBBROWSER","g"),o=new RegExp("Chrome/([0-9]+).+SE.+MetaSr"),a=new RegExp("Chrome/([0-9.]+)"),s=void 0,c=void 0,u=void 0;return(s=e.exec(t))?(c="QQ",u=s[1]):(s=n.exec(t))?(c="Baidu",u=s[1]):(s=r.exec(t))?(c="Maxthon",u=s[1]):(s=i.exec(t))?(c="LB",u="***"):(s=o.exec(t))?(c="Sougo",u=Number(s[1])>=49?"6.3+":"6.3-"):(s=a.exec(t))&&(c="Chrome",u=s[1]),{name:c,version:u}}var t=navigator.userAgent,n=new RegExp("Edge/([0-9.]+)","g"),r=new RegExp("Firefox/([0-9.]+)","g"),i=new RegExp("Chrome/([0-9.]+)","g"),o=new RegExp(".NET.+rv:([0-9.]+)","g"),a=new RegExp("Version/([0-9.]+).+Safari","g"),s=void 0,c=void 0,u=void 0;if(s=n.exec(t))c="Edge",u=s[1];else if(s=r.exec(t))c="Firefox",u=s[1];else if(i.test(t)){var f=e();c=f.name,u=f.version}else(s=o.exec(t))?(c="IE",u=s[1]):(s=a.exec(t))&&(c="Safari",u=s[1]);return{name:c,version:u}}},{key:"compatibility",value:function(e){var t=void 0;switch(e.name){case"Chrome":t={media:!0,data:!0,screen:!0};break;case"QQ":t={media:!0,data:!0,screen:!0};break;case"Baidu":t={media:!0,data:!0,screen:!1};break;case"Sougou":t={media:!0,data:!0,screen:!1};break;case"LB":t={media:!1,data:!1,screen:!1};break;case"Firefox":t={media:!0,data:!0,screen:!0};break;case"Safari":t=e.version.indexOf("11")>-1?{media:!0,data:!0,screen:!0}:{media:!1,data:!1,screen:!1};break;default:t={media:!1,data:!1,screen:!1}}return t}},{key:"net",value:function(e,t){function n(e){return function(t,n){var o=void 0,u=new XMLHttpRequest;if(u.onreadystatechange=function(){},"down"===e)u.addEventListener("progress",function(e){o=e.loaded}),u.open("GET",i,!0),u.send();else if("up"==e){u.upload.addEventListener("progress",function(e){o=e.loaded});var f=r(s);u.open("POST",a,!0),u.send(f)}setTimeout(function(){var e=void 0;e=o/1024/(c/1e3),u.abort(),t(e)},c)}}function r(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(33+93*Math.random());return t}var i=o.downloadAddr+"?"+(new Date).getTime(),a=o.uploadAddr+"?"+(new Date).getTime(),s=o.uploadSize,c=o.detectTime,u=new Promise(n("down")),f=new Promise(n("up"));Promise.all([u,f]).then(function(t){e(t)})}},{key:"all",value:function(t,n){var i=void 0,o=void 0,a=!0,s=!0,c=!0;null==t&&null==n?(a=!0,s=!0,c=!0,n=function(){}):null!=t&&null!=n?(a=t.browser,s=t.compatibility,c=t.network):"object"===("undefined"==typeof t?"undefined":r(t))?(a=t.browser,s=t.compatibility,c=t.network,n=function(){}):"function"==typeof t&&(a=!0,s=!0,c=!0,n=t);var u={};return new Promise(function(t,r){if(i=e.browser(),s&&(o=e.compatibility(i),0==o.media)){var f="This Browser is not supported by shishimao";n(f,null),r(f)}a&&(u.browser=i),s&&(u.compatibility=o),c?new Promise(e.net).then(function(e){u.network={download:e[0],upload:e[1]},n(null,u),t(u)}):t(u)})}},{key:"isMoz",value:function(){return!!navigator.mozGetUserMedia}},{key:"isSafari",value:function(){return navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1}},{key:"getClientType",value:function(){return this.isMoz()?"Firefox":"Chrome"}},{key:"getPlatform",value:function(){var e=this.browser();return e.name+" "+e.version}},{key:"getDevice",value:function(){function e(e,t){var n=0,r=0,i=void 0,o=void 0,a=void 0,s=void 0,c=void 0;for(n=0;n<t.length;n+=1)if(i=new RegExp(t[n].value,"i"),a=i.test(e)){if(o=new RegExp(t[n].version+"[- /:;]([\\d._]+)","i"),s=e.match(o),c="",s&&s[1]&&(s=s[1]),s)for(s=s.split(/[._]+/),r=0;r<s.length;r+=1)c+=0===r?s[r]+".":s[r];else c="0";return{name:t[n].name,version:parseFloat(c)}}return{name:"unknown",version:0}}var t=[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],n=[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],r=n.join(" "),i=e(r,t);return i.name+" "+i.version}},{key:"getDomain",value:function(){return window.location.hostname}}]),e}();e.exports=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c=n(328),u=n(314).LocalStreamWrapper,f=n(338),l=n(330),d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{}));s.set(n,{}),n.ad_plugin=f(),n.ad_plugin.data.onvolume=function(e){n.emit("volume",e)};var o=e||{type:l.streamType,fps:l.fps,size:l.streamVideoSize,videoSource:null,audioSource:null,extensionId:l.screenExtensionId,canvas:null},a=o.type,c=void 0===a?l.streamType:a,d=o.fps,p=void 0===d?l.fps:d,h=o.size,v=void 0===h?l.streamVideoSize:h,y=o.videoSource,m=void 0===y?null:y,g=o.audioSource,b=void 0===g?null:g,S=o.extensionId,w=void 0===S?l.screenExtensionId:S,_=o.canvas,k=void 0===_?null:_;
return s.get(n)._type=c,n.streamWrapper=new u({type:c,fps:p,size:v,videoSource:m,audioSource:b,extensionId:w,htmlElement:k}),n.setStreamListener(),n.streamWrapper.onerror=function(e){n.emit("error",e)},n}return o(t,e),a(t,[{key:"init",value:function(){var e=this;this.streamWrapper.init().then(function(t){e.load(e.ad_plugin),e.emit("accepted")})}},{key:"detectVolume",value:function(e){this.ad_plugin.do(e)}},{key:"release",value:function(){this.stop(),this.streamWrapper&&this.streamWrapper.stop()}},{key:"getVideoType",value:function(){switch(s.get(this)._type){case t.TYPE.AV:return"video";case t.TYPE.VIDEO:return"video";case t.TYPE.HTML_ELEMENT:return"canvas";case t.TYPE.SCREEN:return"screen";default:return null}}}]),t}(c);d.TYPE=u.Type,e.exports=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.width,n=e.height,r=void 0,i="1";return t/n>2&&(i="2"),t<128?r=l.poster["sm"+i]:t>=128&&t<256?r=l.poster["md"+i]:t>=256&&t<512?r=l.poster["lg"+i]:t>=512&&(r=l.poster["xl"+i]),r}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=new WeakMap,u=n(329).EventEmitter,f=n(314).Player,l=n(330),d=n(331),p=n(332),h=n(333),v=n(335),y=n(336),m=n(337),g=n(326),b=function(e){function t(e){var n=e.stream,o=void 0===n?null:n,a=e.local,s=void 0===a||a;r(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return c.set(u,{}),u.streamWrapper=o,c.get(u)._id=p.generateUUID(),c.get(u)._local=s,c.get(u)._played=!1,c.get(u)._player=null,c.get(u)._selector=null,c.get(u)._state=null,c.get(u)._stateText=null,c.get(u)._streamCopys=[],c.get(u)._isOtherSidesAudioEnabled=!0,c.get(u)._isOtherSidesVideoEnabled=!0,u.streamWrapper&&u.setStreamListener(),u}return o(t,e),s(t,[{key:"play",value:function(e,t){if(c.get(this)._played)this.emit("error",new d(10003,(new Error).stack));else{c.get(this)._played=!0;var n=t||{size:{width:l.playerVideoSize.width,height:l.playerVideoSize.height}},r=n.size,i=n.poster,o=void 0;e=e||"local",o=e.indexOf("data-")==-1&&e.indexOf("#")==-1&&e.indexOf(".")==-1?"#"+e:e,c.get(this)._selector=o,c.get(this)._player=new f(o,c.get(this)._local,r),g.isSafari()?(c.get(this)._player.element.setAttribute("controls","controls"),c.get(this)._player.element.removeAttribute("autoplay")):(i||(i=a(r)),c.get(this)._player.poster(i)),c.get(this)._local||this.setPlayerListener(),c.get(this)._player.load(h),c.get(this)._player.load(v),c.get(this)._player.load(y),c.get(this)._player.play(this.streamWrapper.mediaStream)}}},{key:"setStreamListener",value:function(){var e=this;this.streamWrapper.onvideoend=function(t){e.emit("video_end")},this.streamWrapper.onaudioend=function(t){e.emit("audio_end")}}},{key:"setPlayerListener",value:function(){function e(){if(m.player.enableBeepOnConnected){var e=p.getAudioContext(),t=e.createOscillator();t.type="sine",t.connect(e.destination),t.start(),t.stop(e.currentTime+.04)}}var t=this;c.get(this)._player.element.addEventListener("canplay",function(e){}),c.get(this)._player.element.addEventListener("playing",function(n){t.emit("state_change","playing"),t.setPlayerText("connected"),e()}),c.get(this)._player.element.addEventListener("waiting",function(e){t.emit("state_change","waiting"),t.setPlayerText("connecting")})}},{key:"setPlayerText",value:function(e){if(m.player.enableDisplayConnectState){null!=c.get(this)._stateText&&(c.get(this)._stateText.remove(),delete c.get(this)._stateText);var t=c.get(this)._player.element.offsetTop,n=c.get(this)._player.element.offsetLeft+c.get(this)._player.element.offsetWidth,r=c.get(this)._player.element.offsetWidth/20,i=r/10,o=i,a=document.createElement("h6"),s=document.querySelector(c.get(this)._selector)||document.body;a.style.position="absolute",a.textContent=e,a.style.margin=0,a.style.fontSize=r+"px",s.appendChild(a),a.style.top=t+i+"px",a.style.left=n-i-a.offsetWidth-2*o+"px",a.style.backgroundColor="white",a.style.padding=o+"px",c.get(this)._stateText=a}}},{key:"stop",value:function(){c.get(this)._played&&(c.get(this)._played=!1,c.get(this)._player.stop()),c.get(this)._stateText&&(c.get(this)._stateText.remove(),delete c.get(this)._stateText)}},{key:"resize",value:function(e){c.get(this)._player.setSize(e)}},{key:"hasAudio",value:function(){return!!this.streamWrapper.audioTrack}},{key:"hasVideo",value:function(){return!!this.streamWrapper.videoTrack}},{key:"filter",value:function(){h.do("start")}},{key:"removeFilter",value:function(){h.do("stop")}},{key:"capture",value:function(e){return v.data.options=e,v.do()}},{key:"mirror",value:function(){y.do()}},{key:"getPlayer",value:function(){return c.get(this)._player}},{key:"getStream",value:function(){return this.streamWrapper.mediaStream}},{key:"getStreamWrapper",value:function(){return this.streamWrapper}},{key:"disableVideo",value:function(e){this.changeMedia("video",!1,e)}},{key:"disableAudio",value:function(e){this.changeMedia("audio",!1,e)}},{key:"enableVideo",value:function(e){this.changeMedia("video",!0,e)}},{key:"enableAudio",value:function(e){this.changeMedia("audio",!0,e)}},{key:"getStreamCloneWrapper",value:function(){var e=this.streamWrapper.clone();return e.setVideoEnabled(c.get(this)._isOtherSidesVideoEnabled),e.setAudioEnabled(c.get(this)._isOtherSidesAudioEnabled),c.get(this)._streamCopys.push(e),e}},{key:"changeMedia",value:function(e,t,n){var r=!0,i=!0;n?(n.self===!1&&(r=!1),n.others===!1&&(i=!1)):(r=!0,i=!0),r&&("audio"==e?this.streamWrapper.setAudioEnabled(t):"video"==e&&this.streamWrapper.setVideoEnabled(t)),i&&this.changeOtherSidesMedia(e,t)}},{key:"changeOtherSidesMedia",value:function(e,t){"audio"==e?c.get(this)._isOtherSidesAudioEnabled=t:"video"==e&&(c.get(this)._isOtherSidesVideoEnabled=t);for(var n in c.get(this)._streamCopys)c.get(this)._streamCopys.hasOwnProperty(n)&&c.get(this)._streamCopys[n]&&("audio"==e?c.get(this)._streamCopys[n].setAudioEnabled(t):"video"==e&&c.get(this)._streamCopys[n].setVideoEnabled(t))}},{key:"getId",value:function(){return c.get(this)._id}},{key:"load",value:function(e){return e.source=this.streamWrapper,this}}]),t}(u);e.exports=b},function(e,t){"use strict";function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"===("undefined"==typeof e?"undefined":s(e))&&null!==e}function a(e){return void 0===e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,c=0;c<i;c++)u[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";e.exports={fps:10,streamType:3,streamVideoSize:{width:320,height:240},playerVideoSize:{width:300,height:300},screenExtensionId:"kopddpjmdlllnpkpcphndjiaohbakkjb",publicServer:"wss://turn.rtcat.cn:3001",poster:{sm1:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-128x128.png",lg2:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-512x1024.png",md1:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-256x256.png",md2:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-256x512.png",xl1:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-1024x1024.png",lg1:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-512x512.png",xl2:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-1024x2048.png",sm2:"https://dn-learning-tech.qbox.me/realtimecat/video-placeholders/video-placeholder-128x256.png"}}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="Sorry, contact with RTCat for more information",i={10001:{error:"LOCAL_STREAM_NOT_INIT",message:"please call init() before do any operation!"},10002:{error:"REMOTE_STREAM_NOT_RECEIVED",message:"remote stream is empty,please try late."},10003:{error:"STREAM_ALREADY_PLAYED",message:"stream already played."},10004:{error:"STREAM_ALREADY_STOPPED",message:"stream already stopped."},10005:{error:"LOCAL_STREAM_ACCEPTED_DENIES",message:"stream accepted denies."},10006:{error:"EXTENSION_NOT_EXISTED",message:"the extension is not existed."},10007:{error:"BROWSER_NOT_SUPPORTED",message:"this browser is not supported by shishimao."},20001:{error:"TOKEN_IS_NULL",message:"can not construct a session without tokens."},20002:{error:"SESSION_CONNECT_ERROR",message:"connect server failed , and check your network."},20003:{error:"PROTOCOL_ERROR",message:"protocol error"},20004:{error:"MESSAGE_TYPE_NOT_SUPPORTED",message:"only support string , array and object message."},20005:{error:"MESSAGE_LENGTH_OUT_LIMIT",message:"the message is out of the limit length ( 1024 * 256 )."},20006:{error:"LINK_WITHOUT_STREAM_ERROR",message:"need a steam to link the server."},30001:{error:"INTERNAL_ERROR",message:"something wrong with your network , please try late."},30002:{error:"CHANNEL_ERROR",message:"data channel error"},40001:{error:"INTERNAL_ERROR",message:"something wrong with your network , please try late."},40002:{error:"CHANNEL_ERROR",message:"data channel error"},40003:{error:"SEND_FILE_PARALLEL_ERROR",message:"can not send file parallel."},40004:{error:"CHANNEL_NOT_OPEN",message:"can not send message before channel is open."},40005:{error:"SENDER_NOT_CONNECTED",message:"can not send message before sender is connected."}},o=function e(t,o,a){n(this,e),this.no=t,this.name=i[t].error||110,this.message=i[t].message||r,this.detail=a,this.stack=o};e.exports=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"generateUUID",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}},{key:"createRandomString",value:function(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=t.length,r="",i=0;i<e;i++){var o=Math.floor(Math.random()*n)%n;r+=t[o]}return r}},{key:"toDecimal",value:function(e){var t=parseFloat(e);return isNaN(t)?e:parseFloat(t.toFixed(2))}},{key:"getAudioContext",value:function(){if(e.audioContext)return e.audioContext;var t=window.AudioContext||window.webkitAudioContext;return e.audioContext=new t,e.audioContext}},{key:"object2URLParam",value:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+e[n]+"&");return t.slice(0,t.length-1)}},{key:"mapToJSON",value:function(e){var t={},n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=r(a.value,2),u=c[0],f=c[1];t[u]=f}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return t}}]),e}();e.exports=o},function(e,t,n){"use strict";function r(e,t){var n=void 0;switch(e){case"start":n=this.data.filter;break;case"stop":n="none";break;default:n="none"}t.style.webkitFilter=n,t.style.mozFilter=n,t.style.filter=n}function i(){}var o=n(334),a={filter:"blur(10px)"};e.exports=new o("filter","0.0.1",o.Type.PLAYER,r,i,a)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=new WeakMap,o=function(){function e(t,r,o,a,s,c){return n(this,e),i.set(this,{}),t&&r&&o&&a&&s?(i.get(this)._available=!0,this.name=t,this.version=r,this.type=o,this.handle=a,this.release=s,this.data=c,void(this.state=null)):void(i.get(this)._available=!1)}return r(e,[{key:"isAvailable",value:function(){return i.get(this)._available}},{key:"do",value:function(e){return e&&(this.state=e),this.handle(this.state,this.source)}}]),e}();o.Type={STREAM:"Stream",PLAYER:"Player"},e.exports=o},function(e,t,n){"use strict";function r(e,t){var n="image/png",r=1,i=document.createElement("canvas");i.width=t.offsetWidth,i.height=t.offsetHeight;var o=this.data.options||{type:n,quality:r,position:[0,0,t.offsetWidth,t.offsetHeight]},a=o.type,s=void 0===a?n:a,c=o.quality,u=void 0===c?r:c,f=o.position,l=void 0===f?[0,0,t.offsetWidth,t.offsetHeight]:f,d=i.getContext("2d");d.drawImage(t,l[0],l[1],l[2],l[3]);var p=i.toDataURL(s,u);return i.remove(),p}function i(){}var o=n(334),a={options:null};e.exports=new o("capture","0.0.1",o.Type.PLAYER,r,i,a)},function(e,t,n){"use strict";function r(e,t){var n=void 0;n=this.data.mirror?1:-1,this.data.mirror=!this.data.mirror,["","moz","webkit","o","ms"].forEach(function(e){var r=e?e+"Transform":"transform";t.style[r]="scaleX("+n+")"})}function i(){}var o=n(334),a={mirror:!1};e.exports=new o("mirror","0.0.1",o.Type.PLAYER,r,i,a)},function(e,t){"use strict";e.exports={sender:{enableIceFilter:!1},receiver:{enableIceFilter:!1},player:{enableBeepOnConnected:!1,enableDisplayConnectState:!1},log:{enableLogToSignal:!0,enableLogToApi:!0,logApiServerIp:"https://log.realtimecat.com",logApiDynamicPeriod:10},codec:{video:"H264",audio:"OPUS"}}},function(e,t,n){"use strict";function r(e,t,n,r){var i=e.createScriptProcessor(512);return i.onaudioprocess=function(e){for(var t=e.inputBuffer.getChannelData(0),n=t.length,r=0,i=void 0,o=0;o<n;o++)i=t[o],Math.abs(i)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),r+=i*i;var a=Math.sqrt(r/n);this.volume=Math.max(a,this.volume*this.averaging)},i.clipping=!1,i.lastClip=0,i.volume=0,i.clipLevel=t||.98,i.averaging=n||.95,i.clipLag=r||750,i.connect(e.destination),i.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},i.shutdown=function(){this.disconnect(),this.onaudioprocess=null},i}function i(e,t){function n(){i.data.detectVolume&&(i.data.onvolume&&i.data.onvolume(i.data.volumeMeter.volume),setTimeout(n,100))}var i=this;if(t.audioTrack)if("start"===e){this.data.detectVolume=!0;var o=s.getAudioContext(),a=o.createMediaStreamSource(t.mediaStream);this.data.volumeMeter=r(o),a.connect(this.data.volumeMeter),n()}else"stop"===e&&this.data.volumeMeter&&(this.data.volumeMeter.shutdown(),this.data.detectVolume=!1)}function o(){}var a=n(334),s=n(332),c={detectVolume:!1,volumeMeter:null,onvolume:null};e.exports=function(e){return new a("audio_detect","0.0.1",a.Type.STREAM,i,o,c)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=new WeakMap,u=n(329).EventEmitter,f=n(330),l=n(340),d=n(326),p=n(341),h=n(332),v=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(c.set(o,{}),o.tokenId=e,c.get(o)._handle=null,c.get(o)._isPassiveDisconnect=!0,o.tokenId){if(n&&"object"===("undefined"==typeof n?"undefined":a(n))){var s=n.type,u=void 0===s?"p2p":s,v=n.url,y=void 0===v?f.publicServer:v,m=n.encrypt,g=void 0!==m&&m;o.type=u,o.url=y,o.encrypt=!!g}else o.type="p2p",o.url=f.publicServer,o.encrypt=!1;var b=o.url+"?"+h.object2URLParam({tokenId:o.tokenId,encrypt:o.encrypt,type:o.type});"p2p"==o.type&&(c.get(o)._handle=new p(b,o.encrypt)),c.get(o)._handle.onconnected=function(e,t,n){l.postEvents(l.EventType.SessionConnect,{platform:d.getPlatform(),device:d.getDevice(),domain:d.getDomain(),tokenId:o.tokenId,sdk:"JS SDK "+RTCat.getVersion(),connectTime:n,server:t}),c.get(o)._isPassiveDisconnect=!0,o.emit("connected",e)},c.get(o)._handle.onin=function(e){o.emit("in",e)},c.get(o)._handle.onout=function(e){o.emit("out",e)},c.get(o)._handle.onremote=function(e){o.emit("remote",e)},c.get(o)._handle.onlocal=function(e){o.emit("local",e)},c.get(o)._handle.onmessage=function(e){o.emit("message",e)},c.get(o)._handle.onerror=function(e){o.emit("error",e)},c.get(o)._handle.ondisconnect=function(){l.postEvents(l.EventType.SessionDisconnect,{tokenId:o.tokenId,closed:c.get(o)._isPassiveDisconnect?l.DisconnectType.Passive:l.DisconnectType.Aggressive}),o.emit("disconnect")},c.get(o)._handle.onapilog=function(e,t){t.tokenId=o.tokenId,l.postEvents(e,t)}}else o.emit("error",new Error("Token can't be null"));return o}return o(t,e),s(t,[{key:"connect",value:function(){c.get(this)._handle.connect()}},{key:"send",value:function(e){c.get(this)._handle.broadcast(e)}},{key:"sendTo",value:function(e){c.get(this)._handle.unicast(e)}},{key:"link",value:function(e){c.get(this)._handle.link(e)}},{key:"unlink",value:function(){c.get(this)._handle.unlink()}},{key:"sendMessage",value:function(e,t){c.get(this)._handle.sendMessage(e,t)}},{key:"broadcastMessage",value:function(e){c.get(this)._handle.broadcastMessage(e)}},{key:"getState",value:function(){return c.get(this)._handle.state}},{key:"getWits",value:function(){return c.get(this)._handle.wits}},{key:"getReceivers",value:function(){return c.get(this)._handle.remote}},{key:"getSenders",value:function(){return c.get(this)._handle.local}},{key:"disconnect",value:function(){c.get(this)._isPassiveDisconnect=!1,c.get(this)._handle.disconnect()}},{key:"setIceServer",value:function(e){c.get(this)._handle.setIceServer(e)}},{key:"updateBySetting",value:function(){c.get(this)._handle.updateAllSender()}}]),t}(u);e.exports=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(337),a=function(){function e(){r(this,e)}return i(e,null,[{key:"postJson",value:function(e,t){function n(){a++,r()}function r(){u.open("post",c,!0),u.setRequestHeader("Content-Type","application/json;charset=UTF-8"),u.send(JSON.stringify(t))}if(o.log.enableLogToApi){t.timestamp=Math.floor(Date.now()/1e3);var i=o.log.logApiServerIp,a=0,s=3,c=i+"/"+e,u=new XMLHttpRequest;u.onload=function(){var e=(u.status,JSON.parse(u.response));!e.id&&a<s&&n()},u.onerror=function(){a<s&&n()},r()}}},{key:"postDynamic",value:function(t){e.postJson("dynamic",t)}},{key:"postEvents",value:function(t,n){var r={from:"client",type:t,data:n};e.postJson("events",r)}},{key:"postSFULog",value:function(e,t){var n="native_log_test_0_"+e,r="https://log.learning-tech.cn:8800/json",i={module:n,data:t};t.timestamp=Math.floor(Date.now()/1e3);var o=new XMLHttpRequest;o.onload=function(){o.status,JSON.parse(o.response)},o.onerror=function(){};var a=JSON.stringify(i);o.open("post",r,!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(a)}}]),e}();a.DynamicType={Audio:1,Video:2},a.PeerType={Sender:1,Receiver:2},a.DisconnectType={Passive:"passive",Aggressive:"aggressive"},a.EventType={SessionConnect:"session_connect",SessionDisconnect:"session_disconnect",PeerConnect:"peer_connect",PeerDisConnect:"peer_disconnect",ChannelConnect:"channel_connect",ChannelDisConnect:"channel_disconnect",Error:"error",WebRTC:"webrtc"},e.exports=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(342),c=n(343),u=n(352),f=n(331),l=n(356),d=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.encrypt=n,o.state=RTCat.SESSION_STATE.DISCONNECTED,o.local={},o.remote={},o.wits={},o.iceServers=[],o.manualIceServer=null,o}return o(t,e),a(t,[{key:"connect",value:function(e){var t=this,n=void 0,r=void 0;this.state=RTCat.SESSION_STATE.CONNECTING,this.connector.onopen=function(){t.checkin()},this.connector.onmessage=function(e){var i=e.data;switch(e.eventName){case l.S2C.JOIN:t.wits[i.tokenId]=new s(i.tokenId),t.onin(t.wits[i.tokenId].id);break;case l.S2C.PEERS:t.iceServers=i.iceServers;var o=i.connections;r=i.server;var a=Date.now()-n,c=[],d=!0,p=!1,h=void 0;try{for(var v,y=o[Symbol.iterator]();!(d=(v=y.next()).done);d=!0){var m=v.value;t.wits[m]=new s(m),c.push(m)}}catch(e){p=!0,h=e}finally{try{!d&&y.return&&y.return()}finally{if(p)throw h}}t.state=RTCat.SESSION_STATE.CONNECTED,t.onconnected(c,r,a);break;case l.S2C.REMOVE_PEER:var g=i.tokenId;for(var b in t.local[g])t.local[g].hasOwnProperty(b)&&t.local[g][b].close();for(var S in t.remote[g])t.remote[g].hasOwnProperty(S)&&t.remote[g][S].close();t.onout(t.wits[g].id),delete t.wits[g],delete t.remote[g],delete t.local[g];break;case l.S2C.OFFER:var w=t,_=i.config;_.from=i.from,_.sdp=i.sdp,_.channelId=i.channelId,t.manualIceServer?_.constraints={iceServers:[t.manualIceServer]}:_.constraints={iceServers:t.iceServers};var k=void 0;if(t.remote[i.from]&&t.remote[i.from][i.channelId])return k=t.remote[i.from][i.channelId],void k.updatePeer(i.sdp);k=new u(_),t.remote[i.from]=t.remote[i.from]||{},t.remote[i.from][i.channelId]=k,k.on("_log",function(e){w.send(l.C2S.LOG,e)}),k.on("_answer",function(e){w.send(l.C2S.ANSWER,e)}),k.on("_ice",function(e){w.send(l.C2S.ICE,e)}),k.on("_ice_complete",function(e){w.send(l.C2S.ICE_COMPLETE,e)}),k.on("_log_api",function(e,t){w.onapilog(e,t)}),t.onremote(k);break;case l.S2C.ANSWER:var C=t.local[i.from][i.channelId];C.receive(i.sdp),C.registered||(C.registered=!0,t.onlocal(C));break;case l.S2C.ICE:var T=void 0;"answer"==i.type?T=t.local[i.from][i.channelId]:"offer"==i.type&&t.remote[i.from]&&(T=t.remote[i.from][i.channelId]),T&&T.candidate(i.candidate);break;case l.S2C.MESSAGE:t.onmessage({from:i.from,message:i.message});break;case l.S2C.ERROR:t.onerror(new f(20003,(new Error).stack,i.error))}},this.connector.onerror=function(e){t.onerror(new f(20002,(new Error).stack,e))},this.connector.onclose=function(){t.state=RTCat.SESSION_STATE.DISCONNECTED,t.release(),t.ondisconnect()},n=Date.now(),this.connector.connect()}},{key:"broadcast",value:function(e){var t=e.data,n=void 0!==t&&t,r=e.attr,i=void 0===r?{}:r,o=e.stream,a=void 0!==o&&o;for(var s in this.wits)this.wits.hasOwnProperty(s)&&this.unicast({data:n,attr:i,stream:a,to:s})}},{key:"unicast",value:function(e){var t=e.data,n=void 0!==t&&t,r=e.attr,i=void 0===r?{}:r,o=e.stream,a=void 0!==o&&o,s=e.to,u=void 0!==s&&s,f=this;if(f.wits.hasOwnProperty(u)){var d={constraints:{iceServers:this.iceServers},data:n,attr:i,stream:a,to:u};this.manualIceServer&&(d.constraints={iceServers:[this.manualIceServer]});var p=new c(d),h=p.getId();this.local[u]=this.local[u]||{},this.local[u][h]=p,p.on("_log",function(e){f.send(l.C2S.LOG,e)}),p.on("_offer",function(e){f.send(l.C2S.OFFER,e)}),p.on("_ice",function(e){f.send(l.C2S.ICE,e)}),p.on("_ice_complete",function(e){f.send(l.C2S.ICE_COMPLETE,e)}),p.on("_log_api",function(e,t){f.onapilog(e,t)})}}},{key:"updateAllSender",value:function(){for(var e in this.local)if(this.local.hasOwnProperty(e))for(var t in this.local[e])this.local[e].hasOwnProperty(n1)&&this.local[e][t].updatePeer()}},{key:"setIceServer",value:function(e){this.manualIceServer=e}},{key:"disconnect",value:function(){this.connector.close()}},{key:"release",value:function(){if(this.remote){for(var e in this.remote)if(this.remote.hasOwnProperty(e))for(var t in this.remote[e])this.remote[e].hasOwnProperty(t)&&this.remote[e][t].close();this.remote={}}if(this.local){for(var n in this.local)if(this.local.hasOwnProperty(n))for(var r in this.local[n])this.local[n].hasOwnProperty(r)&&this.local[n][r].close();this.local={}}this.wits&&(this.wits={})}}]),t}(l);e.exports=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(t){n(this,e),this.id=t};e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c=n(329).EventEmitter,u=n(344),f=(n(332),function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.set(n,{}),s.get(n)._handler=new u(e),s.get(n)._handler.init(),n.registered=!1,s.get(n)._handler.eventHandler=function(e,t){switch(t.length){case 0:n.emit(e);break;case 1:n.emit(e,t[0]);break;case 2:n.emit(e,t[0],t[1]);break;default:n.emit(e)}},s.get(n)._handler.createOffer(),n}return o(t,e),a(t,[{key:"receive",value:function(e){s.get(this)._handler.receiver(e)}},{key:"candidate",value:function(e){s.get(this)._handler.addCandidate(e)}},{key:"sendMessage",value:function(e){s.get(this)._handler.sendMessage(e)}},{key:"sendFile",value:function(e){s.get(this)._handler.sendFile(e)}},{key:"close",value:function(){s.get(this)._handler.close()}},{key:"getId",value:function(){return s.get(this)._handler.id}},{key:"getRole",value:function(){return s.get(this)._handler.role}},{key:"getReceiver",value:function(){return this.getReceiverToken()}},{key:"getReceiverToken",value:function(){return s.get(this)._handler.opposite;
}},{key:"getAttr",value:function(){return s.get(this)._handler.attr}},{key:"enableVideo",value:function(){s.get(this)._handler.setVideoEnabled(!0)}},{key:"enableAudio",value:function(){s.get(this)._handler.setAudioEnabled(!0)}},{key:"disableVideo",value:function(){s.get(this)._handler.setVideoEnabled(!1)}},{key:"disableAudio",value:function(){s.get(this)._handler.setAudioEnabled(!1)}},{key:"updateAndCreateOffer",value:function(){s.get(this)._handler.updateAndCreateOffer()}},{key:"updatePeer",value:function(){s.get(this)._handler.updatePeer()}}]),t}(c));e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(345),u=n(349),f=n(350),l=n(332),d=n(314).Peer,p=n(351),h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.id=l.generateUUID(),n.role="sender",n.opposite=e.to,n.stream=e.stream,n.stream&&(n.streamWrapper=n.stream.getStreamCloneWrapper()),n.peer=new d({peerConfig:n.peerConfig,isNegoIce:!1}),n}return o(t,e),a(t,[{key:"init",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),RTCat.STRATEGY.quality.enable&&this.hasAudio()&&this.hasVideo()&&(this.quality=new p(RTCat.STRATEGY.quality),this.quality.changeBandwidth=function(t,n){e.onBandwidthChange(t,n)}),this.currentFile=null,this.fileSending=!1}},{key:"createOffer",value:function(){function e(e){var n={to:t.opposite,sdp:e,channelId:t.id,config:{stream:!!t.stream,audio:t.hasVideo(),video:t.hasAudio(),data:t.data,attr:t.attr}};t.eventHandler("_offer",[n])}this.rcq=[];var t=this,n={};n[this.channelLabel.Message]=this.getChannelHandler(this.channelLabel.Message),n[this.channelLabel.File]=this.getChannelHandler(this.channelLabel.File),this.stream&&this.data?this.peer.offer(this.streamWrapper,n,c.codecHandler).then(e):this.stream?this.peer.offer(this.streamWrapper,null,c.codecHandler).then(e):this.data&&this.peer.offer(null,n,c.codecHandler).then(e)}},{key:"receiver",value:function(e){var t=this;this.peer.foffer(e).then(function(e){t.handshake=!0,t.onHandShake()})}},{key:"sendFileInternal",value:function(){this.fileSending=!0;var e=this.fileChannel,t=this.currentFile,n=this;f.sliceFile(t,function(t){e.send(t)},function(e){n.eventHandler("file_sending",[t.name,e])})}},{key:"messageChannelOnMessage",value:function(e){var t=JSON.parse(e);if("response"===t.type&&"file"===t.response){var n=t.content.name,r=t.content.purpose;n===this.currentFile.name&&("finish"===r?(this.eventHandler("file_sent",[this.currentFile.name]),this.fileSending=!1,this.currentFile=null):"agree"===r&&this.sendFileInternal())}}},{key:"sendMessage",value:function(e){if(this.msgChannel){var t={content:e,type:"message"};this.msgChannel.sendJSON(t)}else RTCat.E(this.tag,"<sendMessage>","message channel has not been established")}},{key:"sendFile",value:function(e){if(!this.fileSending&&e.size>0){this.currentFile=e;var t={file:{name:e.name,size:e.size,type:e.type},type:"file"};this.msgChannel?this.msgChannel.sendJSON(t):RTCat.E(this.tag,"<sendMessage>","message channel has not been established")}else RTCat.E(this.tag,"<sendFile>","this sender can not send file"),this.eventHandler("error",[new Errors(40003,(new Error).stack)])}},{key:"channelOnMessage",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"channelOnMessage",this).call(this,e,n),e==this.channelLabel.Message&&this.messageChannelOnMessage(n)}},{key:"setVideoEnabled",value:function(e){this.peer.localstream&&this.peer.localstream.setVideoEnabled(e)}},{key:"setAudioEnabled",value:function(e){this.peer.localstream&&this.peer.localstream.setAudioEnabled(e)}},{key:"updateAndCreateOffer",value:function(){this.createOffer()}},{key:"updatePeer",value:function(){this.peer.onclose=function(e){},this.peer.close(),this.peer=new d({peerConfig:this.peerConfig,isNegoIce:!1});try{this.webrtcLog.stop(),this.webrtcLog=null}catch(e){}this.init(),this.createOffer()}},{key:"onBandwidthChange",value:function(e,t){this.peer&&this.peer.updateSdp(null,function(n){return"audio"==t?u.updateAudioBandwidth(n,e):"video"==t?u.updateVideoBandwidth(n,e):void 0})}},{key:"videoQualityHandler",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"videoQualityHandler",this).call(this,e),this.quality&&this.quality.addVideoQuality(e)}},{key:"close",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"close",this).call(this)}}]),t}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(340),a=n(346),s=n(331),c=n(326),u=n(347),f=(n(314).Peer,n(337)),l=n(349),d=function(){function e(t){r(this,e),this.channelLabel={Message:"data",File:"file"},this.peerConfig=t.constraints,this.attr=t.attr,this.data=t.data,this.id=null,this.opposite=null,this.role=null,this.peer=null}return i(e,[{key:"init",value:function(){var e=this;this.msgChannel=null,this.fileChannel=null,this.tag=this.role+" : "+this.id,this.webrtcLog=new u(this.role),this.rcq=[],this.handshake=!1,this.handshakeTime=null,this.isPassiveDisconnect=!0,this.peerConnectInfo={role:this.role,opposite:this.opposite,peerId:this.id,video:{},audio:{},type:null,location:null,localAddress:null,remoteAddress:null,ipList:[],transport:null,networkType:null,lastConnectTime:null},this.iceIpList=[],this.isLogPeerConnectInfo=!1,this.dynamicCountVideo=0,this.dynamicCountAudio=0,this.dynamicLogPeriod=f.log.logApiDynamicPeriod,this.peer.onice=function(t){e.peerOnIce(t)},this.peer.onclose=function(t){e.peerOnClose()},this.peer.onconnected=function(t){e.peerOnConnected()},this.peer.onerror=function(t){e.peerOnError(t)},this.peer.onicecomplete=function(){},this.peer.onicestate=function(t){"failed"===t&&e.peer.close()},this.addWebRTCLogHandler()}},{key:"eventHandler",value:function(e,t){}},{key:"channelEvent",value:function(e,t){this.logApi(e,{peerId:this.id,label:t})}},{key:"peerOnIce",value:function(e){var t=a.getIp(e),n=a.getType(e);if(this.iceIpList.includes(t)||this.iceIpList.push(t),"srflx"==n&&(this.peerConnectInfo.location=t),this.iceFilter(e)){var r="sender"==this.role?"offer":"answer",i={to:this.opposite,channelId:this.id,candidate:e,type:r};this.eventHandler("_ice",[i])}}},{key:"peerOnClose",value:function(){this.logApi(o.EventType.PeerDisConnect,{peerId:this.id,closed:this.isPassiveDisconnect?o.DisconnectType.Passive:o.DisconnectType.Aggressive}),this.webrtcLog.stop(),this.eventHandler("close",[])}},{key:"peerOnConnected",value:function(){this.peerConnectInfo.lastConnectTime=Date.now()-this.handshakeTime,this.webrtcLog.start()}},{key:"peerOnError",value:function(e){RTCat.E(this.tag,"<Peer On Error>",e),this.logApi(o.EventType.Error,{peerId:this.id,type:"webrtc_error",message:e.message})}},{key:"channelOnOpen",value:function(e){this.channelEvent(o.EventType.ChannelConnect,e),e==this.channelLabel.Message?("receiver"==this.role?this.msgChannel=this.peer.rChannel[e]:this.msgChannel=this.peer.sChannel[e],this.eventHandler("channel_open",[])):("receiver"==this.role?this.fileChannel=this.peer.rChannel[e]:this.fileChannel=this.peer.sChannel[e],this.eventHandler("file_channel_open",[])),RTCat.D(this.tag,"<onopen>",e+" channel is open")}},{key:"channelOnClose",value:function(e){this.channelEvent(o.EventType.ChannelDisConnect,e),e===this.channelLabel.Message?this.eventHandler("channel_close",[]):this.eventHandler("file_channel_close",[]),RTCat.D(this.tag,"<onclose>",e+" channel is closed")}},{key:"channelOnError",value:function(e,t){e===this.channelLabel.Message?this.eventHandler("channel_error",[new s(30002,(new Error).stack,t)]):this.eventHandler("file_channel_error",[new s(30002,(new Error).stack,t)]),RTCat.E(this.tag,"<onerror>",t)}},{key:"channelOnMessage",value:function(e,t){}},{key:"addWebRTCLogHandler",value:function(){var e=this,t="sender"==e.role?o.PeerType.Sender:o.PeerType.Receiver,n=0;e.webrtcLog.on("get_stats",function(){c.isSafari()||e.peer.getStats(function(t){e.webrtcLog.addResult(t.result())})}),e.webrtcLog.on("client_log",function(r){e.hasAudio()&&(e.dynamicCountAudio++,e.dynamicCountAudio%e.dynamicLogPeriod==0&&o.postDynamic({role:t,peerId:e.id,type:o.DynamicType.Audio,count:Math.floor(e.dynamicCountAudio/e.dynamicLogPeriod),bytesReceived:r.audio.bitrate,packetLoss:r.audio.packetsLossRate,jitter:r.audio.jitter}),e.peerConnectInfo.audio.codec=r.audio.codecName),e.hasVideo()&&(e.dynamicCountVideo++,e.dynamicCountVideo%e.dynamicLogPeriod==0&&o.postDynamic({role:t,peerId:e.id,type:o.DynamicType.Video,count:Math.floor(e.dynamicCountVideo/e.dynamicLogPeriod),bytesReceived:r.video.bitrate,packetLoss:r.video.packetsLossRate,decodeTime:r.video.decodeMs,jitter:r.video.jitter,mos:r.video.mos}),e.peerConnectInfo.video={width:r.video.width,height:r.video.height,fps:r.video.fps,codec:r.video.codecName}),e.isLogPeerConnectInfo||(e.peerConnectInfo.type=r.net.local_candidate_type,e.peerConnectInfo.localAddress=r.net.local_ip,e.peerConnectInfo.remoteAddress=r.net.remote_ip,e.peerConnectInfo.transport=r.net.transport_protocol,e.peerConnectInfo.networkType=r.net.networkType,e.peerConnectInfo.ipList=e.iceIpList,n>=2||e.checkLogInfo()?(e.isLogPeerConnectInfo=!0,e.logApi(o.EventType.PeerConnect,e.peerConnectInfo)):n++),e.videoQualityHandler(r.video.mos),e.eventHandler("detect_net",[JSON.parse(JSON.stringify(r.net))]),e.eventHandler("log",[JSON.parse(JSON.stringify(r))])})}},{key:"logApi",value:function(e,t){this.eventHandler("_log_api",[e,t])}},{key:"hasVideo",value:function(){return this.stream&&this.stream.hasVideo()}},{key:"hasAudio",value:function(){return this.stream&&this.stream.hasAudio()}},{key:"addCandidate",value:function(e){RTCat.D(this.tag,"<addCandidate>",JSON.stringify(e)),this.peerIceHandler(e)}},{key:"iceFilter",value:function(e){var t=void 0;return t=f.sender.enableIceFilter&&"sender"==this.role||f.receiver.enableIceFilter&&"receiver"==this.role,!t||a.iceFilter(e,"relay")}},{key:"peerIceHandler",value:function(e){this.iceFilter(e)&&(this.handshake?this.peer.addCandidate(e):this.rcq.push(e))}},{key:"onHandShake",value:function(){var e=this;this.handshakeTime=Date.now(),this.rcq.forEach(function(t){e.peerIceHandler(t)})}},{key:"getChannelHandler",value:function(e){var t={},n=this;return t.onopen=function(){n.channelOnOpen(e)},t.onclose=function(){n.channelOnClose(e)},t.onerror=function(t){n.channelOnError(e,t)},t.onmessage=function(t){n.channelOnMessage(e,t)},t}},{key:"checkLogInfo",value:function(){for(var e in this.peerConnectInfo)if(this.peerConnectInfo.hasOwnProperty(e)&&(null==this.peerConnectInfo[e]||void 0==this.peerConnectInfo[e]))return!1;return!0}},{key:"videoQualityHandler",value:function(e){}},{key:"close",value:function(){this.isPassiveDisconnect=!1,this.peer.close()}}],[{key:"codecHandler",value:function(e){return e.sdp=l.maybePreferVideoSendCodec(e.sdp,{videoSendCodec:f.codec.video}),e.sdp=l.maybePreferAudioSendCodec(e.sdp,{audioSendCodec:f.codec.audio}),e}}]),e}();e.exports=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"getIp",value:function(e){var t=/(\d+\.\d+\.\d+\.\d+)/,n=e.candidate.match(t);return n&&n[1]?n[1]:"unknown"}},{key:"getType",value:function(e){var t=/typ\s([a-z]+)/,n=e.candidate.match(t);return n[1]}},{key:"iceFilter",value:function(e,t){return e.candidate.indexOf("typ "+t)!=-1}}]),e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=new Map;return e.forEach(function(e){var n={};n.type=e.type,n.id=e.id,n.timestamp=e.timestamp;var r=e.names();r.forEach(function(t){n[t]=e.stat(t)}),t.set(e.id,n)}),t}function s(e){var t=[],n=new Map,r=new Map,i=!0,o=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var f=u(s.value,2),l=f[0],d=f[1];t.includes(d.type)?n.set(l,d):r.set(l,d)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return[n,r]}function c(e){var t=parseFloat(e);return isNaN(t)?e:parseFloat(t.toFixed(2))}var u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(348),d=n(329).EventEmitter,p=n(326),h=n(332),v={GENERATE_LOG_PERIOD:1,DYNAMIC_NUMBER:10},y=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type=e,n.video={},n.audio={},n.net={},n.videoBwe={},n.videoDetecter=new l(e),n.clientLog={},n.generateTimer=null,n.isStart=!1,n.hasVideo=!1,n.hasAudio=!1,n.statsList=[],n.isStaticLog=!1,n}return o(t,e),f(t,[{key:"start",value:function(){this.isStart||(this.isStart=!0,this.addLogTimer())}},{key:"addLogTimer",value:function(){var e=this;this.generateTimer=setInterval(function(){e.emit("get_stats")},1e3*v.GENERATE_LOG_PERIOD)}},{key:"addResult",value:function(e){var t=a(e);p.isMoz()?this.parserStatsMoz(t):this.parserStats(t),this.updateClientLog();var n=s(t),r=h.mapToJSON(n[0]),i=h.mapToJSON(n[1]);this.isStaticLog||(this.isStaticLog=!0,this.onStaticLog(r)),this.statsList.push(i),this.statsList.length>=v.DYNAMIC_NUMBER&&(this.onDynamicLog(this.statsList),this.statsList=[])}},{key:"parserStatsMoz",value:function(e){var t=this,n=void 0,r=void 0,i=!0,o=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var f=u(s.value,2),l=(f[0],f[1]);"sender"==t.type&&("outboundrtp"==l.type&&"video"==l.mediaType&&(l.isRemote||t.fetchVideoState(l)),"outboundrtp"==l.type&&"audio"==l.mediaType&&(l.isRemote||t.fetchAudioState(l))),"receiver"==t.type&&("inboundrtp"==l.type&&"video"==l.mediaType&&(l.isRemote||t.fetchVideoState(l)),"inboundrtp"==l.type&&"audio"==l.mediaType&&(l.isRemote||t.fetchAudioState(l))),"candidatepair"==l.type&&1==l.selected&&l.localCandidateId&&l.remoteCandidateId&&(n=l.localCandidateId,r=l.remoteCandidateId)}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}var d=!0,p=!1,h=void 0;try{for(var v,y=e[Symbol.iterator]();!(d=(v=y.next()).done);d=!0){var m=u(v.value,2),l=(m[0],m[1]);"localcandidate"==l.type&&l.id==n&&(t.net.local_ip=l.ipAddress,t.net.local_candidate_type=l.candidateType,t.net.transport_protocol=l.transport),"remotecandidate"==l.type&&l.id==r&&(t.net.remote_ip=l.ipAddress,t.net.remote_candidate_type=l.candidateType)}}catch(e){p=!0,h=e}finally{try{!d&&y.return&&y.return()}finally{if(p)throw h}}}},{key:"parserStats",value:function(e){var t=this,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=u(o.value,2),c=(s[0],s[1]);"googCandidatePair"==c.type&&"true"==c.googActiveConnection&&"true"==c.googReadable&&t.fetchNetState(c),"VideoBwe"==c.type&&t.fetchVideoBwe(c),"localcandidate"==c.type&&(t.net.networkType=c.networkType),"ssrc"==c.type&&("video"==c.mediaType&&(c.hasOwnProperty("bytesSent")&&"sender"==t.type||c.hasOwnProperty("bytesReceived")&&"receiver"==t.type)&&t.fetchVideoState(c),"audio"==c.mediaType&&(c.hasOwnProperty("bytesSent")&&"sender"==t.type||c.hasOwnProperty("bytesReceived")&&"receiver"==t.type)&&t.fetchAudioState(c))}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"fetchNetState",value:function(e){if("sender"==this.type){var t=c(e.bytesSent/1024);this.net.kBpsSent=c((t-(this.net.kBytesSent||0))/v.GENERATE_LOG_PERIOD),this.net.kBpsSent=this.net.kBpsSent>0?this.net.kBpsSent:0,this.net.kBytesSent=t}if("receiver"==this.type){var n=c(e.bytesReceived/1024);this.net.kBpsReceived=c((n-(this.net.kBytesReceived||0))/v.GENERATE_LOG_PERIOD),this.net.kBpsReceived=this.net.kBpsReceived>0?this.net.kBpsReceived:0,this.net.kBytesReceived=n}e.googLocalAddress&&(this.net.local_ip=e.googLocalAddress),e.googRemoteAddress&&(this.net.remote_ip=e.googRemoteAddress),e.googLocalCandidateType&&(this.net.local_candidate_type=e.googLocalCandidateType),e.googRemoteCandidateType&&(this.net.remote_candidate_type=e.googRemoteCandidateType),e.googTransportType&&(this.net.transport_protocol=e.googTransportType),e.googRtt&&(this.net.rtt=e.googRtt)}},{key:"fetchVideoBwe",value:function(e){"receiver"==this.type&&e.googAvailableReceiveBandwidth&&(this.videoBwe.arb=e.googAvailableReceiveBandwidth),"sender"==this.type&&e.googAvailableSendBandwidth&&(this.videoBwe.asb=e.googAvailableSendBandwidth)}},{key:"fetchVideoState",value:function(e){if(this.hasVideo=!0,"receiver"==this.type){var t=c(e.bytesReceived/1024);this.video.kBpsReceived=c((t-(this.video.kBytesReceived||0))/v.GENERATE_LOG_PERIOD),this.video.kBytesReceived=t,e.googCurrentDelayMs&&(this.video.currentDelayMs=e.googCurrentDelayMs),e.googDecodeMs&&(this.video.decodeMs=e.googDecodeMs),e.googCodecName&&(this.video.codecName=e.googCodecName),e.googFrameRateDecoded?this.video.fps=e.googFrameRateDecoded:e.framerateMean&&(this.video.fps=e.framerateMean),e.googFrameHeightReceived&&(this.video.height=e.googFrameHeightReceived),e.googFrameWidthReceived&&(this.video.width=e.googFrameWidthReceived),e.googJitterBufferMs?this.video.jitter=e.googJitterBufferMs:e.jitter&&(this.video.jitter=e.jitter),e.packetsLost&&e.packetsReceived&&(this.video.packetsLost=e.packetsLost,this.video.packetsReceived=e.packetsReceived,this.video.packetsReceived>0?this.video.packetsLossRate=(this.video.packetsLost/this.video.packetsReceived*100).toFixed(2):this.video.packetsLossRate=0),this.video.fps&&(this.videoDetecter.addVideoInfo(null,null,null,null,this.video.fps),this.video.mos=this.videoDetecter.getSubjectQuality())}if("sender"==this.type){var n=c(e.bytesSent/1024);this.video.kBpsSent=c((n-(this.video.kBytesSent||0))/v.GENERATE_LOG_PERIOD),this.video.kBytesSent=n,e.googFrameRateSent&&(this.video.fps=e.googFrameRateSent),e.googCodecName&&(this.video.codecName=e.googCodecName),e.googAvgEncodeMs&&(this.video.encodeMs=e.googAvgEncodeMs),e.googFrameRateInput&&this.videoDetecter.setStandardFps(e.googFrameRateInput),e.googRtt&&(this.video.rtt=e.rtt),e.googFrameHeightSent&&(this.video.height=e.googFrameHeightSent),e.googFrameWidthSent&&(this.video.width=e.googFrameWidthSent),this.video.fps&&(this.videoDetecter.addVideoInfo(null,null,null,null,this.video.fps,this.video.rtt),this.video.mos=this.videoDetecter.getSubjectQuality(),this.videoDetecter.getRttQuality())}}},{key:"fetchAudioState",value:function(e){if(this.hasAudio=!0,"receiver"==this.type){var t=c(e.bytesReceived/1024);this.audio.kBpsReceived=c((t-(this.audio.kBytesReceived||0))/v.GENERATE_LOG_PERIOD),this.audio.kBytesReceived=t,e.googCurrentDelayMs&&(this.audio.currentDelayMs=e.googCurrentDelayMs),e.googCodecName&&(this.audio.codecName=e.googCodecName),e.audioOutputLevel&&(this.audio.volumeLevel=e.audioOutputLevel),e.googJitterBufferMs?this.audio.jitter=e.googJitterBufferMs:e.jitter&&(this.audio.jitter=e.jitter),e.packetsReceived&&e.packetsLost&&(this.audio.packetsLost=e.packetsLost,this.audio.packetsReceived=e.packetsReceived,this.audio.packetsReceived>0?this.audio.packetsLossRate=(this.audio.packetsLost/this.audio.packetsReceived*100).toFixed(2):this.audio.packetsLossRate=0)}if("sender"==this.type){var n=c(e.bytesSent/1024);this.audio.kBpsSent=c((n-(this.audio.kBytesSent||0))/v.GENERATE_LOG_PERIOD),this.audio.kBytesSent=n,e.googCodecName&&(this.audio.codecName=e.googCodecName)}}},{key:"updateClientLog",value:function(){var e=this;e.clientLog={net:e.net,videoBwe:e.videoBwe,video:e.video,audio:e.audio},"sender"==e.type?(e.clientLog.kBytesSent=c(e.video.kBytesSent||0+e.audio.kBytesSent||0),e.clientLog.kBpsSent=c(e.video.kBpsSent||0+e.audio.kBpsSent||0)):"receiver"==e.type&&(e.clientLog.kBytesReceived=c(e.video.kBytesReceived||0+e.audio.kBytesReceived||0),e.clientLog.kBpsReceived=c(e.video.kBpsReceived||0+e.audio.kBpsReceived||0)),this.hasAudio||this.hasVideo?(e.clientLog.kBytesReceived>0||e.clientLog.kBytesSent>0)&&e.emit("client_log",JSON.parse(JSON.stringify(e.clientLog))):(e.clientLog.net.kBytesReceived&&e.clientLog.net.kBytesReceived>0||e.clientLog.net.kBytesSent&&e.clientLog.net.kBytesSent>0)&&e.emit("client_log",JSON.parse(JSON.stringify(e.clientLog)))}},{key:"onDynamicLog",value:function(e){this.emit("dynamic_log",e)}},{key:"onStaticLog",value:function(e){this.emit("static_log",e)}},{key:"stop",value:function(){clearInterval(this.generateTimer),this.isStart=!1}}]),t}(d);e.exports=y},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.TAG="MOS",this.videoinfo_list=[],this.fps_window=30,this.totalPauseTimes=0,this.frameJitterTimes=0,this.count=0,this.avg=.1,this.role=t,this.standardFps=null}return r(e,[{key:"addVideoInfo",value:function(e,t,n,r,i,a){var s=new o(e,t,n,r,i,a);this.videoinfo_list.push(s)}},{key:"getSubjectQuality",value:function(){var e=0,t=0,n=void 0,r=void 0;return this.standardFps?(r=this.getFpsStdDev()/this.standardFps,this.avg<this.standardFps/5*4&&(e=1),this.avg<this.standardFps/2&&(t=1)):(r=this.getFpsStdDev()/this.avg,this.avg<10&&(e=1),this.avg<5&&(t=1)),n=r<.06?5-2*e-2*t:r<.12?4-e-2*t:r<.27?3-e-t:r<.64?2-t:1}},{key:"getFpsStdDev",value:function(){var e=0,t=0,n=void 0,r=0,i=void 0,o=void 0,a=void 0;if(this.count=this.videoinfo_list.length,n=this.count-1,n<r)return 1e4;if(this.count<this.fps_window+r){for(o=r;o<=n;++o)e+=this.videoinfo_list[o].fps;for(this.avg=e/(this.count-r),o=r;o<=n;++o)t+=Math.pow(this.videoinfo_list[o].fps-this.avg,2);i=t/(this.count-r)}else{for(o=n-(this.fps_window-1);o<=n;++o)e+=this.videoinfo_list[o].fps;for(this.avg=e/this.fps_window,o=n-(this.fps_window-1);o<=n;++o)t+=Math.pow(this.videoinfo_list[o].fps-this.avg,2);i=t/this.fps_window}return a=Math.sqrt(i)}},{key:"getRttQuality",value:function(){var e=void 0,t=e/this.videoinfo_list.length,n=0;return t/2>=500?n=1:t/2>=400?n=2:t/2>=300?n=3:t/2>=200?n=4:t/2<200&&(n=5),n}},{key:"setStandardFps",value:function(e){this.standardFps=e}}]),e}(),o=function e(t,r,i,o,a,s){n(this,e),this.jitter=parseInt(t),this.packetsLossRate=parseFloat(r),this.width=parseInt(i),this.height=parseInt(o),this.fps=parseInt(a),this.rtt=parseInt(s)};e.exports=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"mergeConstraints",value:function(e,t){if(!e||!t)return e||t;var n=e;for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}},{key:"iceCandidateType",value:function(e){return e.split(" ")[7]}},{key:"maybeSetOpusOptions",value:function(e,t){return"true"===t.opusStereo?e=setCodecParam(e,"opus/48000","stereo","1"):"false"===t.opusStereo&&(e=removeCodecParam(e,"opus/48000","stereo")),"true"===t.opusFec?e=setCodecParam(e,"opus/48000","useinbandfec","1"):"false"===t.opusFec&&(e=removeCodecParam(e,"opus/48000","useinbandfec")),"true"===t.opusDtx?e=setCodecParam(e,"opus/48000","usedtx","1"):"false"===t.opusDtx&&(e=removeCodecParam(e,"opus/48000","usedtx")),t.opusMaxPbr&&(e=setCodecParam(e,"opus/48000","maxplaybackrate",t.opusMaxPbr)),e}},{key:"maybeSetAudioSendBitRate",value:function(e,t){return t.audioSendBitrate?(console.log("Prefer audio send bitrate: "+t.audioSendBitrate),preferBitRate(e,t.audioSendBitrate,"audio")):e}},{key:"maybeSetAudioReceiveBitRate",value:function(e,t){return t.audioRecvBitrate?(console.log("Prefer audio receive bitrate: "+t.audioRecvBitrate),preferBitRate(e,t.audioRecvBitrate,"audio")):e}},{key:"maybeSetVideoSendBitRate",value:function(t,n){return n.videoSendBitrate?e.preferBitRate(t,n.videoSendBitrate,"video"):t}},{key:"maybeSetVideoReceiveBitRate",value:function(e,t){return t.videoRecvBitrate?(console.log("Prefer video receive bitrate: "+t.videoRecvBitrate),preferBitRate(e,t.videoRecvBitrate,"video")):e}},{key:"preferBitRate",value:function(t,n,r){var i=t.split("\r\n"),o=e.findLine(i,"m=",r);if(null===o)return console.log("Failed to add bandwidth line to sdp, as no m-line found"),t;var a=e.findLineInRange(i,o+1,-1,"m=");null===a&&(a=i.length);var s=e.findLineInRange(i,o+1,a,"c=");if(null===s)return console.log("Failed to add bandwidth line to sdp, as no c-line found"),t;var c=e.findLineInRange(i,s+1,a,"b=AS");c&&i.splice(c,1);var u="b=AS:"+n;return i.splice(s+1,0,u),t=i.join("\r\n")}},{key:"maybeSetVideoSendInitialBitRate",value:function(t,n){var r=n.videoSendInitialBitrate;if(!r)return t;var i=r,o=n.videoSendBitrate;o&&(r>o&&(console.log("Clamping initial bitrate to max bitrate of "+o+" kbps."),r=o,n.videoSendInitialBitrate=r),i=o);var a=t.split("\r\n"),s=e.findLine(a,"m=","video");if(null===s)return console.log("Failed to find video m-line"),t;var c=n.videoRecvCodec;return t=setCodecParam(t,c,"x-google-min-bitrate",n.videoSendInitialBitrate.toString()),t=setCodecParam(t,c,"x-google-max-bitrate",i.toString())}},{key:"removePayloadTypeFromMline",value:function(e,t){e=e.split(" ");for(var n=0;n<e.length;++n)e[n]===t.toString()&&e.splice(n,1);return e.join(" ")}},{key:"removeCodecByName",value:function(t,n){var r=e.findLine(t,"a=rtpmap",n);if(null===r)return t;var i=getCodecPayloadTypeFromLine(t[r]);t.splice(r,1);var o=e.findLine(t,"m=","video");return null===o?t:(t[o]=removePayloadTypeFromMline(t[o],i),t)}},{key:"removeCodecByPayloadType",value:function(t,n){var r=e.findLine(t,"a=rtpmap",n.toString());if(null===r)return t;t.splice(r,1);var i=e.findLine(t,"m=","video");return null===i?t:(t[i]=removePayloadTypeFromMline(t[i],n),t)}},{key:"maybeRemoveVideoFec",value:function(t,n){if("false"!==n.videoFec)return t;var r=t.split("\r\n"),i=e.findLine(r,"a=rtpmap","red");if(null===i)return t;var o=getCodecPayloadTypeFromLine(r[i]);if(r=removeCodecByPayloadType(r,o),r=removeCodecByName(r,"ulpfec"),i=e.findLine(r,"a=fmtp",o.toString()),null===i)return t;var a=parseFmtpLine(r[i]),s=a.pt;return null===s?t:(r.splice(i,1),r=removeCodecByPayloadType(r,s),r.join("\r\n"))}},{key:"maybePreferAudioSendCodec",value:function(t,n){return e.maybePreferCodec(t,"audio","send",n.audioSendCodec)}},{key:"maybePreferAudioReceiveCodec",value:function(t,n){return e.maybePreferCodec(t,"audio","receive",n.audioRecvCodec)}},{key:"maybePreferVideoSendCodec",value:function(t,n){return e.maybePreferCodec(t,"video","send",n.videoSendCodec)}},{key:"maybePreferVideoReceiveCodec",value:function(t,n){return e.maybePreferCodec(t,"video","receive",n.videoRecvCodec)}},{key:"maybePreferCodec",value:function(t,n,r,i){var o=n+" "+r+" codec";if(!i)return console.log("No preference on "+o+"."),t;var a=t.split("\r\n"),s=e.findLine(a,"m=",n);if(null===s)return t;var c=e.getCodecPayloadType(a,i);return c&&(a[s]=e.setDefaultCodec(a[s],c)),t=a.join("\r\n")}},{key:"setCodecParam",value:function(t,n,r,i){var o=t.split("\r\n"),a=e.findFmtpLine(o,n),s={};if(null===a){var c=e.findLine(o,"a=rtpmap",n);if(null===c)return t;var u=e.getCodecPayloadTypeFromLine(o[c]);s.pt=u.toString(),s.params={},s.params[r]=i,o.splice(c+1,0,e.writeFmtpLine(s))}else s=e.parseFmtpLine(o[a]),s.params[r]=i,o[a]=e.writeFmtpLine(s);return t=o.join("\r\n")}},{key:"removeCodecParam",value:function(e,t,n){var r=e.split("\r\n"),i=findFmtpLine(r,t);if(null===i)return e;var o=parseFmtpLine(r[i]);delete o.params[n];var a=writeFmtpLine(o);return null===a?r.splice(i,1):r[i]=a,e=r.join("\r\n")}},{key:"parseFmtpLine",value:function(e){var t={},n=e.indexOf(" "),r=e.substring(n+1).split("; "),i=new RegExp("a=fmtp:(\\d+)"),o=e.match(i);if(!o||2!==o.length)return null;t.pt=o[1];for(var a={},s=0;s<r.length;++s){var c=r[s].split("=");2===c.length&&(a[c[0]]=c[1])}return t.params=a,t}},{key:"writeFmtpLine",value:function(e){if(!e.hasOwnProperty("pt")||!e.hasOwnProperty("params"))return null;var t=e.pt,n=e.params,r=[],i=0;for(var o in n)n.hasOwnProperty(o)&&(r[i]=o+"="+n[o],++i);return 0===i?null:"a=fmtp:"+t.toString()+" "+r.join("; ")}},{key:"findFmtpLine",value:function(t,n){var r=getCodecPayloadType(t,n);return r?e.findLine(t,"a=fmtp:"+r.toString()):null}},{key:"findLine",value:function(t,n,r){return e.findLineInRange(t,0,-1,n,r)}},{key:"findLineInRange",value:function(e,t,n,r,i){for(var o=n!==-1?n:e.length,a=t;a<o;++a)if(0===e[a].indexOf(r)&&(!i||e[a].toLowerCase().indexOf(i.toLowerCase())!==-1))return a;return null}},{key:"getCodecPayloadType",value:function(t,n){var r=e.findLine(t,"a=rtpmap",n);return r?e.getCodecPayloadTypeFromLine(t[r]):null}},{key:"getCodecPayloadTypeFromLine",value:function(e){var t=new RegExp("a=rtpmap:(\\d+) [a-zA-Z0-9-]+\\/\\d+"),n=e.match(t);return n&&2===n.length?n[1]:null}},{key:"setDefaultCodec",value:function(e,t){var n=e.split(" "),r=n.slice(0,3);r.push(t);for(var i=3;i<n.length;i++)n[i]!==t&&r.push(n[i]);return r.join(" ")}},{key:"updateBandwidthRestriction",value:function(t,n){return e.maybeSetVideoSendBitRate(t,{videoSendBitrate:n})}},{key:"updateVideoBandwidth",value:function(t,n){return e.preferBitRate(t,n,"video")}},{key:"updateAudioBandwidth",value:function(t,n){return e.preferBitRate(t,n,"audio")}},{key:"filterCandidate",value:function(e,t){var n=e.sdp.split("\r\n"),r=[];for(var i in n)if(n.hasOwnProperty(i))if(n[i].includes("a=candidate:")){
var o=n[i].slice(2);t(o)&&r.push(n[i])}else r.push(n[i]);return e.sdp=r.join("\r\n"),e}}]),e}();e.exports=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"sliceFile",value:function e(t,n,r){var i=16384,e=function e(o){var a=new FileReader;a.onload=function(){return function(a){if(n(a.target.result),t.size>o+a.target.result.byteLength){window.setTimeout(e,0,o+i);var s=(o+a.target.result.byteLength)/t.size;r(s)}}}(t);var s=t.slice(o,o+i);a.readAsArrayBuffer(s)};e(0)}},{key:"wrapperFile",value:function(e){var t=new Blob(e.buffer,{type:e.type});return t.name=e.name,{name:t.name,save:function(){var e=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=e,n.download=t.name,n.click(),setTimeout(function(){window.URL.revokeObjectURL(e)},100)},size:t.size,type:t.type,blob:t,release:function(){t=null,this.blob=null}}}}]),e}();e.exports=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.tag="quality",this.firstType=t.firstType,this.period=t.period,this.k=t.k,this.counter=0,this.mosArray=[],this.videoBandwidthLimit=(e.BAND_WIDTH_MAX+e.BAND_WIDTH_MIN)/2,this.continuousExcellencePoint=0,this.changeBandwidth=function(e){RTCat.D(this.tag,"<changeBandwidth>",e)},this.changeType="","audio"==this.firstType&&(this.changeType="video"),"video"==this.firstType&&(this.changeType="audio")}return r(e,[{key:"addVideoQuality",value:function(e){this.counter++,this.mosArray.push(e),this.counter==this.period&&(this.handleMos(),this.counter=0)}},{key:"handleMos",value:function(){for(var t=this.mosArray.length,n=1,r=0,i=1;i<=this.period;i++)r+=this.mosArray[t-i];var o=r/this.period;if(o<e.STANDARD_MOS){this.continuousExcellencePoint=0;var a=o-e.STANDARD_MOS;n=Math.pow(2,this.k*a)}else o==e.STANDARD_MOS?(this.continuousExcellencePoint++,n=1):(this.continuousExcellencePoint++,this.continuousExcellencePoint==e.UP_COUNT?(this.continuousExcellencePoint=0,n=Math.pow(2,this.k)):n=1);1!=n&&(this.videoBandwidthLimit=this.videoBandwidthLimit*n,this.videoBandwidthLimit>e.BAND_WIDTH_MAX&&(this.videoBandwidthLimit=e.BAND_WIDTH_MAX),this.videoBandwidthLimit<e.BAND_WIDTH_MIN&&(this.videoBandwidthLimit=e.BAND_WIDTH_MIN),RTCat.D(this.tag,"<handleMos>","Type: "+this.changeType+" Gain: "+n+" Bandwidth: "+this.videoBandwidthLimit+" AvgMos: "+o),this.changeBandwidth(this.videoBandwidthLimit,this.changeType))}}]),e}();i.BAND_WIDTH_MAX=2e4,i.BAND_WIDTH_MIN=50,i.STANDARD_MOS=3,i.UP_COUNT=3,e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c=n(329).EventEmitter,u=n(353),f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.set(n,{}),s.get(n)._handler=new u(e),s.get(n)._handler.init(),s.get(n)._handler.eventHandler=function(e,t){switch(t.length){case 0:n.emit(e);break;case 1:n.emit(e,t[0]);break;case 2:n.emit(e,t[0],t[1]);break;default:n.emit(e)}},n}return o(t,e),a(t,[{key:"candidate",value:function(e){s.get(this)._handler.addCandidate(e)}},{key:"response",value:function(){s.get(this)._handler.response()}},{key:"responseFile",value:function(){s.get(this)._handler.responseFile()}},{key:"getId",value:function(){return s.get(this)._handler.id}},{key:"getSender",value:function(){return this.getSenderToken()}},{key:"getSenderToken",value:function(){return s.get(this)._handler.opposite}},{key:"getRole",value:function(){return s.get(this)._handler.role}},{key:"getAttr",value:function(){return s.get(this)._handler.attr}},{key:"getStream",value:function(){return s.get(this)._handler.stream}},{key:"getFileList",value:function(){return s.get(this)._handler.fileList}},{key:"close",value:function(){s.get(this)._handler.close()}},{key:"enableVideo",value:function(){s.get(this)._handler.setVideoEnabled(!0)}},{key:"enableAudio",value:function(){s.get(this)._handler.setAudioEnabled(!0)}},{key:"disableVideo",value:function(){s.get(this)._handler.setVideoEnabled(!1)}},{key:"disableAudio",value:function(){s.get(this)._handler.setAudioEnabled(!1)}},{key:"updateRemoteSdp",value:function(e){s.get(this)._handler.setRemoteSdp(e)}},{key:"updatePeer",value:function(e){s.get(this)._handler.updatePeer(e)}}]),t}(c);e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(345),u=n(354),f=n(350),l=n(314).Peer,d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.role="receiver",n.id=e.channelId,n.opposite=e.from,n.sdp=e.sdp,n.peer=new l({peerConfig:n.peerConfig,isNegoIce:!1}),n}return o(t,e),a(t,[{key:"init",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.currentFile={name:null,size:0,type:null,buffer:[]},this.fileList={},this.peer.onstream=function(t){e.stream=new u(t),e.eventHandler("stream",[e.stream])}}},{key:"responseFileInternal",value:function(e,t){var n={type:"response",response:"file",content:{name:e,purpose:t}};this.msgChannel&&this.msgChannel.sendJSON(n)}},{key:"responseFile",value:function(){this.currentFile.name&&this.responseFileInternal(this.currentFile.name,"agree")}},{key:"response",value:function(){function e(e){t.handshake=!0,t.onHandShake();var n={to:t.opposite,sdp:e,channelId:t.id};t.eventHandler("_answer",[n])}var t=this;t.rcq=[];var n={};n[t.channelLabel.Message]=t.getChannelHandler(t.channelLabel.Message),n[t.channelLabel.File]=t.getChannelHandler(t.channelLabel.File),this.data?this.peer.answer(this.sdp,null,n,c.codecHandler).then(e):this.peer.answer(this.sdp,null,null,c.codecHandler).then(e)}},{key:"channelOnMessage",value:function(e,n){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"channelOnMessage",this).call(this,e,n),e==this.channelLabel.Message?this.messageChannelOnMessage(n):this.fileChannelOnMessage(n)}},{key:"messageChannelOnMessage",value:function(e){var t=JSON.parse(e);switch(t.type){case"message":this.eventHandler("message",[t.content]);break;case"video":break;case"file":RTCat.I(this.tag,"<onmessage>","receive file(name:"+t.name+") request"),this.currentFile={buffer:[],name:t.file.name,size:t.file.size,type:t.file.type,receiveSize:0},this.eventHandler("receive_file",[this.currentFile.name])}}},{key:"fileChannelOnMessage",value:function(e){this.currentFile.name&&(this.currentFile.buffer.push(e),this.currentFile.receiveSize+=e.byteLength,this.currentFile.receiveSize==this.currentFile.size&&(this.responseFileInternal(this.currentFile.name,"finish"),this.eventHandler("file",[f.wrapperFile(this.currentFile)]),this.fileList[this.currentFile.name]=Object.assign({},this.currentFile),this.currentFile={name:null,size:0,type:null,buffer:[]}))}},{key:"close",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"close",this).call(this),this.stream&&this.stream.stop()}},{key:"setVideoEnabled",value:function(e){this.stream&&this.stream.getStreamWrapper().setVideoEnabled(e)}},{key:"setAudioEnabled",value:function(e){this.stream&&this.stream.getStreamWrapper().setAudioEnabled(e)}},{key:"setRemoteSdp",value:function(e){this.sdp=e}},{key:"updatePeer",value:function(e){this.sdp=e,this.stream&&this.stream.stop(),this.peer.onclose=function(e){},this.peer.close(),this.peer=new l({peerConfig:this.peerConfig,isNegoIce:!1});try{this.webrtcLog.stop(),this.webrtcLog=null}catch(e){}this.init(),this.response()}}]),t}(c);e.exports=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(328),c=n(355),u=n(338),f=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{stream:e,local:!1}));return n.vc_plugin=c(),n.ad_plugin=u(),n.ad_plugin.data.onvolume=function(e){n.emit("volume",e)},n.load(n.vc_plugin),n.load(n.ad_plugin),n}return o(t,e),a(t,[{key:"detectVolume",value:function(e){this.ad_plugin.do(e)}},{key:"changeOutputDevice",value:function(e){this.getPlayer().audioOutput(e)}},{key:"mute",value:function(){this.getPlayer().mute(!0)}},{key:"unmute",value:function(){this.getPlayer().mute(!1)}},{key:"vc",value:function(){}}]),t}(s);e.exports=f},function(e,t,n){"use strict";function r(e,t){var n=this;switch(e){case"start":var r=1024;this.data.audioContext=new AudioContext;var i=2,o=.5,a=function(e){for(var t=new Float32Array(e),n=0;n<e;n++)t[n]=.5*(1-Math.cos(2*Math.PI*n/(e-1)));return t},s=function(e,t,n){return e+(t-e)*n},c=function(){n.data.process&&n.data.process.disconnect(),n.data.process=n.data.audioContext.createScriptProcessor(r,1,1),n.data.process.buffer=new Float32Array(2*r),n.data.process.grainWindow=a(r),n.data.process.onaudioprocess=function(e){for(var t=e.inputBuffer.getChannelData(0),n=e.outputBuffer.getChannelData(0),a=0;a<t.length;a++)t[a]*=this.grainWindow[a],this.buffer[a]=this.buffer[a+r],this.buffer[a+r]=0;for(var c=new Float32Array(2*r),u=0,f=0;u<r;u++,f+=i){var l=Math.floor(f)%r,d=t[l],p=t[(l+1)%r];c[u]+=s(d,p,f%1)*this.grainWindow[u]}for(var h=0;h<r;h+=Math.round(r*(1-o)))for(var v=0;v<=r;v++)this.buffer[h+v]+=c[v];for(var y=0;y<r;y++)n[y]=this.buffer[y]}};this.data.source=this.data.audioContext.createMediaStreamSource(t.mediaStream),c(),this.data.source.connect(n.data.process),n.data.process.connect(this.data.audioContext.destination);break;case"stop":this.data.process.disconnect()}}function i(){}var o=n(334),a={audioContext:null,source:null,process:null};e.exports=function(e){return new o("vc","0.0.1",o.Type.STREAM,r,i,a)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(314).Connector,s=n(331),c=262144,u=function(){function e(t){r(this,e),this.connector=new a(t),this.onerror=function(e){},this.onin=function(e){},this.onconnected=function(e){},this.onout=function(e){},this.onremote=function(e){},this.onlocal=function(e){},this.onmessage=function(e){},this.ondisconnect=function(e){}}return o(e,[{key:"checkin",value:function(){this.send(e.C2S.JOIN,{platform:{}})}},{key:"send",value:function(e,t){var n={eventName:e};t&&(n.data=t),this.connector.sendJSONWithHandler(n,null)}},{key:"sendMessage",value:function(t,n){var r=this,o=function(){r.send(e.C2S.MESSAGE,{message:n,to:t})};"object"===("undefined"==typeof n?"undefined":i(n))?JSON.stringify(n).length<c?o():this.onerror(new s(20005,(new Error).stack)):"string"==typeof n?n.length<c?o():this.onerror(new s(20005,(new Error).stack)):this.onerror(new s(20004,(new Error).stack))}},{key:"broadcastMessage",value:function(t){var n=this,r=function(){n.send(e.C2S.BROADCAST,{message:t})};"object"===("undefined"==typeof t?"undefined":i(t))?JSON.stringify(t).length<c?r():this.onerror(new s(20005,(new Error).stack)):t.length?t.length<c?r():this.onerror(new s(20005,(new Error).stack)):this.onerror(new s(20004,(new Error).stack))}}]),e}();u.C2S={JOIN:"__join",MESSAGE:"__message",BROADCAST:"__broadcast",LOG:"__log",ANSWER:"__answer",OFFER:"__offer",ICE:"__ice",ICE_COMPLETE:"__icecomplete",FETCH:"__fetch",LINK:"__link",UNLINK:"__unlink"},u.S2C={JOIN:"_join",PEERS:"_peers",REMOVE_PEER:"_remove_peer",OFFER:"_offer",ANSWER:"_answer",ICE:"_ice",MESSAGE:"_message",ERROR:"_error",ICE_COMPLETE:"_icecomplete"},e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c=n(329).EventEmitter,u=n(358),f=n(359),l=n(361),d=n(332),p=n(340),h=n(326),v=function(e,t,n){if("dynamic"===t||"static"===t){var r={id:e,data:n};p.postSFULog(t,r)}else{n.id=e;var i={type:"peer_"+t,data:n};p.postSFULog("events",i)}},y=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.set(o,{}),o.tokenId=e,o.url=n.url;var a=o.url+"?"+d.object2URLParam({tokenId:o.tokenId});return s.get(o)._handle=new u(a,n),s.get(o)._startTime=null,s.get(o)._handle.onconnected=function(e){var t={platform:h.getPlatform(),device:h.getDevice(),domain:h.getDomain(),token:o.tokenId,sdk:"JS SDK "+RTCat.getVersion(),connectTime:(Date.now()-s.get(o)._startTime)/1e3,server:s.get(o)._handle.info.serverName,ip:s.get(o)._handle.info.clientIp,route:s.get(o)._handle.info.route};p.postSFULog("events",{type:"session_connect",data:t}),o.emit("connected",s.get(o)._handle.info.routes)},s.get(o)._handle.ondisconnected=function(e){var t={token:o.tokenId};p.postSFULog("events",{type:"session_disconnect",data:t}),o.emit("disconnected")},s.get(o)._handle.onstreamcreated=function(e,t){o.emit("published",e,t)},s.get(o)._handle.onstreamdestroyed=function(e){o.emit("unpublished",e)},s.get(o)._handle.onerror=function(e){o.emit("error_msg",e)},o}return o(t,e),a(t,[{key:"createPublisher",value:function(e){var t={iceServers:[s.get(this)._handle.iceServer],iceTransportPolicy:"relay"},n=new f(e,t),r=this.tokenId;return n.on("_log",function(e,t){v(r,e,t)}),n}},{key:"createSubscriber",value:function(e){var t={iceServers:[s.get(this)._handle.iceServer],iceTransportPolicy:"relay"},n=new l(e,t),r=e+"@"+this.tokenId;return n.on("_log",function(e,t){v(r,e,t)}),n}},{key:"publish",value:function(e){return s.get(this)._handle.publish(e)}},{key:"subscribe",value:function(e){return s.get(this)._handle.subscribe(e)}},{key:"unPublish",value:function(e){return s.get(this)._handle.unPublish(e)}},{key:"unSubscribe",value:function(e){return s.get(this)._handle.unSubscribe(e)}},{key:"connect",value:function(){s.get(this)._startTime=Date.now(),s.get(this)._handle.connect()}},{key:"disconnect",value:function(){s.get(this)._handle.disconnect()}}]),t}(c);e.exports=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(314).Connector,a=n(332),s=function(){function e(t,n){r(this,e),this.tag="sfu-handler",this.connector=new o(t),this.onconnected=function(e){},this.ondisconnected=function(e){},this.onstreamcreated=function(e,t){},this.onstreamdestroyed=function(e){},this.onerror=function(e){},this.info={route:null,routes:null,serverName:null,clientIp:null},this.iceServer=null,this.publisher=null,this.subscribers={},this.transEvents={},this.keepliveTimer=null,this.route=n.route,this.attr=n.attr}return i(e,[{key:"connect",value:function(){var e=this;this.connector.onmessage=function(t){e.handleMessage(t)},this.connector.onopen=function(t){e.log("open"),e.checkin()},this.connector.onclose=function(t){clearInterval(e.keepliveTimer),e.log("close"),e.ondisconnected()},this.connector.onerror=function(t){e.log(t)},this.connector.connect()}},{key:"disconnect",value:function(){this.connector.close()}},{key:"handleMessage",value:function(e){var t=this;this.log(JSON.stringify(e));var n=e.data,r=e.eventName,i=e.transaction;if(i)if(this.transEvents[i]){var o=this.transEvents[i];o(n)}else this.onerror("unknown message");else switch(r){case"__streamcreated":var a=n;this.onstreamcreated(a.token,a.attr);break;case"__streamdestroyed":var s=n.token;if(this.subscribers[s]){var c=this.subscribers[s];this.unSubscribe(c).then(function(e){t.onstreamdestroyed(s),c.close()}).catch(function(e){})}else this.onstreamdestroyed(s);break;case"__list":break;case"__error":this.onerror(n.error);break;default:this.onerror("unknown message")}}},{key:"checkin",value:function(){var e=this,t=function(t){if(t.error)e.onerror(t.error);else{e.startKeepAlive();var n=t.publishers,r=t.routes.prefer,i=t.routes.routes;e.iceServer=i[r],e.info.routes=Object.keys(i),e.info.route=r,e.info.serverName=t.server_name,e.info.clientIp=t.client_ip,e.onconnected();var o=!0,a=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var f=c.value;e.onstreamcreated(f.token,f.attr)}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}}};this.sendTransactionMessage("_join",{route:this.route,attr:this.attr},t)}},{key:"publish",value:function(e){var t=this;return new Promise(function(n,r){if(t.publisher)r("this session has published");else{t.publisher=e;var i=function(i){if(i.error)r(i.error);else{var o=i.answer;t.publisher.receiveAnswer(o),n(e)}};t.publisher.on("_ice",function(e){var n=function(e){};t.sendTransactionMessage("_candidate",{candidate:e},n)}),t.publisher.createOffer().then(function(e){var n={video:t.publisher.video,audio:t.publisher.audio,offer:e};t.sendTransactionMessage("_publish",n,i)})}})}},{key:"subscribe",value:function(e){var t=this;return new Promise(function(n,r){var i=e.tokenId;if(t.subscribers[i])r("this token has subscribed");else{t.subscribers[i]=e;var o=function(e){var i=e.token;if(e.error)r(e.error);else{var o=e.offer,a=t.subscribers[i],s=function(e){e.error?r(e.error):n(a)};a.receiveOffer(o).then(function(e){t.sendTransactionMessage("_subscribe",{answer:e,token:i},s)})}};e.on("_ice",function(e){var n=function(e){};t.sendTransactionMessage("_candidate",{candidate:e,token:i},n)}),t.sendTransactionMessage("_subscribe",{token:i},o)}})}},{key:"unPublish",value:function(e){var t=this;return new Promise(function(n,r){var i=function(e){if(e.error)r(e.error);else{var i=t.publisher;i.close(),t.publisher=null,n(i)}};e||t.publisher===e?t.sendTransactionMessage("_unpublish",{},i):r("this session has not published")})}},{key:"unSubscribe",value:function(e){var t=this;return new Promise(function(n,r){var i=function(e){var i=e.token;if(e.error)r(e.error);else{var o=t.subscribers[i];o.close(),delete t.subscribers[i],n(o)}};e||t.subscribers[e.tokenId]===e?t.sendTransactionMessage("_unsubscribe",{token:e.tokenId},i):r("this token has not subscribed")})}},{key:"sendTransactionMessage",value:function(e,t,n){var r=a.createRandomString(12);this.transEvents[r]=n;var i={eventName:e,transaction:r,data:t};this.log("sendMessage: "+JSON.stringify(i)),this.connector.sendJSONWithHandler(i)}},{key:"startKeepAlive",value:function(){var e=this;this.keepliveTimer=setInterval(function(t){e.sendTransactionMessage("_keepalive",{},function(e){})},2e4)}},{key:"log",value:function(e){}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c=n(360),u=n(329).EventEmitter,f=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.set(o,{}),o.stream=e,s.get(o)._handler=new c("sender",n),o.video=!0,o.audio=!0;var a=o;return s.get(o)._handler.eventHandler=function(e){switch(arguments.length){case 1:a.emit(e);break;case 2:a.emit(e,arguments[1]);break;case 3:a.emit(e,arguments[1],arguments[2])}},o}return o(t,e),a(t,[{key:"createOffer",value:function(){return this.video=this.stream.hasVideo(),this.audio=this.stream.hasAudio(),s.get(this)._handler.createOffer(this.stream.getStreamCloneWrapper())}},{key:"receiveAnswer",value:function(e){s.get(this)._handler.receiveAnswer(e)}},{key:"close",value:function(){s.get(this)._handler.close()}}]),t}(u);e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(354),a=n(314).Peer,s=n(349),c=n(346),u=n(347),f=(n(332),n(340),n(326)),l=function(){function e(t,n){var i=this;r(this,e),this.iceQueue=[];var s="sender"!==t;this.peer=new a({peerConfig:n,offerConstraint:{offerToReceiveAudio:s,offerToReceiveVideo:s}}),this.webrtcLog=new u(t),this.addWebRTCLogHandler(),this.handShake="sender"!==t,this.onice=function(e){i.eventHandler("_ice",e)},this.peer.onclose=function(e){i.logHandler("disconnect",{}),i.webrtcLog.stop(),i.eventHandler("closed")},this.peer.onicestate=function(e){"failed"===e&&i.peer.close()},this.peer.onconnected=function(e){i.logHandler("connect",{}),i.webrtcLog.start(),i.eventHandler("connected")},this.peer.onice=function(e){i.handShake?i.onice(e):i.iceQueue.push(e)},this.peer.onerror=function(e){i.logHandler("error",{message:e.message}),i.eventHandler("error",e)},this.peer.onstream=function(e){i.eventHandler("stream",new o(e))}}return i(e,[{key:"addWebRTCLogHandler",value:function(){var e=this;e.webrtcLog.on("get_stats",function(t){f.isSafari()||e.peer.getStats(function(t){e.webrtcLog.addResult(t.result())})}),e.webrtcLog.on("client_log",function(t){e.eventHandler("log",JSON.parse(JSON.stringify(t)))}),e.webrtcLog.on("dynamic_log",function(t){e.logHandler("dynamic",t)}),e.webrtcLog.on("static_log",function(t){e.logHandler("static",t)})}},{key:"logHandler",value:function(e,t){this.eventHandler("_log",e,t)}},{key:"eventHandler",value:function(e){}},{key:"createOffer",value:function(e){return this.peer.offer(e)}},{key:"receiveOffer",value:function(e){function t(e){return c.iceFilter({candidate:e},"relay")}var n=s.filterCandidate(e,t);return this.peer.answer(n)}},{key:"receiveAnswer",value:function(e){function t(e){return c.iceFilter({candidate:e},"relay")}var n=this,r=s.filterCandidate(e,t);this.peer.foffer(r).then(function(e){n.onHandShake()})}},{key:"onHandShake",value:function(){this.handShake=!0;for(var e=void 0;e=this.iceQueue.pop();)this.onice(e)}},{key:"close",value:function(){this.peer.close()}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=new WeakMap,c=n(360),u=n(329).EventEmitter,f=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.set(o,{}),o.tokenId=e,s.get(o)._handler=new c("receiver",n);var a=o;return s.get(o)._handler.eventHandler=function(e){switch(arguments.length){case 1:a.emit(e);break;case 2:a.emit(e,arguments[1]);break;case 3:a.emit(e,arguments[1],arguments[2])}},o}return o(t,e),a(t,[{key:"receiveOffer",value:function(e){return s.get(this)._handler.receiveOffer(e)}},{key:"close",value:function(){s.get(this)._handler.close()}}]),t}(u);e.exports=f},function(e,t){"use strict";e.exports={quality:{enable:!1,firstType:"audio",period:3,k:1}}}])});